(()=>{var e={1039:function(e,t,r){!function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(r);function a(e,t,r){var n,a;"function"==typeof e?(n=t||[],a=r):(n=[],a=t);var o=i.default.useRef({hasResult:!1,result:a,error:null}),s=i.default.useReducer((function(e){return e+1}),0);s[0];var u=s[1],l=i.default.useMemo((function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe)throw e===t?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult)if("function"==typeof t.getValue)o.current.result=t.getValue(),o.current.hasResult=!0;else{var r=t.subscribe((function(e){o.current.result=e,o.current.hasResult=!0}));"function"==typeof r?r():r.unsubscribe()}return t}),n);if(i.default.useDebugValue(o.current.result),i.default.useEffect((function(){var e=l.subscribe((function(e){var t=o.current;null===t.error&&t.result===e||(t.error=null,t.result=e,t.hasResult=!0,u())}),(function(e){var t=o.current;t.error!==e&&(t.error=e,u())}));return"function"==typeof e?e:e.unsubscribe.bind(e)}),n),o.current.error)throw o.current.error;return o.current.result}e.useLiveQuery=function(e,r,n){return a((function(){return t.liveQuery(e)}),r||[],n)},e.useObservable=a,e.usePermissions=function(e,r,n){if(!e)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var i;if(arguments.length>=3){if(!("transaction"in e))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if("string"!=typeof r)throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!n||"object"!=typeof n)throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");i=e}else{if(e instanceof t.Dexie)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if("function"!=typeof e.table||"object"!=typeof e.db)throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)");i=e.db,n=e,r=e.table()}if(!("cloud"in i))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in i.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return a((function(){return i.cloud.permissions(n,r)}),[n.realmId,n.owner,r])},Object.defineProperty(e,"__esModule",{value:!0})}(t,r(9520),r(7363))},8679:(e,t,r)=>{"use strict";var n=r(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return n.isMemo(e)?o:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(d){var i=p(r);i&&i!==d&&e(t,i,n)}var o=c(r);h&&(o=o.concat(h(r)));for(var s=u(t),m=u(r),g=0;g<o.length;++g){var v=o[g];if(!(a[v]||n&&n[v]||m&&m[v]||s&&s[v])){var y=f(r,v);try{l(t,v,y)}catch(e){}}}}return t}},8552:(e,t,r)=>{var n=r(852)(r(5639),"DataView");e.exports=n},1989:(e,t,r)=>{var n=r(1789),i=r(401),a=r(7667),o=r(1327),s=r(1866);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},8407:(e,t,r)=>{var n=r(7040),i=r(4125),a=r(2117),o=r(7518),s=r(4705);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},7071:(e,t,r)=>{var n=r(852)(r(5639),"Map");e.exports=n},3369:(e,t,r)=>{var n=r(4785),i=r(1285),a=r(6e3),o=r(9916),s=r(5265);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},3818:(e,t,r)=>{var n=r(852)(r(5639),"Promise");e.exports=n},8525:(e,t,r)=>{var n=r(852)(r(5639),"Set");e.exports=n},6384:(e,t,r)=>{var n=r(8407),i=r(7465),a=r(3779),o=r(7599),s=r(4758),u=r(4309);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,e.exports=l},2705:(e,t,r)=>{var n=r(5639).Symbol;e.exports=n},1149:(e,t,r)=>{var n=r(5639).Uint8Array;e.exports=n},577:(e,t,r)=>{var n=r(852)(r(5639),"WeakMap");e.exports=n},6874:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},7412:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},4963:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}},4636:(e,t,r)=>{var n=r(2545),i=r(5694),a=r(1469),o=r(4144),s=r(5776),u=r(6719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),c=!r&&i(e),h=!r&&!c&&o(e),f=!r&&!c&&!h&&u(e),p=r||c||h||f,d=p?n(e.length,String):[],m=d.length;for(var g in e)!t&&!l.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||d.push(g);return d}},9932:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},2488:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},6556:(e,t,r)=>{var n=r(9465),i=r(7813);e.exports=function(e,t,r){(void 0!==r&&!i(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},4865:(e,t,r)=>{var n=r(9465),i=r(7813),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var o=e[t];a.call(e,t)&&i(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},8470:(e,t,r)=>{var n=r(7813);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},4037:(e,t,r)=>{var n=r(8363),i=r(3674);e.exports=function(e,t){return e&&n(t,i(t),e)}},3886:(e,t,r)=>{var n=r(8363),i=r(1704);e.exports=function(e,t){return e&&n(t,i(t),e)}},9465:(e,t,r)=>{var n=r(8777);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},5990:(e,t,r)=>{var n=r(6384),i=r(7412),a=r(4865),o=r(4037),s=r(3886),u=r(4626),l=r(278),c=r(8805),h=r(1911),f=r(8234),p=r(6904),d=r(4160),m=r(3824),g=r(9148),v=r(8517),y=r(1469),b=r(4144),w=r(6688),_=r(3218),C=r(2928),x=r(3674),S=r(1704),I="[object Arguments]",E="[object Function]",P="[object Object]",A={};A[I]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[P]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[E]=A["[object WeakMap]"]=!1,e.exports=function e(t,r,O,R,k,M){var T,N=1&r,D=2&r,j=4&r;if(O&&(T=k?O(t,R,k,M):O(t)),void 0!==T)return T;if(!_(t))return t;var B=y(t);if(B){if(T=m(t),!N)return l(t,T)}else{var F=d(t),L=F==E||"[object GeneratorFunction]"==F;if(b(t))return u(t,N);if(F==P||F==I||L&&!k){if(T=D||L?{}:v(t),!N)return D?h(t,s(T,t)):c(t,o(T,t))}else{if(!A[F])return k?t:{};T=g(t,F,N)}}M||(M=new n);var U=M.get(t);if(U)return U;M.set(t,T),C(t)?t.forEach((function(n){T.add(e(n,r,O,n,t,M))})):w(t)&&t.forEach((function(n,i){T.set(i,e(n,r,O,i,t,M))}));var $=B?void 0:(j?D?p:f:D?S:x)(t);return i($||t,(function(n,i){$&&(n=t[i=n]),a(T,i,e(n,r,O,i,t,M))})),T}},3118:(e,t,r)=>{var n=r(3218),i=Object.create,a=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=a},8483:(e,t,r)=>{var n=r(5063)();e.exports=n},7786:(e,t,r)=>{var n=r(1811),i=r(327);e.exports=function(e,t){for(var r=0,a=(t=n(t,e)).length;null!=e&&r<a;)e=e[i(t[r++])];return r&&r==a?e:void 0}},8866:(e,t,r)=>{var n=r(2488),i=r(1469);e.exports=function(e,t,r){var a=t(e);return i(e)?a:n(a,r(e))}},4239:(e,t,r)=>{var n=r(2705),i=r(9607),a=r(2333),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},9454:(e,t,r)=>{var n=r(4239),i=r(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},5588:(e,t,r)=>{var n=r(4160),i=r(7005);e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},8458:(e,t,r)=>{var n=r(3560),i=r(5346),a=r(3218),o=r(346),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(n(e)?f:s).test(o(e))}},9221:(e,t,r)=>{var n=r(4160),i=r(7005);e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},8749:(e,t,r)=>{var n=r(4239),i=r(1780),a=r(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[n(e)]}},280:(e,t,r)=>{var n=r(5726),i=r(6916),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},313:(e,t,r)=>{var n=r(3218),i=r(5726),a=r(3498),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=i(e),r=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&r.push(s);return r}},2980:(e,t,r)=>{var n=r(6384),i=r(6556),a=r(8483),o=r(9783),s=r(3218),u=r(1704),l=r(6390);e.exports=function e(t,r,c,h,f){t!==r&&a(r,(function(a,u){if(f||(f=new n),s(a))o(t,r,u,c,e,h,f);else{var p=h?h(l(t,u),a,u+"",t,r,f):void 0;void 0===p&&(p=a),i(t,u,p)}}),u)}},9783:(e,t,r)=>{var n=r(6556),i=r(4626),a=r(7133),o=r(278),s=r(8517),u=r(5694),l=r(1469),c=r(9246),h=r(4144),f=r(3560),p=r(3218),d=r(8630),m=r(6719),g=r(6390),v=r(9881);e.exports=function(e,t,r,y,b,w,_){var C=g(e,r),x=g(t,r),S=_.get(x);if(S)n(e,r,S);else{var I=w?w(C,x,r+"",e,t,_):void 0,E=void 0===I;if(E){var P=l(x),A=!P&&h(x),O=!P&&!A&&m(x);I=x,P||A||O?l(C)?I=C:c(C)?I=o(C):A?(E=!1,I=i(x,!0)):O?(E=!1,I=a(x,!0)):I=[]:d(x)||u(x)?(I=C,u(C)?I=v(C):p(C)&&!f(C)||(I=s(x))):E=!1}E&&(_.set(x,I),b(I,x,y,w,_),_.delete(x)),n(e,r,I)}}},5976:(e,t,r)=>{var n=r(6557),i=r(5357),a=r(61);e.exports=function(e,t){return a(i(e,t,n),e+"")}},6560:(e,t,r)=>{var n=r(5703),i=r(8777),a=r(6557),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;e.exports=o},2545:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},531:(e,t,r)=>{var n=r(2705),i=r(9932),a=r(1469),o=r(3448),s=n?n.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},7561:(e,t,r)=>{var n=r(7990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},1811:(e,t,r)=>{var n=r(1469),i=r(5403),a=r(5514),o=r(9833);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:a(o(e))}},4318:(e,t,r)=>{var n=r(1149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},4626:(e,t,r)=>{e=r.nmd(e);var n=r(5639),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},7157:(e,t,r)=>{var n=r(4318);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},3147:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},419:(e,t,r)=>{var n=r(2705),i=n?n.prototype:void 0,a=i?i.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},7133:(e,t,r)=>{var n=r(4318);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},8363:(e,t,r)=>{var n=r(4865),i=r(9465);e.exports=function(e,t,r,a){var o=!r;r||(r={});for(var s=-1,u=t.length;++s<u;){var l=t[s],c=a?a(r[l],e[l],l,r,e):void 0;void 0===c&&(c=e[l]),o?i(r,l,c):n(r,l,c)}return r}},8805:(e,t,r)=>{var n=r(8363),i=r(9551);e.exports=function(e,t){return n(e,i(e),t)}},1911:(e,t,r)=>{var n=r(8363),i=r(1442);e.exports=function(e,t){return n(e,i(e),t)}},4429:(e,t,r)=>{var n=r(5639)["__core-js_shared__"];e.exports=n},1463:(e,t,r)=>{var n=r(5976),i=r(6612);e.exports=function(e){return n((function(t,r){var n=-1,a=r.length,o=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(r[0],r[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++n<a;){var u=r[n];u&&e(t,u,n,o)}return t}))}},5063:e=>{e.exports=function(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===r(a[u],u,a))break}return t}}},8777:(e,t,r)=>{var n=r(852),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},8234:(e,t,r)=>{var n=r(8866),i=r(9551),a=r(3674);e.exports=function(e){return n(e,a,i)}},6904:(e,t,r)=>{var n=r(8866),i=r(1442),a=r(1704);e.exports=function(e){return n(e,a,i)}},5050:(e,t,r)=>{var n=r(7019);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},852:(e,t,r)=>{var n=r(8458),i=r(7801);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},5924:(e,t,r)=>{var n=r(5569)(Object.getPrototypeOf,Object);e.exports=n},9607:(e,t,r)=>{var n=r(2705),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[s]=r:delete e[s]),i}},9551:(e,t,r)=>{var n=r(4963),i=r(479),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),n(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},1442:(e,t,r)=>{var n=r(2488),i=r(5924),a=r(9551),o=r(479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=i(e);return t}:o;e.exports=s},4160:(e,t,r)=>{var n=r(8552),i=r(7071),a=r(3818),o=r(8525),s=r(577),u=r(4239),l=r(346),c="[object Map]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",d="[object DataView]",m=l(n),g=l(i),v=l(a),y=l(o),b=l(s),w=u;(n&&w(new n(new ArrayBuffer(1)))!=d||i&&w(new i)!=c||a&&w(a.resolve())!=h||o&&w(new o)!=f||s&&w(new s)!=p)&&(w=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case m:return d;case g:return c;case v:return h;case y:return f;case b:return p}return t}),e.exports=w},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,r)=>{var n=r(4536);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,r)=>{var n=r(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},1327:(e,t,r)=>{var n=r(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},1866:(e,t,r)=>{var n=r(4536);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},3824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},9148:(e,t,r)=>{var n=r(4318),i=r(7157),a=r(3147),o=r(419),s=r(7133);e.exports=function(e,t,r){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Symbol]":return o(e)}}},8517:(e,t,r)=>{var n=r(3118),i=r(5924),a=r(5726);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(i(e))}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},6612:(e,t,r)=>{var n=r(7813),i=r(8612),a=r(5776),o=r(3218);e.exports=function(e,t,r){if(!o(r))return!1;var s=typeof t;return!!("number"==s?i(r)&&a(t,r.length):"string"==s&&t in r)&&n(r[t],e)}},5403:(e,t,r)=>{var n=r(1469),i=r(3448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,r)=>{var n,i=r(4429),a=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,r)=>{var n=r(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},2117:(e,t,r)=>{var n=r(8470);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},7518:(e,t,r)=>{var n=r(8470);e.exports=function(e){return n(this.__data__,e)>-1}},4705:(e,t,r)=>{var n=r(8470);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},4785:(e,t,r)=>{var n=r(1989),i=r(8407),a=r(7071);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},1285:(e,t,r)=>{var n=r(5050);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).get(e)}},9916:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).has(e)}},5265:(e,t,r)=>{var n=r(5050);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},4523:(e,t,r)=>{var n=r(8306);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},4536:(e,t,r)=>{var n=r(852)(Object,"create");e.exports=n},6916:(e,t,r)=>{var n=r(5569)(Object.keys,Object);e.exports=n},3498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},1167:(e,t,r)=>{e=r.nmd(e);var n=r(1957),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&n.process,s=function(){try{return a&&a.require&&a.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},5357:(e,t,r)=>{var n=r(6874),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),u=Array(s);++o<s;)u[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=r(u),n(e,this,l)}}},5639:(e,t,r)=>{var n=r(1957),i="object"==typeof self&&self&&self.Object===Object&&self,a=n||i||Function("return this")();e.exports=a},6390:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},61:(e,t,r)=>{var n=r(6560),i=r(1275)(n);e.exports=i},1275:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var i=t(),a=16-(i-n);if(n=i,a>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},7465:(e,t,r)=>{var n=r(8407);e.exports=function(){this.__data__=new n,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,r)=>{var n=r(8407),i=r(7071),a=r(3369);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(o)}return r.set(e,t),this.size=r.size,this}},5514:(e,t,r)=>{var n=r(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)})),t}));e.exports=o},327:(e,t,r)=>{var n=r(3448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},361:(e,t,r)=>{var n=r(5990);e.exports=function(e){return n(e,5)}},5703:e=>{e.exports=function(e){return function(){return e}}},3279:(e,t,r)=>{var n=r(3218),i=r(7771),a=r(4841),o=Math.max,s=Math.min;e.exports=function(e,t,r){var u,l,c,h,f,p,d=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=u,n=l;return u=l=void 0,d=t,h=e.apply(n,r)}function b(e){return d=e,f=setTimeout(_,t),m?y(e):h}function w(e){var r=e-p;return void 0===p||r>=t||r<0||g&&e-d>=c}function _(){var e=i();if(w(e))return C(e);f=setTimeout(_,function(e){var r=t-(e-p);return g?s(r,c-(e-d)):r}(e))}function C(e){return f=void 0,v&&u?y(e):(u=l=void 0,h)}function x(){var e=i(),r=w(e);if(u=arguments,l=this,p=e,r){if(void 0===f)return b(p);if(g)return clearTimeout(f),f=setTimeout(_,t),y(p)}return void 0===f&&(f=setTimeout(_,t)),h}return t=a(t)||0,n(r)&&(m=!!r.leading,c=(g="maxWait"in r)?o(a(r.maxWait)||0,t):c,v="trailing"in r?!!r.trailing:v),x.cancel=function(){void 0!==f&&clearTimeout(f),d=0,u=p=l=f=void 0},x.flush=function(){return void 0===f?h:C(i())},x}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,r)=>{var n=r(7786);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},6557:e=>{e.exports=function(e){return e}},5694:(e,t,r)=>{var n=r(9454),i=r(7005),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,r)=>{var n=r(3560),i=r(1780);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},9246:(e,t,r)=>{var n=r(8612),i=r(7005);e.exports=function(e){return i(e)&&n(e)}},4144:(e,t,r)=>{e=r.nmd(e);var n=r(5639),i=r(5062),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?n.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u},3560:(e,t,r)=>{var n=r(4239),i=r(3218);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6688:(e,t,r)=>{var n=r(5588),i=r(1717),a=r(1167),o=a&&a.isMap,s=o?i(o):n;e.exports=s},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8630:(e,t,r)=>{var n=r(4239),i=r(5924),a=r(7005),o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=u.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==c}},2928:(e,t,r)=>{var n=r(9221),i=r(1717),a=r(1167),o=a&&a.isSet,s=o?i(o):n;e.exports=s},3448:(e,t,r)=>{var n=r(4239),i=r(7005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},6719:(e,t,r)=>{var n=r(8749),i=r(1717),a=r(1167),o=a&&a.isTypedArray,s=o?i(o):n;e.exports=s},3674:(e,t,r)=>{var n=r(4636),i=r(280),a=r(8612);e.exports=function(e){return a(e)?n(e):i(e)}},1704:(e,t,r)=>{var n=r(4636),i=r(313),a=r(8612);e.exports=function(e){return a(e)?n(e,!0):i(e)}},6486:function(e,t,r){var n;e=r.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,h=9007199254740991,f=NaN,p=4294967295,d=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],m="[object Arguments]",g="[object Array]",v="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",_="[object GeneratorFunction]",C="[object Map]",x="[object Number]",S="[object Object]",I="[object Promise]",E="[object RegExp]",P="[object Set]",A="[object String]",O="[object Symbol]",R="[object WeakMap]",k="[object ArrayBuffer]",M="[object DataView]",T="[object Float32Array]",N="[object Float64Array]",D="[object Int8Array]",j="[object Int16Array]",B="[object Int32Array]",F="[object Uint8Array]",L="[object Uint8ClampedArray]",U="[object Uint16Array]",$="[object Uint32Array]",z=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,H=RegExp(W.source),K=RegExp(Y.source),q=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=RegExp(te.source),ne=/^\s+/,ie=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,we=/['\n\r\u2028\u2029\\]/g,_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="["+Se+"]",Ee="["+_e+"]",Pe="\\d+",Ae="["+Ce+"]",Oe="[^\\ud800-\\udfff"+Se+Pe+"\\u2700-\\u27bf"+Ce+xe+"]",Re="\\ud83c[\\udffb-\\udfff]",ke="[^\\ud800-\\udfff]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="["+xe+"]",De="(?:"+Ae+"|"+Oe+")",je="(?:"+Ne+"|"+Oe+")",Be="(?:['’](?:d|ll|m|re|s|t|ve))?",Fe="(?:['’](?:D|LL|M|RE|S|T|VE))?",Le="(?:"+Ee+"|"+Re+")?",Ue="[\\ufe0e\\ufe0f]?",$e=Ue+Le+"(?:\\u200d(?:"+[ke,Me,Te].join("|")+")"+Ue+Le+")*",ze="(?:"+["[\\u2700-\\u27bf]",Me,Te].join("|")+")"+$e,Ge="(?:"+[ke+Ee+"?",Ee,Me,Te,"[\\ud800-\\udfff]"].join("|")+")",Ve=RegExp("['’]","g"),We=RegExp(Ee,"g"),Ye=RegExp(Re+"(?="+Re+")|"+Ge+$e,"g"),He=RegExp([Ne+"?"+Ae+"+"+Be+"(?="+[Ie,Ne,"$"].join("|")+")",je+"+"+Fe+"(?="+[Ie,Ne+De,"$"].join("|")+")",Ne+"?"+De+"+"+Be,Ne+"+"+Fe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,ze].join("|"),"g"),Ke=RegExp("[\\u200d\\ud800-\\udfff"+_e+"\\ufe0e\\ufe0f]"),qe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qe=-1,Je={};Je[T]=Je[N]=Je[D]=Je[j]=Je[B]=Je[F]=Je[L]=Je[U]=Je[$]=!0,Je[m]=Je[g]=Je[k]=Je[v]=Je[M]=Je[y]=Je[b]=Je[w]=Je[C]=Je[x]=Je[S]=Je[E]=Je[P]=Je[A]=Je[R]=!1;var Ze={};Ze[m]=Ze[g]=Ze[k]=Ze[M]=Ze[v]=Ze[y]=Ze[T]=Ze[N]=Ze[D]=Ze[j]=Ze[B]=Ze[C]=Ze[x]=Ze[S]=Ze[E]=Ze[P]=Ze[A]=Ze[O]=Ze[F]=Ze[L]=Ze[U]=Ze[$]=!0,Ze[b]=Ze[w]=Ze[R]=!1;var et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tt=parseFloat,rt=parseInt,nt="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,it="object"==typeof self&&self&&self.Object===Object&&self,at=nt||it||Function("return this")(),ot=t&&!t.nodeType&&t,st=ot&&e&&!e.nodeType&&e,ut=st&&st.exports===ot,lt=ut&&nt.process,ct=function(){try{return st&&st.require&&st.require("util").types||lt&&lt.binding&&lt.binding("util")}catch(e){}}(),ht=ct&&ct.isArrayBuffer,ft=ct&&ct.isDate,pt=ct&&ct.isMap,dt=ct&&ct.isRegExp,mt=ct&&ct.isSet,gt=ct&&ct.isTypedArray;function vt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function yt(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}function bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function wt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function _t(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Ct(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function xt(e,t){return!(null==e||!e.length)&&Tt(e,t,0)>-1}function St(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function It(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Et(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Pt(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function At(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Ot(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Rt=Bt("length");function kt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Mt(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Tt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Mt(e,Dt,r)}function Nt(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function Dt(e){return e!=e}function jt(e,t){var r=null==e?0:e.length;return r?Ut(e,t)/r:f}function Bt(e){return function(t){return null==t?i:t[e]}}function Ft(e){return function(t){return null==e?i:e[t]}}function Lt(e,t,r,n,i){return i(e,(function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)})),r}function Ut(e,t){for(var r,n=-1,a=e.length;++n<a;){var o=t(e[n]);o!==i&&(r=r===i?o:r+o)}return r}function $t(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function zt(e){return e?e.slice(0,or(e)+1).replace(ne,""):e}function Gt(e){return function(t){return e(t)}}function Vt(e,t){return It(t,(function(t){return e[t]}))}function Wt(e,t){return e.has(t)}function Yt(e,t){for(var r=-1,n=e.length;++r<n&&Tt(t,e[r],0)>-1;);return r}function Ht(e,t){for(var r=e.length;r--&&Tt(t,e[r],0)>-1;);return r}function Kt(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var qt=Ft({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Xt=Ft({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qt(e){return"\\"+et[e]}function Jt(e){return Ke.test(e)}function Zt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function er(e,t){return function(r){return e(t(r))}}function tr(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==s||(e[r]=s,a[i++]=r)}return a}function rr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function nr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function ir(e){return Jt(e)?function(e){for(var t=Ye.lastIndex=0;Ye.test(e);)++t;return t}(e):Rt(e)}function ar(e){return Jt(e)?function(e){return e.match(Ye)||[]}(e):function(e){return e.split("")}(e)}function or(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var sr=Ft({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ur=function e(t){var r,n=(t=null==t?at:ur.defaults(at.Object(),t,ur.pick(at,Xe))).Array,ie=t.Date,_e=t.Error,Ce=t.Function,xe=t.Math,Se=t.Object,Ie=t.RegExp,Ee=t.String,Pe=t.TypeError,Ae=n.prototype,Oe=Ce.prototype,Re=Se.prototype,ke=t["__core-js_shared__"],Me=Oe.toString,Te=Re.hasOwnProperty,Ne=0,De=(r=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",je=Re.toString,Be=Me.call(Se),Fe=at._,Le=Ie("^"+Me.call(Te).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=ut?t.Buffer:i,$e=t.Symbol,ze=t.Uint8Array,Ge=Ue?Ue.allocUnsafe:i,Ye=er(Se.getPrototypeOf,Se),Ke=Se.create,et=Re.propertyIsEnumerable,nt=Ae.splice,it=$e?$e.isConcatSpreadable:i,ot=$e?$e.iterator:i,st=$e?$e.toStringTag:i,lt=function(){try{var e=la(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),ct=t.clearTimeout!==at.clearTimeout&&t.clearTimeout,Rt=ie&&ie.now!==at.Date.now&&ie.now,Ft=t.setTimeout!==at.setTimeout&&t.setTimeout,lr=xe.ceil,cr=xe.floor,hr=Se.getOwnPropertySymbols,fr=Ue?Ue.isBuffer:i,pr=t.isFinite,dr=Ae.join,mr=er(Se.keys,Se),gr=xe.max,vr=xe.min,yr=ie.now,br=t.parseInt,wr=xe.random,_r=Ae.reverse,Cr=la(t,"DataView"),xr=la(t,"Map"),Sr=la(t,"Promise"),Ir=la(t,"Set"),Er=la(t,"WeakMap"),Pr=la(Se,"create"),Ar=Er&&new Er,Or={},Rr=Fa(Cr),kr=Fa(xr),Mr=Fa(Sr),Tr=Fa(Ir),Nr=Fa(Er),Dr=$e?$e.prototype:i,jr=Dr?Dr.valueOf:i,Br=Dr?Dr.toString:i;function Fr(e){if(rs(e)&&!Wo(e)&&!(e instanceof zr)){if(e instanceof $r)return e;if(Te.call(e,"__wrapped__"))return La(e)}return new $r(e)}var Lr=function(){function e(){}return function(t){if(!ts(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function Ur(){}function $r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function zr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Yr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Wr;++t<r;)this.add(e[t])}function Hr(e){var t=this.__data__=new Vr(e);this.size=t.size}function Kr(e,t){var r=Wo(e),n=!r&&Vo(e),i=!r&&!n&&qo(e),a=!r&&!n&&!i&&cs(e),o=r||n||i||a,s=o?$t(e.length,Ee):[],u=s.length;for(var l in e)!t&&!Te.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ga(l,u))||s.push(l);return s}function qr(e){var t=e.length;return t?e[Yn(0,t-1)]:i}function Xr(e,t){return Ta(Pi(e),on(t,0,e.length))}function Qr(e){return Ta(Pi(e))}function Jr(e,t,r){(r!==i&&!$o(e[t],r)||r===i&&!(t in e))&&nn(e,t,r)}function Zr(e,t,r){var n=e[t];Te.call(e,t)&&$o(n,r)&&(r!==i||t in e)||nn(e,t,r)}function en(e,t){for(var r=e.length;r--;)if($o(e[r][0],t))return r;return-1}function tn(e,t,r,n){return hn(e,(function(e,i,a){t(n,e,r(e),a)})),n}function rn(e,t){return e&&Ai(t,Ms(t),e)}function nn(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function an(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Ps(e,t[r]);return o}function on(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function sn(e,t,r,n,a,o){var s,u=1&t,l=2&t,c=4&t;if(r&&(s=a?r(e,n,a,o):r(e)),s!==i)return s;if(!ts(e))return e;var h=Wo(e);if(h){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Te.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Pi(e,s)}else{var f=fa(e),p=f==w||f==_;if(qo(e))return _i(e,u);if(f==S||f==m||p&&!a){if(s=l||p?{}:da(e),!u)return l?function(e,t){return Ai(e,ha(e),t)}(e,function(e,t){return e&&Ai(t,Ts(t),e)}(s,e)):function(e,t){return Ai(e,ca(e),t)}(e,rn(s,e))}else{if(!Ze[f])return a?e:{};s=function(e,t,r){var n,i=e.constructor;switch(t){case k:return Ci(e);case v:case y:return new i(+e);case M:return function(e,t){var r=t?Ci(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case T:case N:case D:case j:case B:case F:case L:case U:case $:return xi(e,r);case C:return new i;case x:case A:return new i(e);case E:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case P:return new i;case O:return n=e,jr?Se(jr.call(n)):{}}}(e,f,u)}}o||(o=new Hr);var d=o.get(e);if(d)return d;o.set(e,s),ss(e)?e.forEach((function(n){s.add(sn(n,t,r,n,e,o))})):ns(e)&&e.forEach((function(n,i){s.set(i,sn(n,t,r,i,e,o))}));var g=h?i:(c?l?ra:ta:l?Ts:Ms)(e);return bt(g||e,(function(n,i){g&&(n=e[i=n]),Zr(s,i,sn(n,t,r,i,e,o))})),s}function un(e,t,r){var n=r.length;if(null==e)return!n;for(e=Se(e);n--;){var a=r[n],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function ln(e,t,r){if("function"!=typeof e)throw new Pe(a);return Oa((function(){e.apply(i,r)}),t)}function cn(e,t,r,n){var i=-1,a=xt,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;r&&(t=It(t,Gt(r))),n?(a=St,o=!1):t.length>=200&&(a=Wt,o=!1,t=new Yr(t));e:for(;++i<s;){var c=e[i],h=null==r?c:r(c);if(c=n||0!==c?c:0,o&&h==h){for(var f=l;f--;)if(t[f]===h)continue e;u.push(c)}else a(t,h,n)||u.push(c)}return u}Fr.templateSettings={escape:q,evaluate:X,interpolate:Q,variable:"",imports:{_:Fr}},Fr.prototype=Ur.prototype,Fr.prototype.constructor=Fr,$r.prototype=Lr(Ur.prototype),$r.prototype.constructor=$r,zr.prototype=Lr(Ur.prototype),zr.prototype.constructor=zr,Gr.prototype.clear=function(){this.__data__=Pr?Pr(null):{},this.size=0},Gr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gr.prototype.get=function(e){var t=this.__data__;if(Pr){var r=t[e];return r===o?i:r}return Te.call(t,e)?t[e]:i},Gr.prototype.has=function(e){var t=this.__data__;return Pr?t[e]!==i:Te.call(t,e)},Gr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Pr&&t===i?o:t,this},Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(e){var t=this.__data__,r=en(t,e);return!(r<0||(r==t.length-1?t.pop():nt.call(t,r,1),--this.size,0))},Vr.prototype.get=function(e){var t=this.__data__,r=en(t,e);return r<0?i:t[r][1]},Vr.prototype.has=function(e){return en(this.__data__,e)>-1},Vr.prototype.set=function(e,t){var r=this.__data__,n=en(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Wr.prototype.clear=function(){this.size=0,this.__data__={hash:new Gr,map:new(xr||Vr),string:new Gr}},Wr.prototype.delete=function(e){var t=sa(this,e).delete(e);return this.size-=t?1:0,t},Wr.prototype.get=function(e){return sa(this,e).get(e)},Wr.prototype.has=function(e){return sa(this,e).has(e)},Wr.prototype.set=function(e,t){var r=sa(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Yr.prototype.add=Yr.prototype.push=function(e){return this.__data__.set(e,o),this},Yr.prototype.has=function(e){return this.__data__.has(e)},Hr.prototype.clear=function(){this.__data__=new Vr,this.size=0},Hr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Hr.prototype.get=function(e){return this.__data__.get(e)},Hr.prototype.has=function(e){return this.__data__.has(e)},Hr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Vr){var n=r.__data__;if(!xr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Wr(n)}return r.set(e,t),this.size=r.size,this};var hn=ki(bn),fn=ki(wn,!0);function pn(e,t){var r=!0;return hn(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function dn(e,t,r){for(var n=-1,a=e.length;++n<a;){var o=e[n],s=t(o);if(null!=s&&(u===i?s==s&&!ls(s):r(s,u)))var u=s,l=o}return l}function mn(e,t){var r=[];return hn(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function gn(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=ma),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?gn(s,t-1,r,n,i):Et(i,s):n||(i[i.length]=s)}return i}var vn=Mi(),yn=Mi(!0);function bn(e,t){return e&&vn(e,t,Ms)}function wn(e,t){return e&&yn(e,t,Ms)}function _n(e,t){return Ct(t,(function(t){return Jo(e[t])}))}function Cn(e,t){for(var r=0,n=(t=vi(t,e)).length;null!=e&&r<n;)e=e[Ba(t[r++])];return r&&r==n?e:i}function xn(e,t,r){var n=t(e);return Wo(e)?n:Et(n,r(e))}function Sn(e){return null==e?e===i?"[object Undefined]":"[object Null]":st&&st in Se(e)?function(e){var t=Te.call(e,st),r=e[st];try{e[st]=i;var n=!0}catch(e){}var a=je.call(e);return n&&(t?e[st]=r:delete e[st]),a}(e):function(e){return je.call(e)}(e)}function In(e,t){return e>t}function En(e,t){return null!=e&&Te.call(e,t)}function Pn(e,t){return null!=e&&t in Se(e)}function An(e,t,r){for(var a=r?St:xt,o=e[0].length,s=e.length,u=s,l=n(s),c=1/0,h=[];u--;){var f=e[u];u&&t&&(f=It(f,Gt(t))),c=vr(f.length,c),l[u]=!r&&(t||o>=120&&f.length>=120)?new Yr(u&&f):i}f=e[0];var p=-1,d=l[0];e:for(;++p<o&&h.length<c;){var m=f[p],g=t?t(m):m;if(m=r||0!==m?m:0,!(d?Wt(d,g):a(h,g,r))){for(u=s;--u;){var v=l[u];if(!(v?Wt(v,g):a(e[u],g,r)))continue e}d&&d.push(g),h.push(m)}}return h}function On(e,t,r){var n=null==(e=Ia(e,t=vi(t,e)))?e:e[Ba(Xa(t))];return null==n?i:vt(n,e,r)}function Rn(e){return rs(e)&&Sn(e)==m}function kn(e,t,r,n,a){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!=e&&t!=t:function(e,t,r,n,a,o){var s=Wo(e),u=Wo(t),l=s?g:fa(e),c=u?g:fa(t),h=(l=l==m?S:l)==S,f=(c=c==m?S:c)==S,p=l==c;if(p&&qo(e)){if(!qo(t))return!1;s=!0,h=!1}if(p&&!h)return o||(o=new Hr),s||cs(e)?Zi(e,t,r,n,a,o):function(e,t,r,n,i,a,o){switch(r){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!a(new ze(e),new ze(t)));case v:case y:case x:return $o(+e,+t);case b:return e.name==t.name&&e.message==t.message;case E:case A:return e==t+"";case C:var s=Zt;case P:var u=1&n;if(s||(s=rr),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var c=Zi(s(e),s(t),n,i,a,o);return o.delete(e),c;case O:if(jr)return jr.call(e)==jr.call(t)}return!1}(e,t,l,r,n,a,o);if(!(1&r)){var d=h&&Te.call(e,"__wrapped__"),w=f&&Te.call(t,"__wrapped__");if(d||w){var _=d?e.value():e,I=w?t.value():t;return o||(o=new Hr),a(_,I,r,n,o)}}return!!p&&(o||(o=new Hr),function(e,t,r,n,a,o){var s=1&r,u=ta(e),l=u.length;if(l!=ta(t).length&&!s)return!1;for(var c=l;c--;){var h=u[c];if(!(s?h in t:Te.call(t,h)))return!1}var f=o.get(e),p=o.get(t);if(f&&p)return f==t&&p==e;var d=!0;o.set(e,t),o.set(t,e);for(var m=s;++c<l;){var g=e[h=u[c]],v=t[h];if(n)var y=s?n(v,g,h,t,e,o):n(g,v,h,e,t,o);if(!(y===i?g===v||a(g,v,r,n,o):y)){d=!1;break}m||(m="constructor"==h)}if(d&&!m){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,r,n,a,o))}(e,t,r,n,kn,a))}function Mn(e,t,r,n){var a=r.length,o=a,s=!n;if(null==e)return!o;for(e=Se(e);a--;){var u=r[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var l=(u=r[a])[0],c=e[l],h=u[1];if(s&&u[2]){if(c===i&&!(l in e))return!1}else{var f=new Hr;if(n)var p=n(c,h,l,e,t,f);if(!(p===i?kn(h,c,3,n,f):p))return!1}}return!0}function Tn(e){return!(!ts(e)||(t=e,De&&De in t))&&(Jo(e)?Le:me).test(Fa(e));var t}function Nn(e){return"function"==typeof e?e:null==e?iu:"object"==typeof e?Wo(e)?Ln(e[0],e[1]):Fn(e):pu(e)}function Dn(e){if(!_a(e))return mr(e);var t=[];for(var r in Se(e))Te.call(e,r)&&"constructor"!=r&&t.push(r);return t}function jn(e,t){return e<t}function Bn(e,t){var r=-1,i=Ho(e)?n(e.length):[];return hn(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Fn(e){var t=ua(e);return 1==t.length&&t[0][2]?xa(t[0][0],t[0][1]):function(r){return r===e||Mn(r,e,t)}}function Ln(e,t){return ya(e)&&Ca(t)?xa(Ba(e),t):function(r){var n=Ps(r,e);return n===i&&n===t?As(r,e):kn(t,n,3)}}function Un(e,t,r,n,a){e!==t&&vn(t,(function(o,s){if(a||(a=new Hr),ts(o))!function(e,t,r,n,a,o,s){var u=Pa(e,r),l=Pa(t,r),c=s.get(l);if(c)Jr(e,r,c);else{var h=o?o(u,l,r+"",e,t,s):i,f=h===i;if(f){var p=Wo(l),d=!p&&qo(l),m=!p&&!d&&cs(l);h=l,p||d||m?Wo(u)?h=u:Ko(u)?h=Pi(u):d?(f=!1,h=_i(l,!0)):m?(f=!1,h=xi(l,!0)):h=[]:as(l)||Vo(l)?(h=u,Vo(u)?h=ys(u):ts(u)&&!Jo(u)||(h=da(l))):f=!1}f&&(s.set(l,h),a(h,l,n,o,s),s.delete(l)),Jr(e,r,h)}}(e,t,s,r,Un,n,a);else{var u=n?n(Pa(e,s),o,s+"",e,t,a):i;u===i&&(u=o),Jr(e,s,u)}}),Ts)}function $n(e,t){var r=e.length;if(r)return ga(t+=t<0?r:0,r)?e[t]:i}function zn(e,t,r){t=t.length?It(t,(function(e){return Wo(e)?function(t){return Cn(t,1===e.length?e[0]:e)}:e})):[iu];var n=-1;t=It(t,Gt(oa()));var i=Bn(e,(function(e,r,i){var a=It(t,(function(t){return t(e)}));return{criteria:a,index:++n,value:e}}));return function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var u=Si(i[n],a[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}));n--;)e[n]=e[n].value;return e}(i)}function Gn(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=Cn(e,o);r(s,o)&&Qn(a,vi(o,e),s)}return a}function Vn(e,t,r,n){var i=n?Nt:Tt,a=-1,o=t.length,s=e;for(e===t&&(t=Pi(t)),r&&(s=It(e,Gt(r)));++a<o;)for(var u=0,l=t[a],c=r?r(l):l;(u=i(s,c,u,n))>-1;)s!==e&&nt.call(s,u,1),nt.call(e,u,1);return e}function Wn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;ga(i)?nt.call(e,i,1):li(e,i)}}return e}function Yn(e,t){return e+cr(wr()*(t-e+1))}function Hn(e,t){var r="";if(!e||t<1||t>h)return r;do{t%2&&(r+=e),(t=cr(t/2))&&(e+=e)}while(t);return r}function Kn(e,t){return Ra(Sa(e,t,iu),e+"")}function qn(e){return qr($s(e))}function Xn(e,t){var r=$s(e);return Ta(r,on(t,0,r.length))}function Qn(e,t,r,n){if(!ts(e))return e;for(var a=-1,o=(t=vi(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var l=Ba(t[a]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(a!=s){var h=u[l];(c=n?n(h,l,u):i)===i&&(c=ts(h)?h:ga(t[a+1])?[]:{})}Zr(u,l,c),u=u[l]}return e}var Jn=Ar?function(e,t){return Ar.set(e,t),e}:iu,Zn=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:tu(t),writable:!0})}:iu;function ei(e){return Ta($s(e))}function ti(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ri(e,t){var r;return hn(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ni(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var a=n+i>>>1,o=e[a];null!==o&&!ls(o)&&(r?o<=t:o<t)?n=a+1:i=a}return i}return ii(e,t,iu,r)}function ii(e,t,r,n){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=r(t))!=t,u=null===t,l=ls(t),c=t===i;a<o;){var h=cr((a+o)/2),f=r(e[h]),p=f!==i,d=null===f,m=f==f,g=ls(f);if(s)var v=n||m;else v=c?m&&(n||p):u?m&&p&&(n||!d):l?m&&p&&!d&&(n||!g):!d&&!g&&(n?f<=t:f<t);v?a=h+1:o=h}return vr(o,4294967294)}function ai(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!$o(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function oi(e){return"number"==typeof e?e:ls(e)?f:+e}function si(e){if("string"==typeof e)return e;if(Wo(e))return It(e,si)+"";if(ls(e))return Br?Br.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,r){var n=-1,i=xt,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=St;else if(a>=200){var l=t?null:Hi(e);if(l)return rr(l);o=!1,i=Wt,u=new Yr}else u=t?[]:s;e:for(;++n<a;){var c=e[n],h=t?t(c):c;if(c=r||0!==c?c:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(c)}else i(u,h,r)||(u!==s&&u.push(h),s.push(c))}return s}function li(e,t){return null==(e=Ia(e,t=vi(t,e)))||delete e[Ba(Xa(t))]}function ci(e,t,r,n){return Qn(e,t,r(Cn(e,t)),n)}function hi(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?ti(e,n?0:a,n?a+1:i):ti(e,n?a+1:0,n?i:a)}function fi(e,t){var r=e;return r instanceof zr&&(r=r.value()),Pt(t,(function(e,t){return t.func.apply(t.thisArg,Et([e],t.args))}),r)}function pi(e,t,r){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=cn(o[a]||s,e[u],t,r));return ui(gn(o,1),t,r)}function di(e,t,r){for(var n=-1,a=e.length,o=t.length,s={};++n<a;){var u=n<o?t[n]:i;r(s,e[n],u)}return s}function mi(e){return Ko(e)?e:[]}function gi(e){return"function"==typeof e?e:iu}function vi(e,t){return Wo(e)?e:ya(e,t)?[e]:ja(bs(e))}var yi=Kn;function bi(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:ti(e,t,r)}var wi=ct||function(e){return at.clearTimeout(e)};function _i(e,t){if(t)return e.slice();var r=e.length,n=Ge?Ge(r):new e.constructor(r);return e.copy(n),n}function Ci(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function xi(e,t){var r=t?Ci(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var r=e!==i,n=null===e,a=e==e,o=ls(e),s=t!==i,u=null===t,l=t==t,c=ls(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||n&&s&&l||!r&&l||!a)return 1;if(!n&&!o&&!c&&e<t||c&&r&&a&&!n&&!o||u&&r&&a||!s&&a||!l)return-1}return 0}function Ii(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,l=t.length,c=gr(o-s,0),h=n(l+c),f=!i;++u<l;)h[u]=t[u];for(;++a<s;)(f||a<o)&&(h[r[a]]=e[a]);for(;c--;)h[u++]=e[a++];return h}function Ei(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,l=-1,c=t.length,h=gr(o-u,0),f=n(h+c),p=!i;++a<h;)f[a]=e[a];for(var d=a;++l<c;)f[d+l]=t[l];for(;++s<u;)(p||a<o)&&(f[d+r[s]]=e[a++]);return f}function Pi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ai(e,t,r,n){var a=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=n?n(r[u],e[u],u,r,e):i;l===i&&(l=e[u]),a?nn(r,u,l):Zr(r,u,l)}return r}function Oi(e,t){return function(r,n){var i=Wo(r)?yt:tn,a=t?t():{};return i(r,e,oa(n,2),a)}}function Ri(e){return Kn((function(t,r){var n=-1,a=r.length,o=a>1?r[a-1]:i,s=a>2?r[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&va(r[0],r[1],s)&&(o=a<3?i:o,a=1),t=Se(t);++n<a;){var u=r[n];u&&e(t,u,n,o)}return t}))}function ki(e,t){return function(r,n){if(null==r)return r;if(!Ho(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Se(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function Mi(e){return function(t,r,n){for(var i=-1,a=Se(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===r(a[u],u,a))break}return t}}function Ti(e){return function(t){var r=Jt(t=bs(t))?ar(t):i,n=r?r[0]:t.charAt(0),a=r?bi(r,1).join(""):t.slice(1);return n[e]()+a}}function Ni(e){return function(t){return Pt(Js(Vs(t).replace(Ve,"")),e,"")}}function Di(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Lr(e.prototype),n=e.apply(r,t);return ts(n)?n:r}}function ji(e){return function(t,r,n){var a=Se(t);if(!Ho(t)){var o=oa(r,3);t=Ms(t),r=function(e){return o(a[e],e,a)}}var s=e(t,r,n);return s>-1?a[o?t[s]:s]:i}}function Bi(e){return ea((function(t){var r=t.length,n=r,o=$r.prototype.thru;for(e&&t.reverse();n--;){var s=t[n];if("function"!=typeof s)throw new Pe(a);if(o&&!u&&"wrapper"==ia(s))var u=new $r([],!0)}for(n=u?n:r;++n<r;){var l=ia(s=t[n]),c="wrapper"==l?na(s):i;u=c&&ba(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ia(c[0])].apply(u,c[3]):1==s.length&&ba(s)?u[l]():u.thru(s)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&Wo(n))return u.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}}))}function Fi(e,t,r,a,o,s,u,c,h,f){var p=t&l,d=1&t,m=2&t,g=24&t,v=512&t,y=m?i:Di(e);return function i(){for(var l=arguments.length,b=n(l),w=l;w--;)b[w]=arguments[w];if(g)var _=aa(i),C=Kt(b,_);if(a&&(b=Ii(b,a,o,g)),s&&(b=Ei(b,s,u,g)),l-=C,g&&l<f){var x=tr(b,_);return Wi(e,t,Fi,i.placeholder,r,b,x,c,h,f-l)}var S=d?r:this,I=m?S[e]:e;return l=b.length,c?b=Ea(b,c):v&&l>1&&b.reverse(),p&&h<l&&(b.length=h),this&&this!==at&&this instanceof i&&(I=y||Di(I)),I.apply(S,b)}}function Li(e,t){return function(r,n){return function(e,t,r,n){return bn(e,(function(e,i,a){t(n,r(e),i,a)})),n}(r,e,t(n),{})}}function Ui(e,t){return function(r,n){var a;if(r===i&&n===i)return t;if(r!==i&&(a=r),n!==i){if(a===i)return n;"string"==typeof r||"string"==typeof n?(r=si(r),n=si(n)):(r=oi(r),n=oi(n)),a=e(r,n)}return a}}function $i(e){return ea((function(t){return t=It(t,Gt(oa())),Kn((function(r){var n=this;return e(t,(function(e){return vt(e,n,r)}))}))}))}function zi(e,t){var r=(t=t===i?" ":si(t)).length;if(r<2)return r?Hn(t,e):t;var n=Hn(t,lr(e/ir(t)));return Jt(t)?bi(ar(n),0,e).join(""):n.slice(0,e)}function Gi(e){return function(t,r,a){return a&&"number"!=typeof a&&va(t,r,a)&&(r=a=i),t=ds(t),r===i?(r=t,t=0):r=ds(r),function(e,t,r,i){for(var a=-1,o=gr(lr((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:ds(a),e)}}function Vi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=vs(t),r=vs(r)),e(t,r)}}function Wi(e,t,r,n,a,o,s,l,c,h){var f=8&t;t|=f?u:64,4&(t&=~(f?64:u))||(t&=-4);var p=[e,t,a,f?o:i,f?s:i,f?i:o,f?i:s,l,c,h],d=r.apply(i,p);return ba(e)&&Aa(d,p),d.placeholder=n,ka(d,e,t)}function Yi(e){var t=xe[e];return function(e,r){if(e=vs(e),(r=null==r?0:vr(ms(r),292))&&pr(e)){var n=(bs(e)+"e").split("e");return+((n=(bs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Hi=Ir&&1/rr(new Ir([,-0]))[1]==c?function(e){return new Ir(e)}:lu;function Ki(e){return function(t){var r=fa(t);return r==C?Zt(t):r==P?nr(t):function(e,t){return It(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qi(e,t,r,o,c,h,f,p){var d=2&t;if(!d&&"function"!=typeof e)throw new Pe(a);var m=o?o.length:0;if(m||(t&=-97,o=c=i),f=f===i?f:gr(ms(f),0),p=p===i?p:ms(p),m-=c?c.length:0,64&t){var g=o,v=c;o=c=i}var y=d?i:na(e),b=[e,t,r,o,c,g,v,h,f,p];if(y&&function(e,t){var r=e[1],n=t[1],i=r|n,a=i<131,o=n==l&&8==r||n==l&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!a&&!o)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ii(c,u,t[4]):u,e[4]=c?tr(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ei(c,u,t[6]):u,e[6]=c?tr(e[5],s):t[6]),(u=t[7])&&(e[7]=u),n&l&&(e[8]=null==e[8]?t[8]:vr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,y),e=b[0],t=b[1],r=b[2],o=b[3],c=b[4],!(p=b[9]=b[9]===i?d?0:e.length:gr(b[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||16==t?function(e,t,r){var a=Di(e);return function o(){for(var s=arguments.length,u=n(s),l=s,c=aa(o);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:tr(u,c);return(s-=h.length)<r?Wi(e,t,Fi,o.placeholder,i,u,h,i,i,r-s):vt(this&&this!==at&&this instanceof o?a:e,this,u)}}(e,t,p):t!=u&&33!=t||c.length?Fi.apply(i,b):function(e,t,r,i){var a=1&t,o=Di(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=n(c+u),f=this&&this!==at&&this instanceof t?o:e;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return vt(f,a?r:this,h)}}(e,t,r,o);else var w=function(e,t,r){var n=1&t,i=Di(e);return function t(){return(this&&this!==at&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return ka((y?Jn:Aa)(w,b),e,t)}function Xi(e,t,r,n){return e===i||$o(e,Re[r])&&!Te.call(n,r)?t:e}function Qi(e,t,r,n,a,o){return ts(e)&&ts(t)&&(o.set(t,e),Un(e,t,i,Qi,o),o.delete(t)),e}function Ji(e){return as(e)?i:e}function Zi(e,t,r,n,a,o){var s=1&r,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e),h=o.get(t);if(c&&h)return c==t&&h==e;var f=-1,p=!0,d=2&r?new Yr:i;for(o.set(e,t),o.set(t,e);++f<u;){var m=e[f],g=t[f];if(n)var v=s?n(g,m,f,t,e,o):n(m,g,f,e,t,o);if(v!==i){if(v)continue;p=!1;break}if(d){if(!Ot(t,(function(e,t){if(!Wt(d,t)&&(m===e||a(m,e,r,n,o)))return d.push(t)}))){p=!1;break}}else if(m!==g&&!a(m,g,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ea(e){return Ra(Sa(e,i,Wa),e+"")}function ta(e){return xn(e,Ms,ca)}function ra(e){return xn(e,Ts,ha)}var na=Ar?function(e){return Ar.get(e)}:lu;function ia(e){for(var t=e.name+"",r=Or[t],n=Te.call(Or,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function aa(e){return(Te.call(Fr,"placeholder")?Fr:e).placeholder}function oa(){var e=Fr.iteratee||au;return e=e===au?Nn:e,arguments.length?e(arguments[0],arguments[1]):e}function sa(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ua(e){for(var t=Ms(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ca(i)]}return t}function la(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return Tn(r)?r:i}var ca=hr?function(e){return null==e?[]:(e=Se(e),Ct(hr(e),(function(t){return et.call(e,t)})))}:gu,ha=hr?function(e){for(var t=[];e;)Et(t,ca(e)),e=Ye(e);return t}:gu,fa=Sn;function pa(e,t,r){for(var n=-1,i=(t=vi(t,e)).length,a=!1;++n<i;){var o=Ba(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&es(i)&&ga(o,i)&&(Wo(e)||Vo(e))}function da(e){return"function"!=typeof e.constructor||_a(e)?{}:Lr(Ye(e))}function ma(e){return Wo(e)||Vo(e)||!!(it&&e&&e[it])}function ga(e,t){var r=typeof e;return!!(t=null==t?h:t)&&("number"==r||"symbol"!=r&&ve.test(e))&&e>-1&&e%1==0&&e<t}function va(e,t,r){if(!ts(r))return!1;var n=typeof t;return!!("number"==n?Ho(r)&&ga(t,r.length):"string"==n&&t in r)&&$o(r[t],e)}function ya(e,t){if(Wo(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ls(e))||Z.test(e)||!J.test(e)||null!=t&&e in Se(t)}function ba(e){var t=ia(e),r=Fr[t];if("function"!=typeof r||!(t in zr.prototype))return!1;if(e===r)return!0;var n=na(r);return!!n&&e===n[0]}(Cr&&fa(new Cr(new ArrayBuffer(1)))!=M||xr&&fa(new xr)!=C||Sr&&fa(Sr.resolve())!=I||Ir&&fa(new Ir)!=P||Er&&fa(new Er)!=R)&&(fa=function(e){var t=Sn(e),r=t==S?e.constructor:i,n=r?Fa(r):"";if(n)switch(n){case Rr:return M;case kr:return C;case Mr:return I;case Tr:return P;case Nr:return R}return t});var wa=ke?Jo:vu;function _a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function Ca(e){return e==e&&!ts(e)}function xa(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in Se(r))}}function Sa(e,t,r){return t=gr(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=gr(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),vt(e,this,u)}}function Ia(e,t){return t.length<2?e:Cn(e,ti(t,0,-1))}function Ea(e,t){for(var r=e.length,n=vr(t.length,r),a=Pi(e);n--;){var o=t[n];e[n]=ga(o,r)?a[o]:i}return e}function Pa(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Aa=Ma(Jn),Oa=Ft||function(e,t){return at.setTimeout(e,t)},Ra=Ma(Zn);function ka(e,t,r){var n=t+"";return Ra(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ae,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return bt(d,(function(r){var n="_."+r[0];t&r[1]&&!xt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(se):[]}(n),r)))}function Ma(e){var t=0,r=0;return function(){var n=yr(),a=16-(n-r);if(r=n,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ta(e,t){var r=-1,n=e.length,a=n-1;for(t=t===i?n:t;++r<t;){var o=Yn(r,a),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e}var Na,Da,ja=(Na=Do((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,r,n,i){t.push(n?i.replace(ce,"$1"):r||e)})),t}),(function(e){return 500===Da.size&&Da.clear(),e})),Da=Na.cache,Na);function Ba(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fa(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function La(e){if(e instanceof zr)return e.clone();var t=new $r(e.__wrapped__,e.__chain__);return t.__actions__=Pi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ua=Kn((function(e,t){return Ko(e)?cn(e,gn(t,1,Ko,!0)):[]})),$a=Kn((function(e,t){var r=Xa(t);return Ko(r)&&(r=i),Ko(e)?cn(e,gn(t,1,Ko,!0),oa(r,2)):[]})),za=Kn((function(e,t){var r=Xa(t);return Ko(r)&&(r=i),Ko(e)?cn(e,gn(t,1,Ko,!0),i,r):[]}));function Ga(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ms(r);return i<0&&(i=gr(n+i,0)),Mt(e,oa(t,3),i)}function Va(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=n-1;return r!==i&&(a=ms(r),a=r<0?gr(n+a,0):vr(a,n-1)),Mt(e,oa(t,3),a,!0)}function Wa(e){return null!=e&&e.length?gn(e,1):[]}function Ya(e){return e&&e.length?e[0]:i}var Ha=Kn((function(e){var t=It(e,mi);return t.length&&t[0]===e[0]?An(t):[]})),Ka=Kn((function(e){var t=Xa(e),r=It(e,mi);return t===Xa(r)?t=i:r.pop(),r.length&&r[0]===e[0]?An(r,oa(t,2)):[]})),qa=Kn((function(e){var t=Xa(e),r=It(e,mi);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?An(r,i,t):[]}));function Xa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qa=Kn(Ja);function Ja(e,t){return e&&e.length&&t&&t.length?Vn(e,t):e}var Za=ea((function(e,t){var r=null==e?0:e.length,n=an(e,t);return Wn(e,It(t,(function(e){return ga(e,r)?+e:e})).sort(Si)),n}));function eo(e){return null==e?e:_r.call(e)}var to=Kn((function(e){return ui(gn(e,1,Ko,!0))})),ro=Kn((function(e){var t=Xa(e);return Ko(t)&&(t=i),ui(gn(e,1,Ko,!0),oa(t,2))})),no=Kn((function(e){var t=Xa(e);return t="function"==typeof t?t:i,ui(gn(e,1,Ko,!0),i,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=Ct(e,(function(e){if(Ko(e))return t=gr(e.length,t),!0})),$t(t,(function(t){return It(e,Bt(t))}))}function ao(e,t){if(!e||!e.length)return[];var r=io(e);return null==t?r:It(r,(function(e){return vt(t,i,e)}))}var oo=Kn((function(e,t){return Ko(e)?cn(e,t):[]})),so=Kn((function(e){return pi(Ct(e,Ko))})),uo=Kn((function(e){var t=Xa(e);return Ko(t)&&(t=i),pi(Ct(e,Ko),oa(t,2))})),lo=Kn((function(e){var t=Xa(e);return t="function"==typeof t?t:i,pi(Ct(e,Ko),i,t)})),co=Kn(io),ho=Kn((function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,ao(e,r)}));function fo(e){var t=Fr(e);return t.__chain__=!0,t}function po(e,t){return t(e)}var mo=ea((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,a=function(t){return an(t,e)};return!(t>1||this.__actions__.length)&&n instanceof zr&&ga(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:po,args:[a],thisArg:i}),new $r(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)})),go=Oi((function(e,t,r){Te.call(e,r)?++e[r]:nn(e,r,1)})),vo=ji(Ga),yo=ji(Va);function bo(e,t){return(Wo(e)?bt:hn)(e,oa(t,3))}function wo(e,t){return(Wo(e)?wt:fn)(e,oa(t,3))}var _o=Oi((function(e,t,r){Te.call(e,r)?e[r].push(t):nn(e,r,[t])})),Co=Kn((function(e,t,r){var i=-1,a="function"==typeof t,o=Ho(e)?n(e.length):[];return hn(e,(function(e){o[++i]=a?vt(t,e,r):On(e,t,r)})),o})),xo=Oi((function(e,t,r){nn(e,r,t)}));function So(e,t){return(Wo(e)?It:Bn)(e,oa(t,3))}var Io=Oi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Eo=Kn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&va(e,t[0],t[1])?t=[]:r>2&&va(t[0],t[1],t[2])&&(t=[t[0]]),zn(e,gn(t,1),[])})),Po=Rt||function(){return at.Date.now()};function Ao(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,qi(e,l,i,i,i,i,t)}function Oo(e,t){var r;if("function"!=typeof t)throw new Pe(a);return e=ms(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var Ro=Kn((function(e,t,r){var n=1;if(r.length){var i=tr(r,aa(Ro));n|=u}return qi(e,n,t,r,i)})),ko=Kn((function(e,t,r){var n=3;if(r.length){var i=tr(r,aa(ko));n|=u}return qi(t,n,e,r,i)}));function Mo(e,t,r){var n,o,s,u,l,c,h=0,f=!1,p=!1,d=!0;if("function"!=typeof e)throw new Pe(a);function m(t){var r=n,a=o;return n=o=i,h=t,u=e.apply(a,r)}function g(e){return h=e,l=Oa(y,t),f?m(e):u}function v(e){var r=e-c;return c===i||r>=t||r<0||p&&e-h>=s}function y(){var e=Po();if(v(e))return b(e);l=Oa(y,function(e){var r=t-(e-c);return p?vr(r,s-(e-h)):r}(e))}function b(e){return l=i,d&&n?m(e):(n=o=i,u)}function w(){var e=Po(),r=v(e);if(n=arguments,o=this,c=e,r){if(l===i)return g(c);if(p)return wi(l),l=Oa(y,t),m(c)}return l===i&&(l=Oa(y,t)),u}return t=vs(t)||0,ts(r)&&(f=!!r.leading,s=(p="maxWait"in r)?gr(vs(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d),w.cancel=function(){l!==i&&wi(l),h=0,n=c=o=l=i},w.flush=function(){return l===i?u:b(Po())},w}var To=Kn((function(e,t){return ln(e,1,t)})),No=Kn((function(e,t,r){return ln(e,vs(t)||0,r)}));function Do(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(a);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Do.Cache||Wr),r}function jo(e){if("function"!=typeof e)throw new Pe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Do.Cache=Wr;var Bo=yi((function(e,t){var r=(t=1==t.length&&Wo(t[0])?It(t[0],Gt(oa())):It(gn(t,1),Gt(oa()))).length;return Kn((function(n){for(var i=-1,a=vr(n.length,r);++i<a;)n[i]=t[i].call(this,n[i]);return vt(e,this,n)}))})),Fo=Kn((function(e,t){var r=tr(t,aa(Fo));return qi(e,u,i,t,r)})),Lo=Kn((function(e,t){var r=tr(t,aa(Lo));return qi(e,64,i,t,r)})),Uo=ea((function(e,t){return qi(e,256,i,i,i,t)}));function $o(e,t){return e===t||e!=e&&t!=t}var zo=Vi(In),Go=Vi((function(e,t){return e>=t})),Vo=Rn(function(){return arguments}())?Rn:function(e){return rs(e)&&Te.call(e,"callee")&&!et.call(e,"callee")},Wo=n.isArray,Yo=ht?Gt(ht):function(e){return rs(e)&&Sn(e)==k};function Ho(e){return null!=e&&es(e.length)&&!Jo(e)}function Ko(e){return rs(e)&&Ho(e)}var qo=fr||vu,Xo=ft?Gt(ft):function(e){return rs(e)&&Sn(e)==y};function Qo(e){if(!rs(e))return!1;var t=Sn(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Jo(e){if(!ts(e))return!1;var t=Sn(e);return t==w||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zo(e){return"number"==typeof e&&e==ms(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var ns=pt?Gt(pt):function(e){return rs(e)&&fa(e)==C};function is(e){return"number"==typeof e||rs(e)&&Sn(e)==x}function as(e){if(!rs(e)||Sn(e)!=S)return!1;var t=Ye(e);if(null===t)return!0;var r=Te.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Me.call(r)==Be}var os=dt?Gt(dt):function(e){return rs(e)&&Sn(e)==E},ss=mt?Gt(mt):function(e){return rs(e)&&fa(e)==P};function us(e){return"string"==typeof e||!Wo(e)&&rs(e)&&Sn(e)==A}function ls(e){return"symbol"==typeof e||rs(e)&&Sn(e)==O}var cs=gt?Gt(gt):function(e){return rs(e)&&es(e.length)&&!!Je[Sn(e)]},hs=Vi(jn),fs=Vi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ho(e))return us(e)?ar(e):Pi(e);if(ot&&e[ot])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[ot]());var t=fa(e);return(t==C?Zt:t==P?rr:$s)(e)}function ds(e){return e?(e=vs(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=ds(e),r=t%1;return t==t?r?t-r:t:0}function gs(e){return e?on(ms(e),0,p):0}function vs(e){if("number"==typeof e)return e;if(ls(e))return f;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var r=de.test(e);return r||ge.test(e)?rt(e.slice(2),r?2:8):pe.test(e)?f:+e}function ys(e){return Ai(e,Ts(e))}function bs(e){return null==e?"":si(e)}var ws=Ri((function(e,t){if(_a(t)||Ho(t))Ai(t,Ms(t),e);else for(var r in t)Te.call(t,r)&&Zr(e,r,t[r])})),_s=Ri((function(e,t){Ai(t,Ts(t),e)})),Cs=Ri((function(e,t,r,n){Ai(t,Ts(t),e,n)})),xs=Ri((function(e,t,r,n){Ai(t,Ms(t),e,n)})),Ss=ea(an),Is=Kn((function(e,t){e=Se(e);var r=-1,n=t.length,a=n>2?t[2]:i;for(a&&va(t[0],t[1],a)&&(n=1);++r<n;)for(var o=t[r],s=Ts(o),u=-1,l=s.length;++u<l;){var c=s[u],h=e[c];(h===i||$o(h,Re[c])&&!Te.call(e,c))&&(e[c]=o[c])}return e})),Es=Kn((function(e){return e.push(i,Qi),vt(Ds,i,e)}));function Ps(e,t,r){var n=null==e?i:Cn(e,t);return n===i?r:n}function As(e,t){return null!=e&&pa(e,t,Pn)}var Os=Li((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=r}),tu(iu)),Rs=Li((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Te.call(e,t)?e[t].push(r):e[t]=[r]}),oa),ks=Kn(On);function Ms(e){return Ho(e)?Kr(e):Dn(e)}function Ts(e){return Ho(e)?Kr(e,!0):function(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var r in Se(e))t.push(r);return t}(e);var t=_a(e),r=[];for(var n in e)("constructor"!=n||!t&&Te.call(e,n))&&r.push(n);return r}(e)}var Ns=Ri((function(e,t,r){Un(e,t,r)})),Ds=Ri((function(e,t,r,n){Un(e,t,r,n)})),js=ea((function(e,t){var r={};if(null==e)return r;var n=!1;t=It(t,(function(t){return t=vi(t,e),n||(n=t.length>1),t})),Ai(e,ra(e),r),n&&(r=sn(r,7,Ji));for(var i=t.length;i--;)li(r,t[i]);return r})),Bs=ea((function(e,t){return null==e?{}:function(e,t){return Gn(e,t,(function(t,r){return As(e,r)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var r=It(ra(e),(function(e){return[e]}));return t=oa(t),Gn(e,r,(function(e,r){return t(e,r[0])}))}var Ls=Ki(Ms),Us=Ki(Ts);function $s(e){return null==e?[]:Vt(e,Ms(e))}var zs=Ni((function(e,t,r){return t=t.toLowerCase(),e+(r?Gs(t):t)}));function Gs(e){return Qs(bs(e).toLowerCase())}function Vs(e){return(e=bs(e))&&e.replace(ye,qt).replace(We,"")}var Ws=Ni((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Ys=Ni((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Hs=Ti("toLowerCase"),Ks=Ni((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),qs=Ni((function(e,t,r){return e+(r?" ":"")+Qs(t)})),Xs=Ni((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Qs=Ti("toUpperCase");function Js(e,t,r){return e=bs(e),(t=r?i:t)===i?function(e){return qe.test(e)}(e)?function(e){return e.match(He)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Zs=Kn((function(e,t){try{return vt(e,i,t)}catch(e){return Qo(e)?e:new _e(e)}})),eu=ea((function(e,t){return bt(t,(function(t){t=Ba(t),nn(e,t,Ro(e[t],e))})),e}));function tu(e){return function(){return e}}var ru=Bi(),nu=Bi(!0);function iu(e){return e}function au(e){return Nn("function"==typeof e?e:sn(e,1))}var ou=Kn((function(e,t){return function(r){return On(r,e,t)}})),su=Kn((function(e,t){return function(r){return On(e,r,t)}}));function uu(e,t,r){var n=Ms(t),i=_n(t,n);null!=r||ts(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=_n(t,Ms(t)));var a=!(ts(r)&&"chain"in r&&!r.chain),o=Jo(e);return bt(i,(function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__),i=r.__actions__=Pi(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Et([this.value()],arguments))})})),e}function lu(){}var cu=$i(It),hu=$i(_t),fu=$i(Ot);function pu(e){return ya(e)?Bt(Ba(e)):function(e){return function(t){return Cn(t,e)}}(e)}var du=Gi(),mu=Gi(!0);function gu(){return[]}function vu(){return!1}var yu,bu=Ui((function(e,t){return e+t}),0),wu=Yi("ceil"),_u=Ui((function(e,t){return e/t}),1),Cu=Yi("floor"),xu=Ui((function(e,t){return e*t}),1),Su=Yi("round"),Iu=Ui((function(e,t){return e-t}),0);return Fr.after=function(e,t){if("function"!=typeof t)throw new Pe(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Fr.ary=Ao,Fr.assign=ws,Fr.assignIn=_s,Fr.assignInWith=Cs,Fr.assignWith=xs,Fr.at=Ss,Fr.before=Oo,Fr.bind=Ro,Fr.bindAll=eu,Fr.bindKey=ko,Fr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},Fr.chain=fo,Fr.chunk=function(e,t,r){t=(r?va(e,t,r):t===i)?1:gr(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(lr(a/t));o<a;)u[s++]=ti(e,o,o+=t);return u},Fr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i},Fr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Et(Wo(r)?Pi(r):[r],gn(t,1))},Fr.cond=function(e){var t=null==e?0:e.length,r=oa();return e=t?It(e,(function(e){if("function"!=typeof e[1])throw new Pe(a);return[r(e[0]),e[1]]})):[],Kn((function(r){for(var n=-1;++n<t;){var i=e[n];if(vt(i[0],this,r))return vt(i[1],this,r)}}))},Fr.conforms=function(e){return function(e){var t=Ms(e);return function(r){return un(r,e,t)}}(sn(e,1))},Fr.constant=tu,Fr.countBy=go,Fr.create=function(e,t){var r=Lr(e);return null==t?r:rn(r,t)},Fr.curry=function e(t,r,n){var a=qi(t,8,i,i,i,i,i,r=n?i:r);return a.placeholder=e.placeholder,a},Fr.curryRight=function e(t,r,n){var a=qi(t,16,i,i,i,i,i,r=n?i:r);return a.placeholder=e.placeholder,a},Fr.debounce=Mo,Fr.defaults=Is,Fr.defaultsDeep=Es,Fr.defer=To,Fr.delay=No,Fr.difference=Ua,Fr.differenceBy=$a,Fr.differenceWith=za,Fr.drop=function(e,t,r){var n=null==e?0:e.length;return n?ti(e,(t=r||t===i?1:ms(t))<0?0:t,n):[]},Fr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ti(e,0,(t=n-(t=r||t===i?1:ms(t)))<0?0:t):[]},Fr.dropRightWhile=function(e,t){return e&&e.length?hi(e,oa(t,3),!0,!0):[]},Fr.dropWhile=function(e,t){return e&&e.length?hi(e,oa(t,3),!0):[]},Fr.fill=function(e,t,r,n){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&va(e,t,r)&&(r=0,n=a),function(e,t,r,n){var a=e.length;for((r=ms(r))<0&&(r=-r>a?0:a+r),(n=n===i||n>a?a:ms(n))<0&&(n+=a),n=r>n?0:gs(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Fr.filter=function(e,t){return(Wo(e)?Ct:mn)(e,oa(t,3))},Fr.flatMap=function(e,t){return gn(So(e,t),1)},Fr.flatMapDeep=function(e,t){return gn(So(e,t),c)},Fr.flatMapDepth=function(e,t,r){return r=r===i?1:ms(r),gn(So(e,t),r)},Fr.flatten=Wa,Fr.flattenDeep=function(e){return null!=e&&e.length?gn(e,c):[]},Fr.flattenDepth=function(e,t){return null!=e&&e.length?gn(e,t=t===i?1:ms(t)):[]},Fr.flip=function(e){return qi(e,512)},Fr.flow=ru,Fr.flowRight=nu,Fr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Fr.functions=function(e){return null==e?[]:_n(e,Ms(e))},Fr.functionsIn=function(e){return null==e?[]:_n(e,Ts(e))},Fr.groupBy=_o,Fr.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},Fr.intersection=Ha,Fr.intersectionBy=Ka,Fr.intersectionWith=qa,Fr.invert=Os,Fr.invertBy=Rs,Fr.invokeMap=Co,Fr.iteratee=au,Fr.keyBy=xo,Fr.keys=Ms,Fr.keysIn=Ts,Fr.map=So,Fr.mapKeys=function(e,t){var r={};return t=oa(t,3),bn(e,(function(e,n,i){nn(r,t(e,n,i),e)})),r},Fr.mapValues=function(e,t){var r={};return t=oa(t,3),bn(e,(function(e,n,i){nn(r,n,t(e,n,i))})),r},Fr.matches=function(e){return Fn(sn(e,1))},Fr.matchesProperty=function(e,t){return Ln(e,sn(t,1))},Fr.memoize=Do,Fr.merge=Ns,Fr.mergeWith=Ds,Fr.method=ou,Fr.methodOf=su,Fr.mixin=uu,Fr.negate=jo,Fr.nthArg=function(e){return e=ms(e),Kn((function(t){return $n(t,e)}))},Fr.omit=js,Fr.omitBy=function(e,t){return Fs(e,jo(oa(t)))},Fr.once=function(e){return Oo(2,e)},Fr.orderBy=function(e,t,r,n){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(r=n?i:r)||(r=null==r?[]:[r]),zn(e,t,r))},Fr.over=cu,Fr.overArgs=Bo,Fr.overEvery=hu,Fr.overSome=fu,Fr.partial=Fo,Fr.partialRight=Lo,Fr.partition=Io,Fr.pick=Bs,Fr.pickBy=Fs,Fr.property=pu,Fr.propertyOf=function(e){return function(t){return null==e?i:Cn(e,t)}},Fr.pull=Qa,Fr.pullAll=Ja,Fr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Vn(e,t,oa(r,2)):e},Fr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Vn(e,t,i,r):e},Fr.pullAt=Za,Fr.range=du,Fr.rangeRight=mu,Fr.rearg=Uo,Fr.reject=function(e,t){return(Wo(e)?Ct:mn)(e,jo(oa(t,3)))},Fr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=oa(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return Wn(e,i),r},Fr.rest=function(e,t){if("function"!=typeof e)throw new Pe(a);return Kn(e,t=t===i?t:ms(t))},Fr.reverse=eo,Fr.sampleSize=function(e,t,r){return t=(r?va(e,t,r):t===i)?1:ms(t),(Wo(e)?Xr:Xn)(e,t)},Fr.set=function(e,t,r){return null==e?e:Qn(e,t,r)},Fr.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:Qn(e,t,r,n)},Fr.shuffle=function(e){return(Wo(e)?Qr:ei)(e)},Fr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&va(e,t,r)?(t=0,r=n):(t=null==t?0:ms(t),r=r===i?n:ms(r)),ti(e,t,r)):[]},Fr.sortBy=Eo,Fr.sortedUniq=function(e){return e&&e.length?ai(e):[]},Fr.sortedUniqBy=function(e,t){return e&&e.length?ai(e,oa(t,2)):[]},Fr.split=function(e,t,r){return r&&"number"!=typeof r&&va(e,t,r)&&(t=r=i),(r=r===i?p:r>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=si(t))&&Jt(e)?bi(ar(e),0,r):e.split(t,r):[]},Fr.spread=function(e,t){if("function"!=typeof e)throw new Pe(a);return t=null==t?0:gr(ms(t),0),Kn((function(r){var n=r[t],i=bi(r,0,t);return n&&Et(i,n),vt(e,this,i)}))},Fr.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},Fr.take=function(e,t,r){return e&&e.length?ti(e,0,(t=r||t===i?1:ms(t))<0?0:t):[]},Fr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ti(e,(t=n-(t=r||t===i?1:ms(t)))<0?0:t,n):[]},Fr.takeRightWhile=function(e,t){return e&&e.length?hi(e,oa(t,3),!1,!0):[]},Fr.takeWhile=function(e,t){return e&&e.length?hi(e,oa(t,3)):[]},Fr.tap=function(e,t){return t(e),e},Fr.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Pe(a);return ts(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Mo(e,t,{leading:n,maxWait:t,trailing:i})},Fr.thru=po,Fr.toArray=ps,Fr.toPairs=Ls,Fr.toPairsIn=Us,Fr.toPath=function(e){return Wo(e)?It(e,Ba):ls(e)?[e]:Pi(ja(bs(e)))},Fr.toPlainObject=ys,Fr.transform=function(e,t,r){var n=Wo(e),i=n||qo(e)||cs(e);if(t=oa(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:ts(e)&&Jo(a)?Lr(Ye(e)):{}}return(i?bt:bn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Fr.unary=function(e){return Ao(e,1)},Fr.union=to,Fr.unionBy=ro,Fr.unionWith=no,Fr.uniq=function(e){return e&&e.length?ui(e):[]},Fr.uniqBy=function(e,t){return e&&e.length?ui(e,oa(t,2)):[]},Fr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},Fr.unset=function(e,t){return null==e||li(e,t)},Fr.unzip=io,Fr.unzipWith=ao,Fr.update=function(e,t,r){return null==e?e:ci(e,t,gi(r))},Fr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:ci(e,t,gi(r),n)},Fr.values=$s,Fr.valuesIn=function(e){return null==e?[]:Vt(e,Ts(e))},Fr.without=oo,Fr.words=Js,Fr.wrap=function(e,t){return Fo(gi(t),e)},Fr.xor=so,Fr.xorBy=uo,Fr.xorWith=lo,Fr.zip=co,Fr.zipObject=function(e,t){return di(e||[],t||[],Zr)},Fr.zipObjectDeep=function(e,t){return di(e||[],t||[],Qn)},Fr.zipWith=ho,Fr.entries=Ls,Fr.entriesIn=Us,Fr.extend=_s,Fr.extendWith=Cs,uu(Fr,Fr),Fr.add=bu,Fr.attempt=Zs,Fr.camelCase=zs,Fr.capitalize=Gs,Fr.ceil=wu,Fr.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=vs(r))==r?r:0),t!==i&&(t=(t=vs(t))==t?t:0),on(vs(e),t,r)},Fr.clone=function(e){return sn(e,4)},Fr.cloneDeep=function(e){return sn(e,5)},Fr.cloneDeepWith=function(e,t){return sn(e,5,t="function"==typeof t?t:i)},Fr.cloneWith=function(e,t){return sn(e,4,t="function"==typeof t?t:i)},Fr.conformsTo=function(e,t){return null==t||un(e,t,Ms(t))},Fr.deburr=Vs,Fr.defaultTo=function(e,t){return null==e||e!=e?t:e},Fr.divide=_u,Fr.endsWith=function(e,t,r){e=bs(e),t=si(t);var n=e.length,a=r=r===i?n:on(ms(r),0,n);return(r-=t.length)>=0&&e.slice(r,a)==t},Fr.eq=$o,Fr.escape=function(e){return(e=bs(e))&&K.test(e)?e.replace(Y,Xt):e},Fr.escapeRegExp=function(e){return(e=bs(e))&&re.test(e)?e.replace(te,"\\$&"):e},Fr.every=function(e,t,r){var n=Wo(e)?_t:pn;return r&&va(e,t,r)&&(t=i),n(e,oa(t,3))},Fr.find=vo,Fr.findIndex=Ga,Fr.findKey=function(e,t){return kt(e,oa(t,3),bn)},Fr.findLast=yo,Fr.findLastIndex=Va,Fr.findLastKey=function(e,t){return kt(e,oa(t,3),wn)},Fr.floor=Cu,Fr.forEach=bo,Fr.forEachRight=wo,Fr.forIn=function(e,t){return null==e?e:vn(e,oa(t,3),Ts)},Fr.forInRight=function(e,t){return null==e?e:yn(e,oa(t,3),Ts)},Fr.forOwn=function(e,t){return e&&bn(e,oa(t,3))},Fr.forOwnRight=function(e,t){return e&&wn(e,oa(t,3))},Fr.get=Ps,Fr.gt=zo,Fr.gte=Go,Fr.has=function(e,t){return null!=e&&pa(e,t,En)},Fr.hasIn=As,Fr.head=Ya,Fr.identity=iu,Fr.includes=function(e,t,r,n){e=Ho(e)?e:$s(e),r=r&&!n?ms(r):0;var i=e.length;return r<0&&(r=gr(i+r,0)),us(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Tt(e,t,r)>-1},Fr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ms(r);return i<0&&(i=gr(n+i,0)),Tt(e,t,i)},Fr.inRange=function(e,t,r){return t=ds(t),r===i?(r=t,t=0):r=ds(r),function(e,t,r){return e>=vr(t,r)&&e<gr(t,r)}(e=vs(e),t,r)},Fr.invoke=ks,Fr.isArguments=Vo,Fr.isArray=Wo,Fr.isArrayBuffer=Yo,Fr.isArrayLike=Ho,Fr.isArrayLikeObject=Ko,Fr.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Sn(e)==v},Fr.isBuffer=qo,Fr.isDate=Xo,Fr.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},Fr.isEmpty=function(e){if(null==e)return!0;if(Ho(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||qo(e)||cs(e)||Vo(e)))return!e.length;var t=fa(e);if(t==C||t==P)return!e.size;if(_a(e))return!Dn(e).length;for(var r in e)if(Te.call(e,r))return!1;return!0},Fr.isEqual=function(e,t){return kn(e,t)},Fr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?kn(e,t,i,r):!!n},Fr.isError=Qo,Fr.isFinite=function(e){return"number"==typeof e&&pr(e)},Fr.isFunction=Jo,Fr.isInteger=Zo,Fr.isLength=es,Fr.isMap=ns,Fr.isMatch=function(e,t){return e===t||Mn(e,t,ua(t))},Fr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,Mn(e,t,ua(t),r)},Fr.isNaN=function(e){return is(e)&&e!=+e},Fr.isNative=function(e){if(wa(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Tn(e)},Fr.isNil=function(e){return null==e},Fr.isNull=function(e){return null===e},Fr.isNumber=is,Fr.isObject=ts,Fr.isObjectLike=rs,Fr.isPlainObject=as,Fr.isRegExp=os,Fr.isSafeInteger=function(e){return Zo(e)&&e>=-9007199254740991&&e<=h},Fr.isSet=ss,Fr.isString=us,Fr.isSymbol=ls,Fr.isTypedArray=cs,Fr.isUndefined=function(e){return e===i},Fr.isWeakMap=function(e){return rs(e)&&fa(e)==R},Fr.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Sn(e)},Fr.join=function(e,t){return null==e?"":dr.call(e,t)},Fr.kebabCase=Ws,Fr.last=Xa,Fr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=n;return r!==i&&(a=(a=ms(r))<0?gr(n+a,0):vr(a,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,a):Mt(e,Dt,a,!0)},Fr.lowerCase=Ys,Fr.lowerFirst=Hs,Fr.lt=hs,Fr.lte=fs,Fr.max=function(e){return e&&e.length?dn(e,iu,In):i},Fr.maxBy=function(e,t){return e&&e.length?dn(e,oa(t,2),In):i},Fr.mean=function(e){return jt(e,iu)},Fr.meanBy=function(e,t){return jt(e,oa(t,2))},Fr.min=function(e){return e&&e.length?dn(e,iu,jn):i},Fr.minBy=function(e,t){return e&&e.length?dn(e,oa(t,2),jn):i},Fr.stubArray=gu,Fr.stubFalse=vu,Fr.stubObject=function(){return{}},Fr.stubString=function(){return""},Fr.stubTrue=function(){return!0},Fr.multiply=xu,Fr.nth=function(e,t){return e&&e.length?$n(e,ms(t)):i},Fr.noConflict=function(){return at._===this&&(at._=Fe),this},Fr.noop=lu,Fr.now=Po,Fr.pad=function(e,t,r){e=bs(e);var n=(t=ms(t))?ir(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return zi(cr(i),r)+e+zi(lr(i),r)},Fr.padEnd=function(e,t,r){e=bs(e);var n=(t=ms(t))?ir(e):0;return t&&n<t?e+zi(t-n,r):e},Fr.padStart=function(e,t,r){e=bs(e);var n=(t=ms(t))?ir(e):0;return t&&n<t?zi(t-n,r)+e:e},Fr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),br(bs(e).replace(ne,""),t||0)},Fr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&va(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ds(e),t===i?(t=e,e=0):t=ds(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var a=wr();return vr(e+a*(t-e+tt("1e-"+((a+"").length-1))),t)}return Yn(e,t)},Fr.reduce=function(e,t,r){var n=Wo(e)?Pt:Lt,i=arguments.length<3;return n(e,oa(t,4),r,i,hn)},Fr.reduceRight=function(e,t,r){var n=Wo(e)?At:Lt,i=arguments.length<3;return n(e,oa(t,4),r,i,fn)},Fr.repeat=function(e,t,r){return t=(r?va(e,t,r):t===i)?1:ms(t),Hn(bs(e),t)},Fr.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fr.result=function(e,t,r){var n=-1,a=(t=vi(t,e)).length;for(a||(a=1,e=i);++n<a;){var o=null==e?i:e[Ba(t[n])];o===i&&(n=a,o=r),e=Jo(o)?o.call(e):o}return e},Fr.round=Su,Fr.runInContext=e,Fr.sample=function(e){return(Wo(e)?qr:qn)(e)},Fr.size=function(e){if(null==e)return 0;if(Ho(e))return us(e)?ir(e):e.length;var t=fa(e);return t==C||t==P?e.size:Dn(e).length},Fr.snakeCase=Ks,Fr.some=function(e,t,r){var n=Wo(e)?Ot:ri;return r&&va(e,t,r)&&(t=i),n(e,oa(t,3))},Fr.sortedIndex=function(e,t){return ni(e,t)},Fr.sortedIndexBy=function(e,t,r){return ii(e,t,oa(r,2))},Fr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ni(e,t);if(n<r&&$o(e[n],t))return n}return-1},Fr.sortedLastIndex=function(e,t){return ni(e,t,!0)},Fr.sortedLastIndexBy=function(e,t,r){return ii(e,t,oa(r,2),!0)},Fr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ni(e,t,!0)-1;if($o(e[r],t))return r}return-1},Fr.startCase=qs,Fr.startsWith=function(e,t,r){return e=bs(e),r=null==r?0:on(ms(r),0,e.length),t=si(t),e.slice(r,r+t.length)==t},Fr.subtract=Iu,Fr.sum=function(e){return e&&e.length?Ut(e,iu):0},Fr.sumBy=function(e,t){return e&&e.length?Ut(e,oa(t,2)):0},Fr.template=function(e,t,r){var n=Fr.templateSettings;r&&va(e,t,r)&&(t=i),e=bs(e),t=Cs({},t,n,Xi);var a,o,s=Cs({},t.imports,n.imports,Xi),u=Ms(s),l=Vt(s,u),c=0,h=t.interpolate||be,f="__p += '",p=Ie((t.escape||be).source+"|"+h.source+"|"+(h===Q?he:be).source+"|"+(t.evaluate||be).source+"|$","g"),d="//# sourceURL="+(Te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qe+"]")+"\n";e.replace(p,(function(t,r,n,i,s,u){return n||(n=i),f+=e.slice(c,u).replace(we,Qt),r&&(a=!0,f+="' +\n__e("+r+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var m=Te.call(t,"variable")&&t.variable;if(m){if(le.test(m))throw new _e("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(z,""):f).replace(G,"$1").replace(V,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Zs((function(){return Ce(u,d+"return "+f).apply(i,l)}));if(g.source=f,Qo(g))throw g;return g},Fr.times=function(e,t){if((e=ms(e))<1||e>h)return[];var r=p,n=vr(e,p);t=oa(t),e-=p;for(var i=$t(n,t);++r<e;)t(r);return i},Fr.toFinite=ds,Fr.toInteger=ms,Fr.toLength=gs,Fr.toLower=function(e){return bs(e).toLowerCase()},Fr.toNumber=vs,Fr.toSafeInteger=function(e){return e?on(ms(e),-9007199254740991,h):0===e?e:0},Fr.toString=bs,Fr.toUpper=function(e){return bs(e).toUpperCase()},Fr.trim=function(e,t,r){if((e=bs(e))&&(r||t===i))return zt(e);if(!e||!(t=si(t)))return e;var n=ar(e),a=ar(t);return bi(n,Yt(n,a),Ht(n,a)+1).join("")},Fr.trimEnd=function(e,t,r){if((e=bs(e))&&(r||t===i))return e.slice(0,or(e)+1);if(!e||!(t=si(t)))return e;var n=ar(e);return bi(n,0,Ht(n,ar(t))+1).join("")},Fr.trimStart=function(e,t,r){if((e=bs(e))&&(r||t===i))return e.replace(ne,"");if(!e||!(t=si(t)))return e;var n=ar(e);return bi(n,Yt(n,ar(t))).join("")},Fr.truncate=function(e,t){var r=30,n="...";if(ts(t)){var a="separator"in t?t.separator:a;r="length"in t?ms(t.length):r,n="omission"in t?si(t.omission):n}var o=(e=bs(e)).length;if(Jt(e)){var s=ar(e);o=s.length}if(r>=o)return e;var u=r-ir(n);if(u<1)return n;var l=s?bi(s,0,u).join(""):e.slice(0,u);if(a===i)return l+n;if(s&&(u+=l.length-u),os(a)){if(e.slice(u).search(a)){var c,h=l;for(a.global||(a=Ie(a.source,bs(fe.exec(a))+"g")),a.lastIndex=0;c=a.exec(h);)var f=c.index;l=l.slice(0,f===i?u:f)}}else if(e.indexOf(si(a),u)!=u){var p=l.lastIndexOf(a);p>-1&&(l=l.slice(0,p))}return l+n},Fr.unescape=function(e){return(e=bs(e))&&H.test(e)?e.replace(W,sr):e},Fr.uniqueId=function(e){var t=++Ne;return bs(e)+t},Fr.upperCase=Xs,Fr.upperFirst=Qs,Fr.each=bo,Fr.eachRight=wo,Fr.first=Ya,uu(Fr,(yu={},bn(Fr,(function(e,t){Te.call(Fr.prototype,t)||(yu[t]=e)})),yu),{chain:!1}),Fr.VERSION="4.17.21",bt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fr[e].placeholder=Fr})),bt(["drop","take"],(function(e,t){zr.prototype[e]=function(r){r=r===i?1:gr(ms(r),0);var n=this.__filtered__&&!t?new zr(this):this.clone();return n.__filtered__?n.__takeCount__=vr(r,n.__takeCount__):n.__views__.push({size:vr(r,p),type:e+(n.__dir__<0?"Right":"")}),n},zr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),bt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;zr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oa(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),bt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");zr.prototype[e]=function(){return this[r](1).value()[0]}})),bt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");zr.prototype[e]=function(){return this.__filtered__?new zr(this):this[r](1)}})),zr.prototype.compact=function(){return this.filter(iu)},zr.prototype.find=function(e){return this.filter(e).head()},zr.prototype.findLast=function(e){return this.reverse().find(e)},zr.prototype.invokeMap=Kn((function(e,t){return"function"==typeof e?new zr(this):this.map((function(r){return On(r,e,t)}))})),zr.prototype.reject=function(e){return this.filter(jo(oa(e)))},zr.prototype.slice=function(e,t){e=ms(e);var r=this;return r.__filtered__&&(e>0||t<0)?new zr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=ms(t))<0?r.dropRight(-t):r.take(t-e)),r)},zr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zr.prototype.toArray=function(){return this.take(p)},bn(zr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),a=Fr[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);a&&(Fr.prototype[t]=function(){var t=this.__wrapped__,s=n?[1]:arguments,u=t instanceof zr,l=s[0],c=u||Wo(t),h=function(e){var t=a.apply(Fr,Et([e],s));return n&&f?t[0]:t};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,d=o&&!f,m=u&&!p;if(!o&&c){t=m?t:new zr(this);var g=e.apply(t,s);return g.__actions__.push({func:po,args:[h],thisArg:i}),new $r(g,f)}return d&&m?e.apply(this,s):(g=this.thru(h),d?n?g.value()[0]:g.value():g)})})),bt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Fr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Wo(i)?i:[],e)}return this[r]((function(r){return t.apply(Wo(r)?r:[],e)}))}})),bn(zr.prototype,(function(e,t){var r=Fr[t];if(r){var n=r.name+"";Te.call(Or,n)||(Or[n]=[]),Or[n].push({name:t,func:r})}})),Or[Fi(i,2).name]=[{name:"wrapper",func:i}],zr.prototype.clone=function(){var e=new zr(this.__wrapped__);return e.__actions__=Pi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pi(this.__views__),e},zr.prototype.reverse=function(){if(this.__filtered__){var e=new zr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Wo(e),n=t<0,i=r?e.length:0,a=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=vr(t,e+o);break;case"takeRight":e=gr(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=n?s:o-1,c=this.__iteratees__,h=c.length,f=0,p=vr(u,this.__takeCount__);if(!r||!n&&i==u&&p==u)return fi(e,this.__actions__);var d=[];e:for(;u--&&f<p;){for(var m=-1,g=e[l+=t];++m<h;){var v=c[m],y=v.iteratee,b=v.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue e;break e}}d[f++]=g}return d},Fr.prototype.at=mo,Fr.prototype.chain=function(){return fo(this)},Fr.prototype.commit=function(){return new $r(this.value(),this.__chain__)},Fr.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Fr.prototype.plant=function(e){for(var t,r=this;r instanceof Ur;){var n=La(r);n.__index__=0,n.__values__=i,t?a.__wrapped__=n:t=n;var a=n;r=r.__wrapped__}return a.__wrapped__=e,t},Fr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zr){var t=e;return this.__actions__.length&&(t=new zr(this)),(t=t.reverse()).__actions__.push({func:po,args:[eo],thisArg:i}),new $r(t,this.__chain__)}return this.thru(eo)},Fr.prototype.toJSON=Fr.prototype.valueOf=Fr.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Fr.prototype.first=Fr.prototype.head,ot&&(Fr.prototype[ot]=function(){return this}),Fr}();at._=ur,(n=function(){return ur}.call(t,r,t,e))===i||(e.exports=n)}.call(this)},8306:(e,t,r)=>{var n=r(3369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},2492:(e,t,r)=>{var n=r(2980),i=r(1463)((function(e,t,r){n(e,t,r)}));e.exports=i},236:(e,t,r)=>{var n=r(2980),i=r(1463)((function(e,t,r,i){n(e,t,r,i)}));e.exports=i},308:e=>{e.exports=function(){}},7771:(e,t,r)=>{var n=r(5639);e.exports=function(){return n.Date.now()}},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},3493:(e,t,r)=>{var n=r(3279),i=r(3218);e.exports=function(e,t,r){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(r)&&(a="leading"in r?!!r.leading:a,o="trailing"in r?!!r.trailing:o),n(e,t,{leading:a,maxWait:t,trailing:o})}},4841:(e,t,r)=>{var n=r(7561),i=r(3218),a=r(3448),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||u.test(e)?l(e.slice(2),r?2:8):o.test(e)?NaN:+e}},9881:(e,t,r)=>{var n=r(8363),i=r(1704);e.exports=function(e){return n(e,i(e))}},9833:(e,t,r)=>{var n=r(531);e.exports=function(e){return null==e?"":n(e)}},9593:(e,t,r)=>{"use strict";const n=r(4411),i=Symbol("max"),a=Symbol("length"),o=Symbol("lengthCalculator"),s=Symbol("allowStale"),u=Symbol("maxAge"),l=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),d=()=>1,m=(e,t,r)=>{const n=e[f].get(t);if(n){const t=n.value;if(g(e,t)){if(y(e,n),!e[s])return}else r&&(e[p]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u]},v=e=>{if(e[a]>e[i])for(let t=e[h].tail;e[a]>e[i]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[a]-=r.length,e[f].delete(r.key),e[h].removeNode(t)}};class b{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const w=(e,t,r,n)=>{let i=r.value;g(e,i)&&(y(e,r),e[s]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||d;if(this[o]="function"!=typeof t?d:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[l]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,v(this)}get max(){return this[i]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,v(this)}get maxAge(){return this[u]}set lengthCalculator(e){"function"!=typeof e&&(e=d),e!==this[o]&&(this[o]=e,this[a]=0,this[h].forEach((e=>{e.length=this[o](e.value,e.key),this[a]+=e.length}))),v(this)}get lengthCalculator(){return this[o]}get length(){return this[a]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){const n=r.prev;w(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){const n=r.next;w(this,e,r,t),r=n}}keys(){return this[h].toArray().map((e=>e.key))}values(){return this[h].toArray().map((e=>e.value))}reset(){this[l]&&this[h]&&this[h].length&&this[h].forEach((e=>this[l](e.key,e.value))),this[f]=new Map,this[h]=new n,this[a]=0}dump(){return this[h].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[o](t,e);if(this[f].has(e)){if(s>this[i])return y(this,this[f].get(e)),!1;const o=this[f].get(e).value;return this[l]&&(this[c]||this[l](e,o.value)),o.now=n,o.maxAge=r,o.value=t,this[a]+=s-o.length,o.length=s,this.get(e),v(this),!0}const p=new b(e,t,s,n,r);return p.length>this[i]?(this[l]&&this[l](e,t),!1):(this[a]+=p.length,this[h].unshift(p),this[f].set(e,this[h].head),v(this),!0)}has(e){if(!this[f].has(e))return!1;const t=this[f].get(e).value;return!g(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[h].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[f].forEach(((e,t)=>m(this,t,!1)))}}},9921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case h:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case l:case f:case g:case m:case u:return e;default:return t}}case i:return t}}}function C(e){return _(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return C(e)||_(e)===c},t.isConcurrentMode=C,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===s||e===o||e===p||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=_},9864:(e,t,r)=>{"use strict";e.exports=r(9921)},8359:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case o:case a:case h:case f:return e;default:switch(e=e&&e.$$typeof){case l:case u:case c:case d:case p:case s:return e;default:return t}}case n:return t}}}(e)===u}},2973:(e,t,r)=>{"use strict";e.exports=r(8359)},2257:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=a(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?o[s.COMPARATORLOOSE]:o[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(e.value,t).test(this.value):""===e.operator?""===e.value||new h(this.value,t).test(e.semver):!((t=a(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(u(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(u(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const a=r(2893),{re:o,t:s}=r(5765),u=r(7539),l=r(4225),c=r(6376),h=r(6902)},6902:(e,t,r)=>{class n{constructor(e,t){if(t=a(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!g(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=((this.options.includePrerelease&&d)|(this.options.loose&&m))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];e=e.replace(a,O(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(l[c.COMPARATORTRIM],h),s("comparator trim",e);let u=(e=(e=(e=e.replace(l[c.TILDETRIM],f)).replace(l[c.CARETTRIM],p)).split(/\s+/).join(" ")).split(" ").map((e=>b(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));n&&(u=u.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(l[c.COMPARATORLOOSE]))))),s("range list",u);const v=new Map,y=u.map((e=>new o(e,this.options)));for(const e of y){if(g(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const w=[...v.values()];return i.set(t,w),w}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(9593))({max:1e3}),a=r(2893),o=r(2257),s=r(4225),u=r(6376),{re:l,t:c,comparatorTrimReplace:h,tildeTrimReplace:f,caretTrimReplace:p}=r(5765),{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:m}=r(3295),g=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},b=(e,t)=>(s("comp",e,t),e=x(e,t),s("caret",e),e=_(e,t),s("tildes",e),e=I(e,t),s("xrange",e),e=P(e,t),s("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map((e=>C(e,t))).join(" "),C=(e,t)=>{const r=t.loose?l[c.TILDELOOSE]:l[c.TILDE];return e.replace(r,((t,r,n,i,a)=>{let o;return s("tilde",e,t,r,n,i,a),w(r)?o="":w(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:w(i)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(s("replaceTilde pr",a),o=`>=${r}.${n}.${i}-${a} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,s("tilde return",o),o}))},x=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{s("caret",e,t);const r=t.loose?l[c.CARETLOOSE]:l[c.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,a,o)=>{let u;return s("caret",e,t,r,i,a,o),w(r)?u="":w(i)?u=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(a)?u="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:o?(s("replaceCaret pr",o),u="0"===r?"0"===i?`>=${r}.${i}.${a}-${o} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}-${o} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a}-${o} <${+r+1}.0.0-0`):(s("no pr"),u="0"===r?"0"===i?`>=${r}.${i}.${a}${n} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a} <${+r+1}.0.0-0`),s("caret return",u),u}))},I=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>E(e,t))).join(" ")),E=(e,t)=>{e=e.trim();const r=t.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return e.replace(r,((r,n,i,a,o,u)=>{s("xRange",e,r,n,i,a,o,u);const l=w(i),c=l||w(a),h=c||w(o),f=h;return"="===n&&f&&(n=""),u=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(c&&(a=0),o=0,">"===n?(n=">=",c?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):"<="===n&&(n="<",c?i=+i+1:a=+a+1),"<"===n&&(u="-0"),r=`${n+i}.${a}.${o}${u}`):c?r=`>=${i}.0.0${u} <${+i+1}.0.0-0`:h&&(r=`>=${i}.${a}.0${u} <${i}.${+a+1}.0-0`),s("xRange return",r),r}))},P=(e,t)=>(s("replaceStars",e,t),e.trim().replace(l[c.STAR],"")),A=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),O=e=>(t,r,n,i,a,o,s,u,l,c,h,f,p)=>`${r=w(n)?"":w(i)?`>=${n}.0.0${e?"-0":""}`:w(a)?`>=${n}.${i}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`} ${u=w(l)?"":w(c)?`<${+l+1}.0.0-0`:w(h)?`<${l}.${+c+1}.0-0`:f?`<=${l}.${c}.${h}-${f}`:e?`<${l}.${c}.${+h+1}-0`:`<=${u}`}`.trim(),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,r)=>{const n=r(4225),{MAX_LENGTH:i,MAX_SAFE_INTEGER:a}=r(3295),{re:o,t:s}=r(5765),u=r(2893),{compareIdentifiers:l}=r(6742);class c{constructor(e,t){if(t=u(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${r(8012).inspect(e)}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const l=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!l)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=c},3507:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(8718),i=r(1194),a=r(1312),o=r(5903),s=r(1544),u=r(2056);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return i(e,r,l);case">":return a(e,r,l);case">=":return o(e,r,l);case"<":return s(e,r,l);case"<=":return u(e,r,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,r)=>{const n=r(6376),i=r(3959),{re:a,t:o}=r(5765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=a[o.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),a[o.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;a[o.COERCERTL].lastIndex=-1}else r=e.match(a[o.COERCE]);return null===r?null:i(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},8880:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>{const i=new n(e,r),a=new n(t,r);return i.compare(a)||i.compareBuild(a)}},7880:(e,t,r)=>{const n=r(6269);e.exports=(e,t)=>n(e,t,!0)},6269:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},2378:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,null,!0),i=n(t,null,!0),a=r.compare(i);if(0===a)return null;const o=a>0,s=o?i:r,u=!!(o?r:i).prerelease.length,l=u?"pre":"";return r.major!==i.major?l+"major":r.minor!==i.minor?l+"minor":r.patch!==i.patch?l+"patch":u?"prerelease":s.patch?"patch":s.minor?"minor":"major"}},8718:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0===n(e,t,r)},1312:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>0},5903:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>=0},253:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r,i,a)=>{"string"==typeof r&&(a=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,a).version}catch(e){return null}}},1544:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<0},2056:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<=0},6378:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).major},7789:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).minor},1194:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0!==n(e,t,r)},3959:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},2358:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).patch},7559:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9795:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(t,e,r)},3657:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},5712:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1100:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6397:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},1249:(e,t,r)=>{const n=r(5765),i=r(3295),a=r(6376),o=r(6742),s=r(3959),u=r(6397),l=r(3507),c=r(253),h=r(2378),f=r(6378),p=r(7789),d=r(2358),m=r(7559),g=r(6269),v=r(9795),y=r(7880),b=r(8880),w=r(1100),_=r(3657),C=r(1312),x=r(1544),S=r(8718),I=r(1194),E=r(5903),P=r(2056),A=r(7539),O=r(9038),R=r(2257),k=r(6902),M=r(5712),T=r(1042),N=r(5775),D=r(1657),j=r(5316),B=r(9042),F=r(6826),L=r(7606),U=r(32),$=r(2937),z=r(7908),G=r(799);e.exports={parse:s,valid:u,clean:l,inc:c,diff:h,major:f,minor:p,patch:d,prerelease:m,compare:g,rcompare:v,compareLoose:y,compareBuild:b,sort:w,rsort:_,gt:C,lt:x,eq:S,neq:I,gte:E,lte:P,cmp:A,coerce:O,Comparator:R,Range:k,satisfies:M,toComparators:T,maxSatisfying:N,minSatisfying:D,minVersion:j,validRange:B,outside:F,gtr:L,ltr:U,intersects:$,simplifyRange:z,subset:G,SemVer:a,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>{}:()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2893:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},5765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n}=r(3295),i=r(4225),a=(t=e.exports={}).re=[],o=t.src=[],s=t.t={};let u=0;const l=(e,t,r)=>{const n=u++;i(e,n,t),s[e]=n,o[n]=t,a[n]=new RegExp(t,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),l("FULL",`^${o[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),l("LOOSE",`^${o[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),l("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},2937:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},32:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},5775:(e,t,r)=>{const n=r(6376),i=r(6902);e.exports=(e,t,r)=>{let a=null,o=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(a&&-1!==o.compare(e)||(a=e,o=new n(a,r)))})),a}},1657:(e,t,r)=>{const n=r(6376),i=r(6902);e.exports=(e,t,r)=>{let a=null,o=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(a&&1!==o.compare(e)||(a=e,o=new n(a,r)))})),a}},5316:(e,t,r)=>{const n=r(6376),i=r(6902),a=r(1312);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let o=null;i.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!a(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||r&&!a(r,o)||(r=o)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(6376),i=r(2257),{ANY:a}=i,o=r(6902),s=r(5712),u=r(1312),l=r(1544),c=r(2056),h=r(5903);e.exports=(e,t,r,f)=>{let p,d,m,g,v;switch(e=new n(e,f),t=new o(t,f),r){case">":p=u,d=c,m=l,g=">",v=">=";break;case"<":p=l,d=h,m=u,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,f))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let o=null,s=null;if(n.forEach((e=>{e.semver===a&&(e=new i(">=0.0.0")),o=o||e,s=s||e,p(e.semver,o.semver,f)?o=e:m(e.semver,s.semver,f)&&(s=e)})),o.operator===g||o.operator===v)return!1;if((!s.operator||s.operator===g)&&d(e,s.semver))return!1;if(s.operator===v&&m(e,s.semver))return!1}return!0}},7908:(e,t,r)=>{const n=r(5712),i=r(6269);e.exports=(e,t,r)=>{const a=[];let o=null,s=null;const u=e.sort(((e,t)=>i(e,t,r)));for(const e of u)n(e,t,r)?(s=e,o||(o=e)):(s&&a.push([o,s]),s=null,o=null);o&&a.push([o,null]);const l=[];for(const[e,t]of a)e===t?l.push(e):t||e!==u[0]?t?e===u[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const c=l.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return c.length<h.length?c:t}},799:(e,t,r)=>{const n=r(6902),i=r(2257),{ANY:a}=i,o=r(5712),s=r(6269),u=[new i(">=0.0.0-0")],l=[new i(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===a){if(1===t.length&&t[0].semver===a)return!0;e=r.includePrerelease?u:l}if(1===t.length&&t[0].semver===a){if(r.includePrerelease)return!0;t=l}const n=new Set;let i,c,p,d,m,g,v;for(const t of e)">"===t.operator||">="===t.operator?i=h(i,t,r):"<"===t.operator||"<="===t.operator?c=f(c,t,r):n.add(t.semver);if(n.size>1)return null;if(i&&c){if(p=s(i.semver,c.semver,r),p>0)return null;if(0===p&&(">="!==i.operator||"<="!==c.operator))return null}for(const e of n){if(i&&!o(e,String(i),r))return null;if(c&&!o(e,String(c),r))return null;for(const n of t)if(!o(e,String(n),r))return!1;return!0}let y=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,b=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,i)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if(d=h(i,e,r),d===e&&d!==i)return!1}else if(">="===i.operator&&!o(i.semver,String(e),r))return!1;if(c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(m=f(c,e,r),m===e&&m!==c)return!1}else if("<="===c.operator&&!o(c.semver,String(e),r))return!1;if(!e.operator&&(c||i)&&0!==p)return!1}return!(i&&g&&!c&&0!==p||c&&v&&!i&&0!==p||b||y)},h=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},f=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},1042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},2238:function(e,t,r){var n;!function(i,a){"use strict";var o="function",s="undefined",u="object",l="string",c="model",h="name",f="type",p="vendor",d="version",m="architecture",g="console",v="mobile",y="tablet",b="smarttv",w="wearable",_="embedded",C="Amazon",x="Apple",S="ASUS",I="BlackBerry",E="Google",P="Huawei",A="LG",O="Microsoft",R="Motorola",k="Samsung",M="Sony",T="Xiaomi",N="Zebra",D="Facebook",j=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},B=function(e,t){return typeof e===l&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},L=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},U=function(e,t){for(var r,n,i,s,l,c,h=0;h<t.length&&!l;){var f=t[h],p=t[h+1];for(r=n=0;r<f.length&&!l;)if(l=f[r++].exec(e))for(i=0;i<p.length;i++)c=l[++n],typeof(s=p[i])===u&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):a:this[s[0]]=c?s[1].call(this,c,s[2]):a:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):a):this[s]=c||a;h+=2}},$=function(e,t){for(var r in t)if(typeof t[r]===u&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(B(t[r][n],e))return"?"===r?a:r}else if(B(t[r],e))return"?"===r?a:r;return e},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,d],[/opios[\/ ]+([\w\.]+)/i],[d,[h,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[d,[h,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[h,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[d,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure Browser"],d],[/\bfocus\/([\w\.]+)/i],[d,[h,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[d,[h,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[h,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[h,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[d,[h,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 Browser"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,D],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[h,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,"Chrome WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,d],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[d,[h,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[d,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[d,$,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[h,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,F]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[p,k],[f,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[p,k],[f,v]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[p,x],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[p,x],[f,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[p,P],[f,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[p,P],[f,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[p,T],[f,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[p,T],[f,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[p,"OPPO"],[f,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[p,"Vivo"],[f,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[p,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[p,R],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[p,R],[f,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[p,A],[f,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[p,A],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[p,"Lenovo"],[f,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[p,"Nokia"],[f,v]],[/(pixel c)\b/i],[c,[p,E],[f,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[p,E],[f,v]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[p,M],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[p,M],[f,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[p,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[p,C],[f,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[p,C],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[c,p,[f,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[p,I],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[p,S],[f,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[p,S],[f,v]],[/(nexus 9)/i],[c,[p,"HTC"],[f,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[c,/_/g," "],[f,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[p,"Acer"],[f,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[p,"Meizu"],[f,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[p,"Sharp"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,c,[f,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,c,[f,y]],[/(surface duo)/i],[c,[p,O],[f,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[p,"Fairphone"],[f,v]],[/(u304aa)/i],[c,[p,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[c,[p,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[c,[p,"RCA"],[f,y]],[/\b(venue[\d ]{2,7}) b/i],[c,[p,"Dell"],[f,y]],[/\b(q(?:mv|ta)\w+) b/i],[c,[p,"Verizon"],[f,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[p,"Barnes & Noble"],[f,y]],[/\b(tm\d{3}\w+) b/i],[c,[p,"NuVision"],[f,y]],[/\b(k88) b/i],[c,[p,"ZTE"],[f,y]],[/\b(nx\d{3}j) b/i],[c,[p,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[c,[p,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[c,[p,"Swiss"],[f,y]],[/\b((zeki)?tb.*\b) b/i],[c,[p,"Zeki"],[f,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],c,[f,y]],[/\b(ns-?\w{0,9}) b/i],[c,[p,"Insignia"],[f,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[p,"NextBook"],[f,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],c,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],c,[f,v]],[/\b(ph-1) /i],[c,[p,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[p,"Envizen"],[f,y]],[/\b(trio[-\w\. ]+) b/i],[c,[p,"MachSpeed"],[f,y]],[/\btu_(1491) b/i],[c,[p,"Rotor"],[f,y]],[/(shield[\w ]+) b/i],[c,[p,"Nvidia"],[f,y]],[/(sprint) (\w+)/i],[p,c,[f,v]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[p,O],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[p,N],[f,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[p,N],[f,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,c,[f,g]],[/droid.+; (shield) bui/i],[c,[p,"Nvidia"],[f,g]],[/(playstation [345portablevi]+)/i],[c,[p,M],[f,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[p,O],[f,g]],[/smart-tv.+(samsung)/i],[p,[f,b]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[p,k],[f,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,A],[f,b]],[/(apple) ?tv/i],[p,[c,"Apple TV"],[f,b]],[/crkey/i],[[c,"Chromecast"],[p,E],[f,b]],[/droid.+aft(\w)( bui|\))/i],[c,[p,C],[f,b]],[/\(dtv[\);].+(aquos)/i],[c,[p,"Sharp"],[f,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,L],[c,L],[f,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,b]],[/((pebble))app/i],[p,c,[f,w]],[/droid.+; (glass) \d/i],[c,[p,E],[f,w]],[/droid.+; (wt63?0{2,3})\)/i],[c,[p,N],[f,w]],[/(quest( 2)?)/i],[c,[p,D],[f,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[f,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[f,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[d,$,z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[d,$,z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[d,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,d],[/\(bb(10);/i],[d,[h,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[h,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[h,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,d],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,d]]},V=function(e,t){if(typeof e===u&&(t=e,e=a),!(this instanceof V))return new V(e,t).getResult();var r=e||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(G,t):G;return this.getBrowser=function(){var e,t={};return t.name=a,t.version=a,U.call(t,r,n.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:a,t},this.getCPU=function(){var e={};return e.architecture=a,U.call(e,r,n.cpu),e},this.getDevice=function(){var e={};return e.vendor=a,e.model=a,e.type=a,U.call(e,r,n.device),e},this.getEngine=function(){var e={};return e.name=a,e.version=a,U.call(e,r,n.engine),e},this.getOS=function(){var e={};return e.name=a,e.version=a,U.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===l&&e.length>255?L(e,255):e,this},this.setUA(r),this};V.VERSION="1.0.2",V.BROWSER=j([h,d,"major"]),V.CPU=j([m]),V.DEVICE=j([c,p,f,g,v,b,y,w,_]),V.ENGINE=V.OS=j([h,d]),typeof t!==s?(e.exports&&(t=e.exports=V),t.UAParser=V):r.amdO?(n=function(){return V}.call(t,r,t,e))===a||(e.exports=n):typeof i!==s&&(i.UAParser=V);var W=typeof i!==s&&(i.jQuery||i.Zepto);if(W&&!W.ua){var Y=new V;W.ua=Y.getResult(),W.ua.get=function(){return Y.getUA()},W.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var r in t)W.ua[r]=t[r]}}}("object"==typeof window?window:this)},3250:(e,t,r)=>{"use strict";var n=r(7363),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,o=n.useEffect,s=n.useLayoutEffect,u=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,c=n[1];return s((function(){i.value=r,i.getSnapshot=t,l(i)&&c({inst:i})}),[e,r,t]),o((function(){return l(i)&&c({inst:i}),e((function(){l(i)&&c({inst:i})}))}),[e]),u(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},139:(e,t,r)=>{"use strict";var n=r(7363),i=r(1688),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=n.useRef,u=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=l((function(){function e(e){if(!u){if(u=!0,o=e,e=n(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?t:(o=e,s=r)}var o,s,u=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,r,n,i]);var p=o(e,h[0],h[1]);return u((function(){f.hasValue=!0,f.value=p}),[p]),c(p),p}},1688:(e,t,r)=>{"use strict";e.exports=r(3250)},2798:(e,t,r)=>{"use strict";e.exports=r(139)},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function a(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,a=this.head;null!==a&&i<e;i++)a=a.next;for(;null!==a&&i<t;i++,a=a.next)r.push(a.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,a=this.tail;null!==a&&i>t;i--)a=a.prev;for(;null!==a&&i>e;i--,a=a.prev)r.push(a.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,a=this.head;null!==a&&n<e;n++)a=a.next;var o=[];for(n=0;a&&n<t;n++)o.push(a.value),a=this.removeNode(a);for(null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev),n=0;n<r.length;n++)a=i(this,a,r[n]);return o},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(9602)(n)}catch(e){}},7363:e=>{"use strict";e.exports=React},8012:()=>{},9520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Dexie:()=>zr,RangeSet:()=>Nr,default:()=>zr,liveQuery:()=>Yr,mergeRanges:()=>jr,rangesOverlap:()=>Br});const n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,i=Object.keys,a=Array.isArray;function o(e,t){return"object"!=typeof t||i(t).forEach((function(r){e[r]=t[r]})),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);const s=Object.getPrototypeOf,u={}.hasOwnProperty;function l(e,t){return u.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach((r=>{f(e,r,t[r])}))}const h=Object.defineProperty;function f(e,t,r,n){h(e,t,o(r&&l(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}const d=Object.getOwnPropertyDescriptor;function m(e,t){let r;return d(e,t)||(r=s(e))&&m(r,t)}const g=[].slice;function v(e,t,r){return g.call(e,t,r)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){return e.reduce(((e,r,n)=>{var i=t(r,n);return i&&(e[i[0]]=i[1]),e}),{})}function C(e,t){if(l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var a=C(e,t[n]);r.push(a)}return r}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return void 0===s?void 0:C(s,t.substr(o+1))}}function x(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)x(e,t[n],r[n])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),u=t.substr(o+1);if(""===u)void 0===r?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=r;else{var c=e[s];c&&l(e,s)||(c=e[s]={}),x(c,u,r)}}else void 0===r?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function S(e){var t={};for(var r in e)l(e,r)&&(t[r]=e[r]);return t}const I=[].concat;function E(e){return I.apply([],e)}const P="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>n[e])),A=P.map((e=>n[e]));_(P,(e=>[e,!0]));let O=null;function R(e){O="undefined"!=typeof WeakMap&&new WeakMap;const t=k(e);return O=null,t}function k(e){if(!e||"object"!=typeof e)return e;let t=O&&O.get(e);if(t)return t;if(a(e)){t=[],O&&O.set(e,t);for(var r=0,n=e.length;r<n;++r)t.push(k(e[r]))}else if(A.indexOf(e.constructor)>=0)t=e;else{const r=s(e);for(var i in t=r===Object.prototype?{}:Object.create(r),O&&O.set(e,t),e)l(e,i)&&(t[i]=k(e[i]))}return t}const{toString:M}={};function T(e){return M.call(e).slice(8,-1)}const N="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",D="symbol"==typeof N?function(e){var t;return null!=e&&(t=e[N])&&t.apply(e)}:function(){return null},j={};function B(e){var t,r,n,i;if(1===arguments.length){if(a(e))return e.slice();if(this===j&&"string"==typeof e)return[e];if(i=D(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const F="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var L="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function U(e,t){L=e,$=t}var $=()=>!0;const z=!new Error("").stack;function G(){if(z)try{throw G.arguments,new Error}catch(e){return e}return new Error}function V(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter($).map((e=>"\n"+e)).join("")):""}var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(e,t){this._e=G(),this.name=e,this.message=t}function q(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,r)=>r.indexOf(e)===t)).join("\n")}function X(e,t,r,n){this._e=G(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=q(e,t)}function Q(e,t){this._e=G(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=q(e,t)}p(K).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+V(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(X).from(K),p(Q).from(K);var J=Y.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Z=K;var ee=Y.reduce(((e,t)=>{var r=t+"Error";function n(e,n){this._e=G(),this.name=r,e?"string"==typeof e?(this.message=`${e}${n?"\n "+n:""}`,this.inner=n||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=H[t]||r,this.inner=null)}return p(n).from(Z),e[t]=n,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=W.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),re=Y.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function ne(){}function ie(e){return e}function ae(e,t){return null==e||e===ie?t:function(r){return t(e(r))}}function oe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ne?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?oe(n,this.onsuccess):n),i&&(this.onerror=this.onerror?oe(i,this.onerror):i),void 0!==a?a:r}}function ue(e,t){return e===ne?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?oe(r,this.onsuccess):r),n&&(this.onerror=this.onerror?oe(n,this.onerror):n)}}function le(e,t){return e===ne?t:function(r){var n=e.apply(this,arguments);o(r,n);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?oe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?oe(a,this.onerror):a),void 0===n?void 0===s?void 0:s:o(n,s)}}function ce(e,t){return e===ne?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function he(e,t){return e===ne?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return r.then((function(){return t.apply(n,a)}))}return t.apply(this,arguments)}}re.ModifyError=X,re.DexieError=K,re.BulkError=Q;var fe={};const[pe,de,me]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]})(),ge=de&&de.then,ve=pe&&pe.constructor,ye=!!me;var be=!1,we=me?()=>{me.then(Ge)}:n.setImmediate?setImmediate.bind(null,Ge):n.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{Ge(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Ge,0)},_e=function(e,t){Re.push([e,t]),xe&&(we(),xe=!1)},Ce=!0,xe=!0,Se=[],Ie=[],Ee=null,Pe=ie,Ae={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{pt(e[0],e[1])}catch(e){}}))}},Oe=Ae,Re=[],ke=0,Me=[];function Te(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ne,this._lib=!1;var t=this._PSD=Oe;if(L&&(this._stackHolder=G(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==fe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,je(this,e)}const Ne={get:function(){var e=Oe,t=Ze;function r(r,n){var i=!e.global&&(e!==Oe||t!==Ze);const a=i&&!nt();var o=new Te(((t,o)=>{Le(this,new De(ht(r,e,i,a),ht(n,e,i,a),t,o,e))}));return L&&ze(o,this),o}return r.prototype=fe,r},set:function(e){f(this,"then",e&&e.prototype===fe?Ne:{get:function(){return e},set:Ne.set})}};function De(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function je(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ve();t&&"function"==typeof t.then?je(e,((e,r)=>{t instanceof Te?t._then(e,r):t.then(e,r)})):(e._state=!0,e._value=t,Fe(e)),r&&We()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(Ie.push(t),null===e._state){var r=e._lib&&Ve();t=Pe(t),e._state=!1,e._value=t,L&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,r){try{e.apply(null,void 0)}catch(e){}}((()=>{var r=m(t,"stack");t._promise=e,f(t,"stack",{get:()=>be?r&&(r.get?r.get.apply(t):r.value):e.stack})})),function(e){Se.some((t=>t._value===e._value))||Se.push(e)}(e),Fe(e),r&&We()}}function Fe(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Le(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===ke&&(++ke,_e((()=>{0==--ke&&Ye()}),[]))}function Le(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ke,_e(Ue,[r,e,t])}else e._listeners.push(t)}function Ue(e,t,r){try{Ee=t;var n,i=t._value;t._state?n=e(i):(Ie.length&&(Ie=[]),n=e(i),-1===Ie.indexOf(i)&&function(e){for(var t=Se.length;t;)if(Se[--t]._value===e._value)return void Se.splice(t,1)}(t)),r.resolve(n)}catch(e){r.reject(e)}finally{Ee=null,0==--ke&&Ye(),--r.psd.ref||r.psd.finalize()}}function $e(e,t,r){if(t.length===r)return t;var n="";if(!1===e._state){var i,a,o=e._value;null!=o?(i=o.name||"Error",a=o.message||o,n=V(o,0)):(i=o,a=""),t.push(i+(a?": "+a:"")+n)}return L&&((n=V(e._stackHolder,2))&&-1===t.indexOf(n)&&t.push(n),e._prev&&$e(e._prev,t,r)),t}function ze(e,t){var r=t?t._numPrev+1:0;r<100&&(e._prev=t,e._numPrev=r)}function Ge(){Ve()&&We()}function Ve(){var e=Ce;return Ce=!1,xe=!1,e}function We(){var e,t,r;do{for(;Re.length>0;)for(e=Re,Re=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(Re.length>0);Ce=!0,xe=!0}function Ye(){var e=Se;Se=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Me.slice(0),r=t.length;r;)t[--r]()}function He(e){return new Te(fe,!1,e)}function Ke(e,t){var r=Oe;return function(){var n=Ve(),i=Oe;try{return st(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(i,!1),n&&We()}}}c(Te.prototype,{then:Ne,_then:function(e,t){Le(this,new De(null,null,e,t,Oe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],r=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?r(e):He(e))):this.then(null,(e=>e&&e.name===t?r(e):He(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),He(t))))},stack:{get:function(){if(this._stack)return this._stack;try{be=!0;var e=$e(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{be=!1}}},timeout:function(e,t){return e<1/0?new Te(((r,n)=>{var i=setTimeout((()=>n(new ee.Timeout(t))),e);this.then(r,n).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Ae.env=ut(),c(Te,{all:function(){var e=B.apply(null,arguments).map(it);return new Te((function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(((i,a)=>Te.resolve(i).then((r=>{e[a]=r,--n||t(e)}),r)))}))},resolve:e=>{if(e instanceof Te)return e;if(e&&"function"==typeof e.then)return new Te(((t,r)=>{e.then(t,r)}));var t=new Te(fe,!0,e);return ze(t,Ee),t},reject:He,race:function(){var e=B.apply(null,arguments).map(it);return new Te(((t,r)=>{e.map((e=>Te.resolve(e).then(t,r)))}))},PSD:{get:()=>Oe,set:e=>Oe=e},totalEchoes:{get:()=>Ze},newPSD:tt,usePSD:lt,scheduler:{get:()=>_e,set:e=>{_e=e}},rejectionMapper:{get:()=>Pe,set:e=>{Pe=e}},follow:(e,t)=>new Te(((r,n)=>tt(((t,r)=>{var n=Oe;n.unhandleds=[],n.onunhandled=r,n.finalize=oe((function(){!function(e){Me.push((function t(){e(),Me.splice(Me.indexOf(t),1)})),++ke,_e((()=>{0==--ke&&Ye()}),[])}((()=>{0===this.unhandleds.length?t():r(this.unhandleds[0])}))}),n.finalize),e()}),t,r,n)))}),ve&&(ve.allSettled&&f(Te,"allSettled",(function(){const e=B.apply(null,arguments).map(it);return new Te((t=>{0===e.length&&t([]);let r=e.length;const n=new Array(r);e.forEach(((e,i)=>Te.resolve(e).then((e=>n[i]={status:"fulfilled",value:e}),(e=>n[i]={status:"rejected",reason:e})).then((()=>--r||t(n)))))}))})),ve.any&&"undefined"!=typeof AggregateError&&f(Te,"any",(function(){const e=B.apply(null,arguments).map(it);return new Te(((t,r)=>{0===e.length&&r(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach(((e,a)=>Te.resolve(e).then((e=>t(e)),(e=>{i[a]=e,--n||r(new AggregateError(i))}))))}))})));const qe={awaits:0,echoes:0,id:0};var Xe=0,Qe=[],Je=0,Ze=0,et=0;function tt(e,t,r,n){var i=Oe,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++et;var s=Ae.env;a.env=ye?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject,nthen:ft(s.nthen,a),gthen:ft(s.gthen,a)}:{},t&&o(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=lt(a,e,r,n);return 0===a.ref&&a.finalize(),u}function rt(){return qe.id||(qe.id=++Xe),++qe.awaits,qe.echoes+=100,qe.id}function nt(){return!!qe.awaits&&(0==--qe.awaits&&(qe.id=0),qe.echoes=100*qe.awaits,!0)}function it(e){return qe.echoes&&e&&e.constructor===ve?(rt(),e.then((e=>(nt(),e)),(e=>(nt(),dt(e))))):e}function at(e){++Ze,qe.echoes&&0!=--qe.echoes||(qe.echoes=qe.id=0),Qe.push(Oe),st(e,!0)}function ot(){var e=Qe[Qe.length-1];Qe.pop(),st(e,!1)}function st(e,t){var r=Oe;if((t?!qe.echoes||Je++&&e===Oe:!Je||--Je&&e===Oe)||ct(t?at.bind(null,e):ot),e!==Oe&&(Oe=e,r===Ae&&(Ae.env=ut()),ye)){var i=Ae.env.Promise,a=e.env;de.then=a.nthen,i.prototype.then=a.gthen,(r.global||e.global)&&(Object.defineProperty(n,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject,a.allSettled&&(i.allSettled=a.allSettled),a.any&&(i.any=a.any))}}function ut(){var e=n.Promise;return ye?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:de.then,gthen:e.prototype.then}:{}}function lt(e,t,r,n,i){var a=Oe;try{return st(e,!0),t(r,n,i)}finally{st(a,!1)}}function ct(e){ge.call(pe,e)}function ht(e,t,r,n){return"function"!=typeof e?e:function(){var i=Oe;r&&rt(),st(t,!0);try{return e.apply(this,arguments)}finally{st(i,!1),n&&ct(nt)}}}function ft(e,t){return function(r,n){return e.call(this,ht(r,t),ht(n,t))}}function pt(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(!1!==r)try{var i,a={promise:t,reason:e};if(n.document&&document.createEvent?((i=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),o(i,a)):n.CustomEvent&&o(i=new CustomEvent("unhandledrejection",{detail:a}),a),i&&n.dispatchEvent&&(dispatchEvent(i),!n.PromiseRejectionEvent&&n.onunhandledrejection))try{n.onunhandledrejection(i)}catch(e){}L&&i&&i.defaultPrevented}catch(e){}}-1===(""+ge).indexOf("[native code]")&&(rt=nt=ne);var dt=Te.reject;function mt(e,t,r,n){if(e.idbdb&&(e._state.openComplete||Oe.letThrough||e._vip)){var i=e._createTransaction(t,r,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e._close(),e.open().then((()=>mt(e,t,r,n)))):dt(i)}return i._promise(t,((e,t)=>tt((()=>(Oe.trans=i,n(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return dt(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return dt(new ee.DatabaseClosed);e.open().catch(ne)}return e._state.dbReadyPromise.then((()=>mt(e,t,r,n)))}const gt=String.fromCharCode(65535),vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),wt=bt,_t=bt,Ct=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function xt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const St={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function It(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=R(t))[e],t)}class Et{_trans(e,t,r){const n=this._tx||Oe.trans,i=this.name;function a(e,r,n){if(!n.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}const o=Ve();try{return n&&n.db===this.db?n===Oe.trans?n._promise(e,a,r):tt((()=>n._promise(e,a,r)),{trans:n,transless:Oe.transless||Oe}):mt(this.db,e,[this.name],a)}finally{o&&We()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(r&&this.db._maxKey!==gt)return this.where(r.name).equals(r.keyPath.map((t=>e[t])));const{idxByName:n}=this.schema,o=this.db._deps.indexedDB;function s(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[u,l]=t.reduce((([t,r],i)=>{const o=n[i],u=e[i];return[t||o,t||!o?xt(r,o&&o.multi?e=>{const t=C(e,i);return a(t)&&t.some((e=>s(u,e)))}:e=>s(u,C(e,i))):r]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):r?this.filter(l):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const r=Object.create(e.prototype);for(var n in t)if(l(t,n))try{r[n]=t[n]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){o(this,e)}))}add(e,t){const{auto:r,keyPath:n}=this.schema.primKey;let i=e;return n&&r&&(i=It(n)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?Te.reject(e.failures[0]):e.lastResult)).then((t=>{if(n)try{x(e,n,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);{const r=C(e,this.schema.primKey.keyPath);if(void 0===r)return dt(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?i(t).forEach((r=>{x(e,r,t[r])})):t(e,{value:e,primKey:r})}catch(e){}return this.where(":id").equals(r).modify(t)}}put(e,t){const{auto:r,keyPath:n}=this.schema.primKey;let i=e;return n&&r&&(i=It(n)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Te.reject(e.failures[0]):e.lastResult)).then((t=>{if(n)try{x(e,n,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Te.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:St}))).then((e=>e.numFailures?Te.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,r){const n=Array.isArray(t)?t:void 0,i=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:r,keyPath:a}=this.schema.primKey;if(a&&n)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const o=e.length;let s=a&&r?e.map(It(a)):e;return this.core.mutate({trans:t,type:"add",keys:n,values:s,wantResults:i}).then((({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return i?t:r;throw new Q(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,n)}))}))}bulkPut(e,t,r){const n=Array.isArray(t)?t:void 0,i=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:r,keyPath:a}=this.schema.primKey;if(a&&n)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const o=e.length;let s=a&&r?e.map(It(a)):e;return this.core.mutate({trans:t,type:"put",keys:n,values:s,wantResults:i}).then((({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return i?t:r;throw new Q(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,n)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:r,failures:n})=>{if(0===e)return r;throw new Q(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,n)}))}}function Pt(e){var t={},r=function(r,n){if(n){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return t[r].subscribe.apply(null,a),e}if("string"==typeof r)return t[r]};r.addEventType=s;for(var n=1,o=arguments.length;n<o;++n)s(arguments[n]);return r;function s(e,n,i){if("object"==typeof e)return u(e);n||(n=ce),i||(i=ne);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=n(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(n,i)}};return t[e]=r[e]=a,a}function u(e){i(e).forEach((function(t){var r=e[t];if(a(r))s(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new ee.InvalidArgument("Invalid event config");var n=s(t,ie,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function At(e,t){return p(t).from({prototype:e}),t}function Ot(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Rt(e,t){e.filter=xt(e.filter,t)}function kt(e,t,r){var n=e.replayFilter;e.replayFilter=n?()=>xt(n(),t()):t,e.justLimit=r&&!n}function Mt(e,t){if(e.isPrimKey)return t.primaryKey;const r=t.getIndexByKeyPath(e.index);if(!r)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Tt(e,t,r){const n=Mt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function Nt(e,t,r,n){const i=e.replayFilter?xt(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},o=(e,r,n)=>{if(!i||i(r,n,(e=>r.stop(e)),(e=>r.fail(e)))){var o=r.primaryKey,s=""+o;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(o)),l(a,s)||(a[s]=!0,t(e,r,n))}};return Promise.all([e.or._iterate(o,r),Dt(Tt(e,n,r),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Dt(Tt(e,n,r),xt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Dt(e,t,r,n){var i=Ke(n?(e,t,i)=>r(n(e),t,i):r);return e.then((e=>{if(e)return e.start((()=>{var r=()=>e.continue();t&&!t(e,(e=>r=e),(t=>{e.stop(t),r=ne}),(t=>{e.fail(t),r=ne}))||i(e.value,e,(e=>r=e)),r()}))}))}function jt(e,t){try{const r=Bt(e),n=Bt(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const r=e.length,n=t.length,i=r<n?r:n;for(let r=0;r<i;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return r===n?0:r<n?-1:1}(Ft(e),Ft(t));case"Array":return function(e,t){const r=e.length,n=t.length,i=r<n?r:n;for(let r=0;r<i;++r){const n=jt(e[r],t[r]);if(0!==n)return n}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function Bt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const r=T(e);return"ArrayBuffer"===r?"binary":r}function Ft(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Lt{_read(e,t){var r=this._ctx;return r.error?r.table._trans(null,dt.bind(null,r.error)):r.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,dt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=xt(t.algorithm,e)}_iterate(e,t){return Nt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&o(r,e),t._ctx=r,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((r=>Nt(t,e,r,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,r=t.table.core;if(Ot(t,!0))return r.count({trans:e,query:{index:Mt(t,r.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var n=0;return Nt(t,(()=>(++n,!1)),e,r).then((()=>n))})).then(e)}sortBy(e,t){const r=e.split(".").reverse(),n=r[0],i=r.length-1;function a(e,t){return t?a(e[r[t]],t-1):e[n]}var o="next"===this._ctx.dir?1:-1;function s(e,t){var r=a(e,i),n=a(t,i);return r<n?-o:r>n?o:0}return this.toArray((function(e){return e.sort(s)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Ot(t,!0)&&t.limit>0){const{valueMapper:r}=t,n=Mt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:n,range:t.range}}).then((({result:e})=>r?e.map(r):e))}{const r=[];return Nt(t,(e=>r.push(e)),e,t.table.core).then((()=>r))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Ot(t)?kt(t,(()=>{var t=e;return(e,r)=>0===t||(1===t?(--t,!1):(r((()=>{e.advance(t),t=0})),!1))})):kt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kt(this._ctx,(()=>{var t=e;return function(e,r,n){return--t<=0&&r(n),t>=0}}),!0),this}until(e,t){return Rt(this._ctx,(function(r,n,i){return!e(r.value)||(n(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,r;return Rt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,r=e,t.isMatch=xt(t.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,r){e(r.key,r)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,r){e(r.primaryKey,r)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.key)})).then((function(){return r})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Ot(t,!0)&&t.limit>0)return this._read((e=>{var r=Mt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return Rt(this._ctx,(function(e){var t=e.primaryKey.toString(),n=l(r,t);return r[t]=!0,!n})),this}modify(e){var t=this._ctx;return this._write((r=>{var n;if("function"==typeof e)n=e;else{var a=i(e),o=a.length;n=function(t){for(var r=!1,n=0;n<o;++n){var i=a[n],s=e[i];C(t,i)!==s&&(x(t,i,s),r=!0)}return r}}const s=t.table.core,{outbound:u,extractKey:l}=s.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let f=0;const p=[],d=(e,t)=>{const{failures:r,numFailures:n}=t;f+=e-n;for(let e of i(r))h.push(r[e])};return this.clone().primaryKeys().then((i=>{const a=o=>{const h=Math.min(c,i.length-o);return s.getMany({trans:r,keys:i.slice(o,o+h),cache:"immutable"}).then((f=>{const p=[],m=[],g=u?[]:null,v=[];for(let e=0;e<h;++e){const t=f[e],r={value:R(t),primKey:i[o+e]};!1!==n.call(r,r.value,r)&&(null==r.value?v.push(i[o+e]):u||0===jt(l(t),l(r.value))?(m.push(r.value),u&&g.push(i[o+e])):(v.push(i[o+e]),p.push(r.value)))}const y=Ot(t)&&t.limit===1/0&&("function"!=typeof e||e===Ut)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);d(p.length,e)}))).then((()=>(m.length>0||y&&"object"==typeof e)&&s.mutate({trans:r,type:"put",keys:g,values:m,criteria:y,changeSpec:"function"!=typeof e&&e}).then((e=>d(m.length,e))))).then((()=>(v.length>0||y&&e===Ut)&&s.mutate({trans:r,type:"delete",keys:v,criteria:y}).then((e=>d(v.length,e))))).then((()=>i.length>o+h&&a(o+c)))}))};return a(0).then((()=>{if(h.length>0)throw new X("Error modifying one or more objects",h,f,p);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Ot(e)&&(e.isPrimKey&&!_t||3===t.type)?this._write((r=>{const{primaryKey:n}=e.table.core.schema,i=t;return e.table.core.count({trans:r,query:{index:n,range:i}}).then((t=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then((({failures:e,lastResult:r,results:n,numFailures:i})=>{if(i)throw new X("Could not delete some values",Object.keys(e).map((t=>e[t])),t-i);return t-i}))))})):this.modify(Ut)}}const Ut=(e,t)=>t.value=null;function $t(e,t){return e<t?-1:e===t?0:1}function zt(e,t){return e>t?-1:e===t?0:1}function Gt(e,t,r){var n=e instanceof qt?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function Vt(e){return new e.Collection(e,(()=>Kt(""))).limit(0)}function Wt(e,t,r,n,i,a){for(var o=Math.min(e.length,n.length),s=-1,u=0;u<o;++u){var l=t[u];if(l!==n[u])return i(e[u],r[u])<0?e.substr(0,u)+r[u]+r.substr(u+1):i(e[u],n[u])<0?e.substr(0,u)+n[u]+r.substr(u+1):s>=0?e.substr(0,s)+t[s]+r.substr(s+1):null;i(e[u],l)<0&&(s=u)}return o<n.length&&"next"===a?e+r.substr(e.length):o<e.length&&"prev"===a?e.substr(0,r.length):s<0?null:e.substr(0,s)+n[s]+r.substr(s+1)}function Yt(e,t,r,n){var i,a,o,s,u,l,c,h=r.length;if(!r.every((e=>"string"==typeof e)))return Gt(e,"String expected.");function f(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),a=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o="next"===e?$t:zt;var t=r.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c="next"===e?"":n}f("next");var p=new e.Collection(e,(()=>Ht(s[0],u[h-1]+n)));p._ondirectionchange=function(e){f(e)};var d=0;return p._addAlgorithm((function(e,r,n){var i=e.key;if("string"!=typeof i)return!1;var f=a(i);if(t(f,u,d))return!0;for(var p=null,m=d;m<h;++m){var g=Wt(i,f,s[m],u[m],o,l);null===g&&null===p?d=m+1:(null===p||o(p,g)>0)&&(p=g)}return r(null!==p?function(){e.continue(p+c)}:n),!1})),p}function Ht(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Kt(e){return{type:1,lower:e,upper:e}}class qt{get Collection(){return this._ctx.table.db.Collection}between(e,t,r,n){r=!1!==r,n=!0===n;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?Vt(this):new this.Collection(this,(()=>Ht(e,t,!r,!n)))}catch(e){return Gt(this,vt)}}equals(e){return null==e?Gt(this,vt):new this.Collection(this,(()=>Kt(e)))}above(e){return null==e?Gt(this,vt):new this.Collection(this,(()=>Ht(e,void 0,!0)))}aboveOrEqual(e){return null==e?Gt(this,vt):new this.Collection(this,(()=>Ht(e,void 0,!1)))}below(e){return null==e?Gt(this,vt):new this.Collection(this,(()=>Ht(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Gt(this,vt):new this.Collection(this,(()=>Ht(void 0,e)))}startsWith(e){return"string"!=typeof e?Gt(this,"String expected."):this.between(e,e+gt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Yt(this,((e,t)=>0===e.indexOf(t[0])),[e],gt)}equalsIgnoreCase(e){return Yt(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=B.apply(j,arguments);return 0===e.length?Vt(this):Yt(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=B.apply(j,arguments);return 0===e.length?Vt(this):Yt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,gt)}anyOf(){const e=B.apply(j,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Gt(this,vt)}if(0===e.length)return Vt(this);const r=new this.Collection(this,(()=>Ht(e[0],e[e.length-1])));r._ondirectionchange=r=>{t="next"===r?this._ascending:this._descending,e.sort(t)};let n=0;return r._addAlgorithm(((r,i,a)=>{const o=r.key;for(;t(o,e[n])>0;)if(++n,n===e.length)return i(a),!1;return 0===t(o,e[n])||(i((()=>{r.continue(e[n])})),!1)})),r}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(j,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Gt(this,vt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const r=this._cmp,n=this._ascending,i=this._descending,a=this._min,o=this._max;if(0===e.length)return Vt(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&n(e[0],e[1])<=0)))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const s=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=n;function h(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let n=0,i=e.length;for(;n<i;++n){const i=e[n];if(r(t[0],i[1])<0&&r(t[1],i[0])>0){i[0]=a(i[0],t[0]),i[1]=o(i[1],t[1]);break}}return n===i&&e.push(t),e}),[]),l.sort(h)}catch(e){return Gt(this,vt)}let f=0;const p=u?e=>n(e,l[f][1])>0:e=>n(e,l[f][1])>=0,d=s?e=>i(e,l[f][0])>0:e=>i(e,l[f][0])>=0;let m=p;const g=new this.Collection(this,(()=>Ht(l[0][0],l[l.length-1][1],!s,!u)));return g._ondirectionchange=e=>{"next"===e?(m=p,c=n):(m=d,c=i),l.sort(h)},g._addAlgorithm(((e,t,r)=>{for(var i=e.key;m(i);)if(++f,f===l.length)return t(r),!1;return!!function(e){return!p(e)&&!d(e)}(i)||(0===this._cmp(i,l[f][1])||0===this._cmp(i,l[f][0])||t((()=>{c===n?e.continue(l[f][0]):e.continue(l[f][1])})),!1)})),g}startsWithAnyOf(){const e=B.apply(j,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Vt(this):this.inAnyRange(e.map((e=>[e,e+gt]))):Gt(this,"startsWithAnyOf() only works with strings")}}function Xt(e){return Ke((function(t){return Qt(t),e(t.target.error),!1}))}function Qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Jt=Pt(null,"storagemutated");class Zt{_lock(){return b(!Oe.global),++this._reculock,1!==this._reculock||Oe.global||(Oe.lockOwnerFor=this),this}_unlock(){if(b(!Oe.global),0==--this._reculock)for(Oe.global||(Oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{lt(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Oe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(r);case"MissingAPIError":throw new ee.MissingAPI(r.message,r);default:throw new ee.OpenFailed(r)}if(!this.active)throw new ee.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ke((t=>{Qt(t),this._reject(e.error)})),e.onabort=Ke((t=>{Qt(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Ke((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Jt.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,r){if("readwrite"===e&&"readwrite"!==this.mode)return dt(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new ee.TransactionInactive);if(this._locked())return new Te(((n,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,r).then(n,i)},Oe])}));if(r)return tt((()=>{var e=new Te(((e,r)=>{this._lock();const n=t(e,r,this);n&&n.then&&n.then(e,r)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var n=new Te(((e,r)=>{var n=t(e,r,this);n&&n.then&&n.then(e,r)}));return n._lib=!0,n}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const r=Te.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>r));else{t._waitingFor=r,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Te(((e,n)=>{r.then((r=>t._waitingQueue.push(Ke(e.bind(null,r)))),(e=>t._waitingQueue.push(Ke(n.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];const r=this.schema[e];if(!r)throw new ee.NotFound("Table "+e+" not part of transaction");const n=new this.db.Table(e,r,this);return n.core=this.db.core.table(e),t[e]=n,n}}function er(e,t,r,n,i,a,o){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:a,src:(r&&!o?"&":"")+(n?"*":"")+(i?"++":"")+tr(t)}}function tr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function rr(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:_(r,(e=>[e.name,e]))}}let nr=e=>{try{return e.only([[]]),nr=()=>[[]],[[]]}catch(e){return nr=()=>gt,gt}};function ir(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>C(t,e)}(e):t=>C(t,e)}function ar(e){return[].slice.call(e)}let or=0;function sr(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function ur(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:r,upper:n,lowerOpen:i,upperOpen:a}=e;return void 0===r?void 0===n?null:t.upperBound(n,!!a):void 0===n?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!a)}const{schema:i,hasGetAll:o}=function(e,t){const r=ar(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:r}=e,n=a(t),i=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:ir(t)},indexes:ar(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:r,multiEntry:n,keyPath:i}=e,s={name:t,compound:a(i),keyPath:i,unique:r,multiEntry:n,extractKey:ir(i)};return o[sr(i)]=s,s})),getIndexByKeyPath:e=>o[sr(e)]};return o[":id"]=s.primaryKey,null!=t&&(o[sr(t)]=s.primaryKey),s}))},hasGetAll:r.length>0&&"getAll"in t.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:r,keys:i,values:a,range:o}){return new Promise(((s,u)=>{s=Ke(s);const l=e.objectStore(t),c=null==l.keyPath,h="put"===r||"add"===r;if(!h&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);const{length:f}=i||a||{length:1};if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return s({numFailures:0,failures:{},results:[],lastResult:void 0});let p;const d=[],m=[];let g=0;const v=e=>{++g,Qt(e)};if("deleteRange"===r){if(4===o.type)return s({numFailures:g,failures:m,results:[],lastResult:void 0});3===o.type?d.push(p=l.clear()):d.push(p=l.delete(n(o)))}else{const[e,t]=h?c?[a,i]:[a,null]:[i,null];if(h)for(let n=0;n<f;++n)d.push(p=t&&void 0!==t[n]?l[r](e[n],t[n]):l[r](e[n])),p.onerror=v;else for(let t=0;t<f;++t)d.push(p=l[r](e[t])),p.onerror=v}const y=e=>{const t=e.target.result;d.forEach(((e,t)=>null!=e.error&&(m[t]=e.error))),s({numFailures:g,failures:m,results:"delete"===r?i:d.map((e=>e.result)),lastResult:t})};p.onerror=e=>{v(e),y(e)},p.onsuccess=y}))},getMany:({trans:e,keys:r})=>new Promise(((n,i)=>{n=Ke(n);const a=e.objectStore(t),o=r.length,s=new Array(o);let u,l=0,c=0;const h=e=>{const t=e.target;s[t._pos]=t.result,++c===l&&n(s)},f=Xt(i);for(let e=0;e<o;++e)null!=r[e]&&(u=a.get(r[e]),u._pos=e,u.onsuccess=h,u.onerror=f,++l);0===l&&n(s)})),get:({trans:e,key:r})=>new Promise(((n,i)=>{n=Ke(n);const a=e.objectStore(t).get(r);a.onsuccess=e=>n(e.target.result),a.onerror=Xt(i)})),query:function(e){return r=>new Promise(((i,a)=>{i=Ke(i);const{trans:o,values:s,limit:u,query:l}=r,c=u===1/0?void 0:u,{index:h,range:f}=l,p=o.objectStore(t),d=h.isPrimaryKey?p:p.index(h.name),m=n(f);if(0===u)return i({result:[]});if(e){const e=s?d.getAll(m,c):d.getAllKeys(m,c);e.onsuccess=e=>i({result:e.target.result}),e.onerror=Xt(a)}else{let e=0;const t=s||!("openKeyCursor"in d)?d.openCursor(m):d.openKeyCursor(m),r=[];t.onsuccess=n=>{const a=t.result;return a?(r.push(s?a.value:a.primaryKey),++e===u?i({result:r}):void a.continue()):i({result:r})},t.onerror=Xt(a)}}))}(o),openCursor:function({trans:e,values:r,query:i,reverse:a,unique:o}){return new Promise(((s,u)=>{s=Ke(s);const{index:l,range:c}=i,h=e.objectStore(t),f=l.isPrimaryKey?h:h.index(l.name),p=a?o?"prevunique":"prev":o?"nextunique":"next",d=r||!("openKeyCursor"in f)?f.openCursor(n(c),p):f.openKeyCursor(n(c),p);d.onerror=Xt(u),d.onsuccess=Ke((t=>{const r=d.result;if(!r)return void s(null);r.___id=++or,r.done=!1;const n=r.continue.bind(r);let i=r.continuePrimaryKey;i&&(i=i.bind(r));const a=r.advance.bind(r),o=()=>{throw new Error("Cursor not stopped")};r.trans=e,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=Ke(u),r.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},r.start=e=>{const t=new Promise(((e,t)=>{e=Ke(e),d.onerror=Xt(t),r.fail=t,r.stop=t=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=o,e(t)}})),s=()=>{if(d.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=Ke((e=>{d.onsuccess=s,s()})),r.continue=n,r.continuePrimaryKey=i,r.advance=a,s(),t},s(r)}),u)}))},count({query:e,trans:r}){const{index:i,range:a}=e;return new Promise(((e,o)=>{const s=r.objectStore(t),u=i.isPrimaryKey?s:s.index(i.name),l=n(a),c=l?u.count(l):u.count();c.onsuccess=Ke((t=>e(t.target.result))),c.onerror=Xt(o)}))}}}(e))),u={};return s.forEach((e=>u[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:nr(t),schema:i}}function lr({_novip:e},t){const r=t.db,n=function(e,t,{IDBKeyRange:r,indexedDB:n},i){const a=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(ur(t,r,i),e.dbcore);return{dbcore:a}}(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach((t=>{const r=t.name;e.core.schema.tables.some((e=>e.name===r))&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))}))}function cr({_novip:e},t,r,n){r.forEach((r=>{const i=n[r];t.forEach((t=>{const n=m(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,r,{get(){return this.table(r)},set(e){h(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,i))}))}))}function hr({_novip:e},t){t.forEach((t=>{for(let r in t)t[r]instanceof e.Table&&delete t[r]}))}function fr(e,t){return e._cfg.version-t._cfg.version}function pr(e,t,r,n){const a=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,a);o.create(r),o._completion.catch(n);const s=o._reject.bind(o),u=Oe.transless||Oe;tt((()=>{Oe.trans=o,Oe.transless=u,0===t?(i(a).forEach((e=>{mr(r,e,a[e].primKey,a[e].indexes)})),lr(e,r),Te.follow((()=>e.on.populate.fire(o))).catch(s)):function({_novip:e},t,r,n){const a=[],o=e._versions;let s=e._dbSchema=vr(0,e.idbdb,n),u=!1;return o.filter((e=>e._cfg.version>=t)).forEach((o=>{a.push((()=>{const a=s,l=o._cfg.dbschema;yr(e,a,n),yr(e,l,n),s=e._dbSchema=l;const c=dr(a,l);c.add.forEach((e=>{mr(n,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=n.objectStore(e.name);e.add.forEach((e=>gr(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),gr(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=o._cfg.contentUpgrade;if(h&&o._cfg.version>t){lr(e,n),r._memoizedTables={},u=!0;let t=S(l);c.del.forEach((e=>{t[e]=a[e]})),hr(e,[e.Transaction.prototype]),cr(e,[e.Transaction.prototype],i(t),t),r.schema=t;const o=F(h);let s;o&&rt();const f=Te.follow((()=>{if(s=h(r),s&&o){var e=nt.bind(null,null);s.then(e,e)}}));return s&&"function"==typeof s.then?Te.resolve(s):f.then((()=>s))}})),a.push((t=>{u&&wt||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((r=>null==e[r]&&t.db.deleteObjectStore(r)))}(o._cfg.dbschema,t),hr(e,[e.Transaction.prototype]),cr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}))})),function e(){return a.length?Te.resolve(a.shift()(r.idbtrans)).then(e):Te.resolve()}().then((()=>{var e,t;t=n,i(e=s).forEach((r=>{t.db.objectStoreNames.contains(r)||mr(t,r,e[r].primKey,e[r].indexes)}))}))}(e,t,o,r).catch(s)}))}function dr(e,t){const r={del:[],add:[],change:[]};let n;for(n in e)t[n]||r.del.push(n);for(n in t){const i=e[n],a=t[n];if(i){const e={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!bt)e.recreate=!0,r.change.push(e);else{const t=i.idxByName,n=a.idxByName;let o;for(o in t)n[o]||e.del.push(o);for(o in n){const r=t[o],i=n[o];r?r.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&r.change.push(e)}}else r.add.push([n,a])}return r}function mr(e,t,r,n){const i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach((e=>gr(i,e))),i}function gr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function vr(e,t,r){const n={};return v(t.objectStoreNames,0).forEach((e=>{const t=r.objectStore(e);let i=t.keyPath;const a=er(tr(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const r=t.index(t.indexNames[e]);i=r.keyPath;var s=er(r.name,i,!!r.unique,!!r.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(s)}n[e]=rr(e,a,o)})),n}function yr({_novip:e},t,r){const i=r.db.objectStoreNames;for(let n=0;n<i.length;++n){const a=i[n],o=r.objectStore(a);e._hasGetAll="getAll"in o;for(let e=0;e<o.indexNames.length;++e){const r=o.indexNames[e],n=o.index(r).keyPath,i="string"==typeof n?n:"["+v(n).join("+")+"]";if(t[a]){const e=t[a].idxByName[i];e&&(e.name=r,delete t[a].idxByName[i],t[a].idxByName[r]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class br{_parseStoresSpec(e,t){i(e).forEach((r=>{if(null!==e[r]){var n=e[r].split(",").map(((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return er(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(n),0===t)})),i=n.shift();if(i.multi)throw new ee.Schema("Primary key cannot be multi-valued");n.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[r]=rr(r,i,n)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;const r=t._versions,n={};let a={};return r.forEach((e=>{o(n,e._cfg.storesSource),a=e._cfg.dbschema={},e._parseStoresSpec(n,a)})),t._dbSchema=a,hr(t,[t._allTables,t,t.Transaction.prototype]),cr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(a),a),t._storeNames=i(a),this}upgrade(e){return this._cfg.contentUpgrade=he(this._cfg.contentUpgrade||ne,e),this}}function wr(e,t){let r=e._dbNamesDB;return r||(r=e._dbNamesDB=new zr("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function _r(e){return e&&"function"==typeof e.databases}function Cr(e){return tt((function(){return Oe.letThrough=!0,e()}))}function xr(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Sr(e){var t=t=>e.next(t),r=i(t),n=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(r,n):a(o)?Promise.all(o).then(r,n):r(o)}}return i(t)()}function Ir(e,t,r){var n=arguments.length;if(n<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];r=i.pop();var a=E(i);return[e,a,r]}function Er(e,t,r,n,i){return Te.resolve().then((()=>{const a=Oe.transless||Oe,o=e._createTransaction(t,r,e._dbSchema,n),s={trans:o,transless:a};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(n){return n.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e._close(),e.open().then((()=>Er(e,t,r,null,i)))):dt(n)}const u=F(i);let l;u&&rt();const c=Te.follow((()=>{if(l=i.call(o,o),l)if(u){var e=nt.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=Sr(l))}),s);return(l&&"function"==typeof l.then?Te.resolve(l).then((e=>o.active?e:dt(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):c.then((()=>l))).then((e=>(n&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),dt(e))))}))}function Pr(e,t,r){const n=a(e)?e.slice():[e];for(let e=0;e<r;++e)n.push(t);return n}const Ar={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const r=e.table(t),{schema:n}=r,i={},a=[];function o(e,t,r){const n=sr(e),s=i[n]=i[n]||[],u=null==e?0:"string"==typeof e?1:e.length,l=t>0,c={...r,isVirtual:l,keyTail:t,keyLength:u,extractKey:ir(e),unique:!l&&r.unique};return s.push(c),c.isPrimaryKey||a.push(c),u>1&&o(2===u?e[0]:e.slice(0,u-1),t+1,r),s.sort(((e,t)=>e.keyTail-t.keyTail)),c}const s=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[s];for(const e of n.indexes)o(e.keyPath,0,e);function u(t){const r=t.query.index;return r.isVirtual?{...t,query:{index:r,range:(n=t.query.range,i=r.keyTail,{type:1===n.type?2:n.type,lower:Pr(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Pr(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var n,i}const l={...r,schema:{...n,primaryKey:s,indexes:a,getIndexByKeyPath:function(e){const t=i[sr(e)];return t&&t[0]}},count:e=>r.count(u(e)),query:e=>r.query(u(e)),openCursor(t){const{keyTail:n,isVirtual:i,keyLength:a}=t.query.index;return i?r.openCursor(u(t)).then((r=>r&&function(r){const i=Object.create(r,{continue:{value:function(i){null!=i?r.continue(Pr(i,t.reverse?e.MAX_KEY:e.MIN_KEY,n)):t.unique?r.continue(r.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,n)):r.continue()}},continuePrimaryKey:{value(t,i){r.continuePrimaryKey(Pr(t,e.MAX_KEY,n),i)}},primaryKey:{get:()=>r.primaryKey},key:{get(){const e=r.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:()=>r.value}});return i}(r))):r.openCursor(t)}};return l}}}};function Or(e,t,r,n){return r=r||{},n=n||"",i(e).forEach((i=>{if(l(t,i)){var a=e[i],o=t[i];if("object"==typeof a&&"object"==typeof o&&a&&o){const e=T(a);e!==T(o)?r[n+i]=t[i]:"Object"===e?Or(a,o,r,n+i+"."):a!==o&&(r[n+i]=t[i])}else a!==o&&(r[n+i]=t[i])}else r[n+i]=void 0})),i(t).forEach((i=>{l(e,i)||(r[n+i]=t[i])})),r}const Rr={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const r=e.table(t),{primaryKey:n}=r.schema,i={...r,mutate(e){const i=Oe.trans,{deleting:a,creating:o,updating:s}=i.table(t).hook;switch(e.type){case"add":if(o.fire===ne)break;return i._promise("readwrite",(()=>u(e)),!0);case"put":if(o.fire===ne&&s.fire===ne)break;return i._promise("readwrite",(()=>u(e)),!0);case"delete":if(a.fire===ne)break;return i._promise("readwrite",(()=>u(e)),!0);case"deleteRange":if(a.fire===ne)break;return i._promise("readwrite",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return r.mutate(e);function u(e){const t=Oe.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(n,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,r){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}(r,e,i).then((u=>{const c=i.map(((r,i)=>{const c=u[i],h={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(h,r,c,t);else if("add"===e.type||void 0===c){const a=o.fire.call(h,r,e.values[i],t);null==r&&null!=a&&(r=a,e.keys[i]=r,n.outbound||x(e.values[i],n.keyPath,r))}else{const n=Or(c,e.values[i]),a=s.fire.call(h,n,r,c,t);if(a){const t=e.values[i];Object.keys(a).forEach((e=>{l(t,e)?t[e]=a[e]:x(t,e,a[e])}))}}return h}));return r.mutate(e).then((({failures:t,results:r,numFailures:n,lastResult:a})=>{for(let n=0;n<i.length;++n){const a=r?r[n]:i[n],o=c[n];null==a?o.onerror&&o.onerror(t[n]):o.onsuccess&&o.onsuccess("put"===e.type&&u[n]?e.values[n]:a)}return{failures:t,results:r,numFailures:n,lastResult:a}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,i){return r.query({trans:e,values:!1,query:{index:n,range:t},limit:i}).then((({result:r})=>u({type:"delete",keys:r,trans:e}).then((n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:r[r.length-1],lowerOpen:!0},i)))))}}};return i}})};function kr(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;const n=[];for(let i=0,a=0;i<t.keys.length&&a<e.length;++i)0===jt(t.keys[i],e[a])&&(n.push(r?R(t.values[i]):t.values[i]),++a);return n.length===e.length?n:null}catch(e){return null}}const Mr={stack:"dbcore",level:-1,create:e=>({table:t=>{const r=e.table(t);return{...r,getMany:e=>{if(!e.cache)return r.getMany(e);const t=kr(e.keys,e.trans._cache,"clone"===e.cache);return t?Te.resolve(t):r.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?R(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),r.mutate(e))}}})};function Tr(e){return!("from"in e)}const Nr=function(e,t){if(!this){const t=new Nr;return e&&"d"in e&&o(t,e),t}o(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Dr(e,t,r){const n=jt(t,r);if(isNaN(n))return;if(n>0)throw RangeError();if(Tr(e))return o(e,{from:t,to:r,d:1});const i=e.l,a=e.r;if(jt(r,e.from)<0)return i?Dr(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Lr(e);if(jt(t,e.to)>0)return a?Dr(a,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Lr(e);jt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),jt(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&jr(e,i),a&&s&&jr(e,a)}function jr(e,t){Tr(t)||function e(t,{from:r,to:n,l:i,r:a}){Dr(t,r,n),i&&e(t,i),a&&e(t,a)}(e,t)}function Br(e,t){const r=Fr(t);let n=r.next();if(n.done)return!1;let i=n.value;const a=Fr(e);let o=a.next(i.from),s=o.value;for(;!n.done&&!o.done;){if(jt(s.from,i.to)<=0&&jt(s.to,i.from)>=0)return!0;jt(i.from,s.from)<0?i=(n=r.next(s.from)).value:s=(o=a.next(i.from)).value}return!1}function Fr(e){let t=Tr(e)?null:{s:0,n:e};return{next(e){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&jt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||jt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Lr(e){var t,r;const n=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const t="r"===i?"l":"r",r={...e},n=e[i];e.from=n.from,e.to=n.to,e[i]=n[i],r[i]=n[t],e[t]=r,r.d=Ur(r)}e.d=Ur(e)}function Ur({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}c(Nr.prototype,{add(e){return jr(this,e),this},addKey(e){return Dr(this,e,e),this},addKeys(e){return e.forEach((e=>Dr(this,e,e))),this},[N](){return Fr(this)}});const $r={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,r=new Nr(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const o=e.table(n),{schema:s}=o,{primaryKey:u}=s,{extractKey:l,outbound:c}=u,h={...o,mutate:e=>{const i=e.trans,u=i.mutatedParts||(i.mutatedParts={}),l=e=>{const r=`idb://${t}/${n}/${e}`;return u[r]||(u[r]=new Nr)},c=l(""),h=l(":dels"),{type:f}=e;let[p,d]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const m=e.trans._cache;return o.mutate(e).then((e=>{if(a(p)){"delete"!==f&&(p=e.results),c.addKeys(p);const t=kr(p,m);t||"add"===f||h.addKeys(p),(t||d)&&function(e,t,r,n){t.indexes.forEach((function(t){const i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}const s=e=>t.multiEntry&&a(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(r||n).forEach(((e,t)=>{const i=r&&o(r[t]),a=n&&o(n[t]);0!==jt(i,a)&&(null!=i&&s(i),null!=a&&s(a))}))}))}(l,s,t,d)}else if(p){const e={from:p.lower,to:p.upper};h.add(e),c.add(e)}else c.add(r),h.add(r),s.indexes.forEach((e=>l(e.name).add(r)));return e}))}},f=({query:{index:t,range:r}})=>{var n,i;return[t,new Nr(null!==(n=r.lower)&&void 0!==n?n:e.MIN_KEY,null!==(i=r.upper)&&void 0!==i?i:e.MAX_KEY)]},p={get:e=>[u,new Nr(e.key)],getMany:e=>[u,(new Nr).addKeys(e.keys)],count:f,query:f,openCursor:f};return i(p).forEach((e=>{h[e]=function(i){const{subscr:a}=Oe;if(a){const s=e=>{const r=`idb://${t}/${n}/${e}`;return a[r]||(a[r]=new Nr)},u=s(""),h=s(":dels"),[f,d]=p[e](i);if(s(f.name||"").add(d),!f.isPrimaryKey){if("count"!==e){const t="query"===e&&c&&i.values&&o.query({...i,values:!1});return o[e].apply(this,arguments).then((r=>{if("query"===e){if(c&&i.values)return t.then((({result:e})=>(u.addKeys(e),r)));const e=i.values?r.result.map(l):r.result;i.values?u.addKeys(e):h.addKeys(e)}else if("openCursor"===e){const e=r,t=i.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(t&&u.addKey(e.primaryKey),e.value)}})}return r}))}h.add(r)}}return o[e].apply(this,arguments)}})),h}}}};class zr{constructor(e,t){this._middlewares={},this.verno=0;const r=zr.dependencies;this._options=t={addons:zr.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:n}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ne,dbReadyPromise:null,cancelOpen:ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new Te((e=>{i.dbReadyResolve=e})),i.openCanceller=new Te(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=Pt(this,"populate","blocked","versionchange","close",{ready:[he,ne]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,r)=>{zr.vip((()=>{const n=this._state;if(n.openComplete)n.dbOpenError||Te.resolve().then(t),r&&e(t);else if(n.onReadyBeingFired)n.onReadyBeingFired.push(t),r&&e(t);else{e(t);const n=this;r||e((function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)}))}}))})),this.Collection=(a=this,At(Lt.prototype,(function(e,t){this.db=a;let r=St,n=null;if(t)try{r=t()}catch(e){n=e}const i=e._ctx,o=i.table,s=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:s!==ie?s:null}}))),this.Table=function(e){return At(Et.prototype,(function(t,r,n){this.db=e,this._tx=n,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:Pt(null,{creating:[se,ne],reading:[ae,ie],updating:[le,ne],deleting:[ue,ne]})}))}(this),this.Transaction=function(e){return At(Zt.prototype,(function(t,r,n,i,a){this.db=e,this.mode=t,this.storeNames=r,this.schema=n,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Pt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),dt(e)}))}))}(this),this.Version=function(e){return At(br.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return At(qt.prototype,(function(t,r,n){this.db=e,this._ctx={table:t,index:":id"===r?null:r,or:n};const i=e._deps.indexedDB;if(!i)throw new ee.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion,this.close()})),this.on("blocked",(e=>{!e.newVersion||(e.newVersion,e.oldVersion)})),this._maxKey=nr(t.IDBKeyRange),this._createTransaction=(e,t,r,n)=>new this.Transaction(e,t,r,this._options.chromeTransactionDurability,n),this._fireOnBlocked=e=>{this.on("blocked").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Ar),this.use(Rr),this.use($r),this.use(Mr),this.vip=Object.create(this,{_vip:{value:!0}}),n.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var r=t.filter((t=>t._cfg.version===e))[0];return r||(r=new this.Version(e),t.push(r),t.sort(fr),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?e():new Te(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(ne)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:r,name:n}){n&&this.unuse({stack:e,name:n});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==r?10:r,name:n}),i.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>r?e.create!==r:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:r}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?dt(t.dbOpenError):e));L&&(t.openCanceller._stackHolder=G()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const n=t.openCanceller;function a(){if(t.openCanceller!==n)throw new ee.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,u=!1;return Te.race([n,("undefined"==typeof navigator?Te.resolve():xr()).then((()=>new Te(((n,o)=>{if(a(),!r)throw new ee.MissingAPI;const l=e.name,c=t.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!c)throw new ee.MissingAPI;c.onerror=Xt(o),c.onblocked=Ke(e._fireOnBlocked),c.onupgradeneeded=Ke((n=>{if(s=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=Qt,s.abort(),c.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=Ke((()=>{o(new ee.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{s.onerror=Xt(o);var i=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;u=i<1,e._novip.idbdb=c.result,pr(e,i/10,s,o)}}),o),c.onsuccess=Ke((()=>{s=null;const r=e._novip.idbdb=c.result,a=v(r.objectStoreNames);if(a.length>0)try{const n=r.transaction(1===(o=a).length?o[0]:o,"readonly");t.autoSchema?function({_novip:e},t,r){e.verno=t.version/10;const n=e._dbSchema=vr(0,t,r);e._storeNames=v(t.objectStoreNames,0),cr(e,[e._allTables],i(n),n)}(e,r,n):(yr(e,e._dbSchema,n),function(e,t){const r=dr(vr(0,e.idbdb,t),e._dbSchema);r.add.length||r.change.some((e=>e.add.length||e.change.length))}(e,n)),lr(e,n)}catch(e){}var o;yt.push(e),r.onversionchange=Ke((r=>{t.vcFired=!0,e.on("versionchange").fire(r)})),r.onclose=Ke((t=>{e.on("close").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},r){!_r(e)&&"__dbnames"!==r&&wr(e,t).put({name:r}).catch(ne)}(e._deps,l),n()}),o)}))))]).then((()=>(a(),t.onReadyBeingFired=[],Te.resolve(Cr((()=>e.on.ready.fire(e.vip)))).then((function r(){if(t.onReadyBeingFired.length>0){let n=t.onReadyBeingFired.reduce(he,ne);return t.onReadyBeingFired=[],Te.resolve(Cr((()=>n(e.vip)))).then(r)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((r=>{t.dbOpenError=r;try{s&&s.abort()}catch(e){}return n===t.openCanceller&&e._close(),dt(r)})).finally((()=>{t.openComplete=!0,o()}))}(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Te((t=>{e.dbReadyResolve=t})),e.openCanceller=new Te(((t,r)=>{e.cancelOpen=r}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Te(((r,n)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Ke((()=>{!function({indexedDB:e,IDBKeyRange:t},r){!_r(e)&&"__dbnames"!==r&&wr(e,t).delete(r).catch(ne)}(this._deps,this.name),r()})),e.onerror=Xt(n),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return i(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Ir.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,r){let n=Oe.trans;n&&n.db===this&&-1===e.indexOf("!")||(n=null);const i=-1!==e.indexOf("?");let a,o;e=e.replace("!","").replace("?","");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)a="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new ee.InvalidArgument("Invalid transaction mode: "+e);a="readwrite"}if(n){if("readonly"===n.mode&&"readwrite"===a){if(!i)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&o.forEach((e=>{if(n&&-1===n.storeNames.indexOf(e)){if(!i)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");n=null}})),i&&n&&!n.active&&(n=null)}}catch(e){return n?n._promise(null,((t,r)=>{r(e)})):dt(e)}const s=Er.bind(null,this,a,o,n,r);return n?n._promise(a,s,"lock"):Oe.trans?lt(Oe.transless,(()=>this._whenReady(s))):this._whenReady(s)}table(e){if(!l(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Gr="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Vr{constructor(e){this._subscribe=e}subscribe(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})}[Gr](){return this}}function Wr(e,t){return i(t).forEach((r=>{jr(e[r]||(e[r]=new Nr),t[r])})),e}function Yr(e){return new Vr((t=>{const r=F(e);let n=!1,a={},o={};const s={get closed(){return n},unsubscribe:()=>{n=!0,Jt.storagemutated.unsubscribe(h)}};t.start&&t.start(s);let u=!1,l=!1;function c(){return i(o).some((e=>a[e]&&Br(a[e],o[e])))}const h=e=>{Wr(a,e),c()&&f()},f=()=>{if(u||n)return;a={};const i={},p=function(t){r&&rt();const n=()=>tt(e,{subscr:t,trans:null}),i=Oe.trans?lt(Oe.transless,n):n();return r&&i.then(nt,nt),i}(i);l||(Jt("storagemutated",h),l=!0),u=!0,Promise.resolve(p).then((e=>{u=!1,n||(c()?f():(a={},o=i,t.next&&t.next(e)))}),(e=>{u=!1,t.error&&t.error(e),s.unsubscribe()}))};return f(),s}))}let Hr;try{Hr={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(n){Hr={indexedDB:null,IDBKeyRange:null}}const Kr=zr;function qr(e){let t=Xr;try{Xr=!0,Jt.storagemutated.fire(e)}finally{Xr=t}}c(Kr,{...re,delete:e=>new Kr(e,{addons:[]}).delete(),exists:e=>new Kr(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return _r(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>"__dbnames"!==e)))):wr(e,t).toCollection().primaryKeys()}(Kr.dependencies).then(e)}catch(e){return dt(new ee.MissingAPI)}},defineClass:()=>function(e){o(this,e)},ignoreTransaction:e=>Oe.trans?lt(Oe.transless,e):e(),vip:Cr,async:function(e){return function(){try{var t=Sr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Te.resolve(t)}catch(e){return dt(e)}}},spawn:function(e,t,r){try{var n=Sr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:Te.resolve(n)}catch(e){return dt(e)}},currentTransaction:{get:()=>Oe.trans||null},waitFor:function(e,t){const r=Te.resolve("function"==typeof e?Kr.ignoreTransaction(e):e).timeout(t||6e4);return Oe.trans?Oe.trans.waitFor(r):r},Promise:Te,debug:{get:()=>L,set:e=>{U(e,"dexie"===e?()=>!0:Ct)}},derive:p,extend:o,props:c,override:y,Events:Pt,on:Jt,liveQuery:Yr,extendObservabilitySet:Wr,getByKeyPath:C,setByKeyPath:x,delByKeyPath:function(e,t){"string"==typeof t?x(e,t,void 0):"length"in t&&[].map.call(t,(function(t){x(e,t,void 0)}))},shallowClone:S,deepClone:R,getObjectDiff:Or,cmp:jt,asap:w,minKey:-1/0,addons:[],connections:yt,errnames:J,dependencies:Hr,semVer:"3.2.2",version:"3.2.2".split(".").map((e=>parseInt(e))).reduce(((e,t,r)=>e+t/Math.pow(10,2*r)))}),Kr.maxKey=nr(Kr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Jt("storagemutated",(e=>{if(!Xr){let t;bt?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Xr=!0,dispatchEvent(t),Xr=!1}})),addEventListener("x-storagemutated-1",(({detail:e})=>{Xr||qr(e)})));let Xr=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel("x-storagemutated-1");Jt("storagemutated",(t=>{Xr||e.postMessage(t)})),e.onmessage=e=>{e.data&&qr(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Jt("storagemutated",(e=>{try{Xr||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:"x-storagemutated-1",changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if("x-storagemutated-1"===e.key){const t=JSON.parse(e.newValue);t&&qr(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&"x-storagemutated-1"===e.type&&qr(e.changedParts)}))}Te.rejectionMapper=function(e,t){if(!e||e instanceof K||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var r=new te[e.name](t||e.message,e);return"stack"in e&&f(r,"stack",{get:function(){return this.inner.stack}}),r},U(L,Ct)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n={};(()=>{"use strict";r.d(n,{K:()=>Ss});const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.thrown"),o=e=>"object"==typeof e&&null!==e||"function"==typeof e,s=new Map([["proxy",{canHandle:t=>o(t)&&t[e],serialize(e){const{port1:t,port2:r}=new MessageChannel;return u(e,t),[r,[r]]},deserialize:e=>(e.start(),c(e))}],["throw",{canHandle:e=>o(e)&&a in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(t,r=self){r.addEventListener("message",(function n(i){if(!i||!i.data)return;const{id:o,type:s,path:c}=Object.assign({path:[]},i.data),h=(i.data.argumentList||[]).map(v);let f;try{const r=c.slice(0,-1).reduce(((e,t)=>e[t]),t),n=c.reduce(((e,t)=>e[t]),t);switch(s){case"GET":f=n;break;case"SET":r[c.slice(-1)[0]]=v(i.data.value),f=!0;break;case"APPLY":f=n.apply(r,h);break;case"CONSTRUCT":f=function(t){return Object.assign(t,{[e]:!0})}(new n(...h));break;case"ENDPOINT":{const{port1:e,port2:r}=new MessageChannel;u(t,r),f=m(e,[e])}break;case"RELEASE":f=void 0;break;default:return}}catch(e){f={value:e,[a]:0}}Promise.resolve(f).catch((e=>({value:e,[a]:0}))).then((e=>{const[t,i]=g(e);r.postMessage(Object.assign(Object.assign({},t),{id:o}),i),"RELEASE"===s&&(r.removeEventListener("message",n),l(r))}))})),r.start&&r.start()}function l(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function c(e,t){return f(e,[],t)}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function f(e,r=[],n=function(){}){let a=!1;const o=new Proxy(n,{get(t,n){if(h(a),n===i)return()=>y(e,{type:"RELEASE",path:r.map((e=>e.toString()))}).then((()=>{l(e),a=!0}));if("then"===n){if(0===r.length)return{then:()=>o};const t=y(e,{type:"GET",path:r.map((e=>e.toString()))}).then(v);return t.then.bind(t)}return f(e,[...r,n])},set(t,n,i){h(a);const[o,s]=g(i);return y(e,{type:"SET",path:[...r,n].map((e=>e.toString())),value:o},s).then(v)},apply(n,i,o){h(a);const s=r[r.length-1];if(s===t)return y(e,{type:"ENDPOINT"}).then(v);if("bind"===s)return f(e,r.slice(0,-1));const[u,l]=p(o);return y(e,{type:"APPLY",path:r.map((e=>e.toString())),argumentList:u},l).then(v)},construct(t,n){h(a);const[i,o]=p(n);return y(e,{type:"CONSTRUCT",path:r.map((e=>e.toString())),argumentList:i},o).then(v)}});return o}function p(e){const t=e.map(g);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const d=new WeakMap;function m(e,t){return d.set(e,t),e}function g(e){for(const[t,r]of s)if(r.canHandle(e)){const[n,i]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:e},d.get(e)||[]]}function v(e){switch(e.type){case"HANDLER":return s.get(e.name).deserialize(e.value);case"RAW":return e.value}}function y(e,t,r){return new Promise((n=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===i&&(e.removeEventListener("message",t),n(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),r)}))}const b=ReactDOM;var w=r.n(b),_=r(7363),C=r.n(_),x=r(1688),S=r(2798);let I=function(e){e()};const E=()=>I,P=C().createContext(null);function A(){return(0,_.useContext)(P)}const O=()=>{throw new Error("uSES not initialized!")};let R=O;const k=(e,t)=>e===t;function M(e=P){const t=e===P?A:()=>(0,_.useContext)(e);return function(e,r=k){const{store:n,subscription:i,getServerState:a}=t(),o=R(i.addNestedSub,n.getState,a||n.getState,e,r);return(0,_.useDebugValue)(o),o}}const T=M();function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}function D(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var j=r(8679),B=r.n(j),F=r(2973);const L=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function U(e,t,r,n,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let s,u,l,c,h,f=!1;return function(p,d){return f?function(f,p){const d=!a(p,u),m=!i(f,s);return s=f,u=p,d&&m?(l=e(s,u),t.dependsOnOwnProps&&(c=t(n,u)),h=r(l,c,u),h):d?(e.dependsOnOwnProps&&(l=e(s,u)),t.dependsOnOwnProps&&(c=t(n,u)),h=r(l,c,u),h):m?function(){const t=e(s,u),n=!o(t,l);return l=t,n&&(h=r(l,c,u)),h}():h}(p,d):(s=p,u=d,l=e(s,u),c=t(n,u),h=r(l,c,u),f=!0,h)}}function $(e){return function(t){const r=e(t);function n(){return r}return n.dependsOnOwnProps=!1,n}}function z(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function G(e,t){return function(t,{displayName:r}){const n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=z(e);let i=n(t,r);return"function"==typeof i&&(n.mapToProps=i,n.dependsOnOwnProps=z(i),i=n(t,r)),i},n}}function V(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function W(e,t,r){return N({},r,e,t)}const Y={notify(){},get:()=>[]};function H(e,t){let r,n=Y;function i(){o.onStateChange&&o.onStateChange()}function a(){r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){const e=E();let t=null,r=null;return{clear(){t=null,r=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],r=t;for(;r;)e.push(r),r=r.next;return e},subscribe(e){let n=!0,i=r={callback:e,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){n&&null!==t&&(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const o={addNestedSub:function(e){return a(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(r)},trySubscribe:a,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=Y)},getListeners:()=>n};return o}const K="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?_.useLayoutEffect:_.useEffect;function q(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function X(e,t){if(q(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!q(e[r[n]],t[r[n]]))return!1;return!0}const Q=["reactReduxForwardedRef"];let J=O;const Z=[null,null];function ee(e,t,r,n,i,a){e.current=n,r.current=!1,i.current&&(i.current=null,a())}function te(e,t){return e===t}const re=function(e,t,r,{pure:n,areStatesEqual:i=te,areOwnPropsEqual:a=X,areStatePropsEqual:o=X,areMergedPropsEqual:s=X,forwardRef:u=!1,context:l=P}={}){const c=l,h=function(e){return e?"function"==typeof e?G(e):V(e,"mapStateToProps"):$((()=>({})))}(e),f=function(e){return e&&"object"==typeof e?$((t=>function(e,t){const r={};for(const n in e){const i=e[n];"function"==typeof i&&(r[n]=(...e)=>t(i(...e)))}return r}(e,t))):e?"function"==typeof e?G(e):V(e,"mapDispatchToProps"):$((e=>({dispatch:e})))}(t),p=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:r,areMergedPropsEqual:n}){let i,a=!1;return function(t,r,o){const s=e(t,r,o);return a?n(s,i)||(i=s):(a=!0,i=s),i}}}(e):V(e,"mergeProps"):()=>W}(r),d=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",r=`Connect(${t})`,n={shouldHandleStateChanges:d,displayName:r,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:s};function l(t){const[r,i,a]=(0,_.useMemo)((()=>{const{reactReduxForwardedRef:e}=t,r=D(t,Q);return[t.context,e,r]}),[t]),o=(0,_.useMemo)((()=>r&&r.Consumer&&(0,F.isContextConsumer)(C().createElement(r.Consumer,null))?r:c),[r,c]),s=(0,_.useContext)(o),u=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),l=Boolean(s)&&Boolean(s.store),h=u?t.store:s.store,f=l?s.getServerState:h.getState,p=(0,_.useMemo)((()=>function(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=t,a=D(t,L);return U(r(e,a),n(e,a),i(e,a),e,a)}(h.dispatch,n)),[h]),[m,g]=(0,_.useMemo)((()=>{if(!d)return Z;const e=H(h,u?void 0:s.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[h,u,s]),v=(0,_.useMemo)((()=>u?s:N({},s,{subscription:m})),[u,s,m]),y=(0,_.useRef)(),b=(0,_.useRef)(a),w=(0,_.useRef)(),x=(0,_.useRef)(!1),S=((0,_.useRef)(!1),(0,_.useRef)(!1)),I=(0,_.useRef)();K((()=>(S.current=!0,()=>{S.current=!1})),[]);const E=(0,_.useMemo)((()=>()=>w.current&&a===b.current?w.current:p(h.getState(),a)),[h,a]),P=(0,_.useMemo)((()=>e=>m?function(e,t,r,n,i,a,o,s,u,l,c){if(!e)return()=>{};let h=!1,f=null;const p=()=>{if(h||!s.current)return;const e=t.getState();let r,p;try{r=n(e,i.current)}catch(e){p=e,f=e}p||(f=null),r===a.current?o.current||l():(a.current=r,u.current=r,o.current=!0,c())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f}}(d,h,m,p,b,y,x,S,w,g,e):()=>{}),[m]);var A,O;let R;A=ee,O=[b,y,x,a,w,g],K((()=>A(...O)),undefined);try{R=J(P,E,f?()=>p(f(),a):E)}catch(e){throw I.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${I.current.stack}\n\n`),e}K((()=>{I.current=void 0,w.current=void 0,y.current=R}));const k=(0,_.useMemo)((()=>C().createElement(e,N({},R,{ref:i}))),[i,e,R]);return(0,_.useMemo)((()=>d?C().createElement(o.Provider,{value:v},k):k),[o,k,v])}const m=C().memo(l);if(m.WrappedComponent=e,m.displayName=l.displayName=r,u){const t=C().forwardRef((function(e,t){return C().createElement(m,N({},e,{reactReduxForwardedRef:t}))}));return t.displayName=r,t.WrappedComponent=e,B()(t,e)}return B()(m,e)}},ne=function({store:e,context:t,children:r,serverState:n}){const i=(0,_.useMemo)((()=>{const t=H(e);return{store:e,subscription:t,getServerState:n?()=>n:void 0}}),[e,n]),a=(0,_.useMemo)((()=>e.getState()),[e]);K((()=>{const{subscription:t}=i;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),a!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[i,a]);const o=t||P;return C().createElement(o.Provider,{value:i},r)};function ie(e=P){const t=e===P?A:()=>(0,_.useContext)(e);return function(){const{store:e}=t();return e}}const ae=ie();function oe(e=P){const t=e===P?ae:ie(e);return function(){return t().dispatch}}const se=oe();var ue;function le(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ce(e){return!!e&&!!e[Xe]}function he(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Qe}(e)||Array.isArray(e)||!!e[qe]||!!(null===(t=e.constructor)||void 0===t?void 0:t[qe])||ve(e)||ye(e))}function fe(e,t,r){void 0===r&&(r=!1),0===pe(e)?(r?Object.keys:Je)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function pe(e){var t=e[Xe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ve(e)?2:ye(e)?3:0}function de(e,t){return 2===pe(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function me(e,t,r){var n=pe(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function ge(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ve(e){return We&&e instanceof Map}function ye(e){return Ye&&e instanceof Set}function be(e){return e.o||e.t}function we(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ze(e);delete t[Xe];for(var r=Je(t),n=0;n<r.length;n++){var i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function _e(e,t){return void 0===t&&(t=!1),xe(e)||ce(e)||!he(e)||(pe(e)>1&&(e.set=e.add=e.clear=e.delete=Ce),Object.freeze(e),t&&fe(e,(function(e,t){return _e(t,!0)}),!0)),e}function Ce(){le(2)}function xe(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Se(e){var t=et[e];return t||le(18,e),t}function Ie(){return Ge}function Ee(e,t){t&&(Se("Patches"),e.u=[],e.s=[],e.v=t)}function Pe(e){Ae(e),e.p.forEach(Re),e.p=null}function Ae(e){e===Ge&&(Ge=e.l)}function Oe(e){return Ge={p:[],l:Ge,h:e,m:!0,_:0}}function Re(e){var t=e[Xe];0===t.i||1===t.i?t.j():t.O=!0}function ke(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||Se("ES5").S(t,e,n),n?(r[Xe].P&&(Pe(t),le(4)),he(e)&&(e=Me(t,e),t.l||Ne(t,e)),t.u&&Se("Patches").M(r[Xe].t,e,t.u,t.s)):e=Me(t,r,[]),Pe(t),t.u&&t.v(t.u,t.s),e!==Ke?e:void 0}function Me(e,t,r){if(xe(t))return t;var n=t[Xe];if(!n)return fe(t,(function(i,a){return Te(e,n,t,i,a,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return Ne(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=we(n.k):n.o;fe(3===n.i?new Set(i):i,(function(t,a){return Te(e,n,i,t,a,r)})),Ne(e,i,!1),r&&e.u&&Se("Patches").R(n,r,e.u,e.s)}return n.o}function Te(e,t,r,n,i,a){if(ce(i)){var o=Me(e,i,a&&t&&3!==t.i&&!de(t.D,n)?a.concat(n):void 0);if(me(r,n,o),!ce(o))return;e.m=!1}if(he(i)&&!xe(i)){if(!e.h.F&&e._<1)return;Me(e,i),t&&t.A.l||Ne(e,i)}}function Ne(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&_e(t,r)}function De(e,t){var r=e[Xe];return(r?be(r):e)[t]}function je(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Be(e){e.P||(e.P=!0,e.l&&Be(e.l))}function Fe(e){e.o||(e.o=we(e.t))}function Le(e,t,r){var n=ve(t)?Se("MapSet").N(t,r):ye(t)?Se("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:Ie(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=n,a=tt;r&&(i=[n],a=rt);var o=Proxy.revocable(i,a),s=o.revoke,u=o.proxy;return n.k=u,n.j=s,u}(t,r):Se("ES5").J(t,r);return(r?r.A:Ie()).p.push(n),n}function Ue(e){return ce(e)||le(22,e),function e(t){if(!he(t))return t;var r,n=t[Xe],i=pe(t);if(n){if(!n.P&&(n.i<4||!Se("ES5").K(n)))return n.t;n.I=!0,r=$e(t,i),n.I=!1}else r=$e(t,i);return fe(r,(function(t,i){n&&function(e,t){return 2===pe(e)?e.get(t):e[t]}(n.t,t)===i||me(r,t,e(i))})),3===i?new Set(r):r}(e)}function $e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return we(e)}(e=>{R=e})(S.useSyncExternalStoreWithSelector),(e=>{J=e})(x.useSyncExternalStore),ue=b.unstable_batchedUpdates,I=ue;var ze,Ge,Ve="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),We="undefined"!=typeof Map,Ye="undefined"!=typeof Set,He="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ke=Ve?Symbol.for("immer-nothing"):((ze={})["immer-nothing"]=!0,ze),qe=Ve?Symbol.for("immer-draftable"):"__$immer_draftable",Xe=Ve?Symbol.for("immer-state"):"__$immer_state",Qe=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Je="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ze=Object.getOwnPropertyDescriptors||function(e){var t={};return Je(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},et={},tt={get:function(e,t){if(t===Xe)return e;var r=be(e);if(!de(r,t))return function(e,t,r){var n,i=je(t,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!he(n)?n:n===De(e.t,t)?(Fe(e),e.o[t]=Le(e.A.h,n,e)):n},has:function(e,t){return t in be(e)},ownKeys:function(e){return Reflect.ownKeys(be(e))},set:function(e,t,r){var n=je(be(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=De(be(e),t),a=null==i?void 0:i[Xe];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(ge(r,i)&&(void 0!==r||de(e.t,t)))return!0;Fe(e),Be(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==De(e.t,t)||t in e.t?(e.D[t]=!1,Fe(e),Be(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=be(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){le(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){le(12)}},rt={};fe(tt,(function(e,t){rt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),rt.deleteProperty=function(e,t){return rt.set.call(this,e,t,void 0)},rt.set=function(e,t,r){return tt.set.call(this,e[0],t,r,e[0])};var nt=function(){function e(e){var t=this;this.g=He,this.F=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var i=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof r&&le(6),void 0!==n&&"function"!=typeof n&&le(7),he(e)){var s=Oe(t),u=Le(t,e,void 0),l=!0;try{o=r(u),l=!1}finally{l?Pe(s):Ae(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Ee(s,n),ke(e,s)}),(function(e){throw Pe(s),e})):(Ee(s,n),ke(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=r(e))&&(o=e),o===Ke&&(o=void 0),t.F&&_e(o,!0),n){var c=[],h=[];Se("Patches").M(e,o,c,h),n(c,h)}return o}le(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(i))}))};var n,i,a=t.produce(e,r,(function(e,t){n=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,n,i]})):[a,n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){he(e)||le(8),ce(e)&&(e=Ue(e));var t=Oe(this),r=Le(this,e,void 0);return r[Xe].C=!0,Ae(t),r},t.finishDraft=function(e,t){var r=(e&&e[Xe]).A;return Ee(r,t),ke(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!He&&le(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=Se("Patches").$;return ce(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),it=new nt,at=it.produce;it.produceWithPatches.bind(it),it.setAutoFreeze.bind(it),it.setUseProxies.bind(it),it.applyPatches.bind(it),it.createDraft.bind(it),it.finishDraft.bind(it);const ot=at,st=Redux;function ut(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var lt=ut();lt.withExtraArgument=ut;const ct=lt;var ht,ft=(ht=function(e,t){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},ht(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ht(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),pt=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},dt=Object.defineProperty,mt=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,wt=function(e,t,r){return t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},_t=function(e,t){for(var r in t||(t={}))yt.call(t,r)&&wt(e,r,t[r]);if(vt)for(var n=0,i=vt(t);n<i.length;n++)r=i[n],bt.call(t,r)&&wt(e,r,t[r]);return e},Ct=function(e,t){return mt(e,gt(t))},xt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?st.compose:st.compose.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var St=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return ft(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,pt([void 0],e[0].concat(this)))):new(t.bind.apply(t,pt([void 0],e.concat(this))))},t}(Array);function It(e){return he(e)?ot(e,(function(){})):e}function Et(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var i=t.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return _t(_t({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function Pt(e){var t,r={},n=[],i={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,i},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[r,n,t]}function At(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof e.initialState?e.initialState:It(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},u={};function l(){var t="function"==typeof e.extraReducers?Pt(e.extraReducers):[e.extraReducers],r=t[0],i=void 0===r?{}:r,a=t[1],o=void 0===a?[]:a,u=t[2],l=void 0===u?void 0:u,c=_t(_t({},i),s);return function(e,t,r,n){void 0===r&&(r=[]);var i,a="function"==typeof t?Pt(t):[t,r,n],o=a[0],s=a[1],u=a[2];if(function(e){return"function"==typeof e}(e))i=function(){return It(e())};else{var l=It(e);i=function(){return l}}function c(e,t){void 0===e&&(e=i());var r=pt([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[u]),r.reduce((function(e,r){if(r){var n;if(ce(e))return void 0===(n=r(e,t))?e:n;if(he(e))return ot(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return c.getInitialState=i,c}(n,c,o,l)}return a.forEach((function(e){var r,n,a=i[e],l=t+"/"+e;"reducer"in a?(r=a.reducer,n=a.prepare):r=a,o[e]=r,s[l]=r,u[e]=n?Et(l,n):Et(l)})),{name:t,reducer:function(e,t){return r||(r=l()),r(e,t)},actions:u,caseReducers:o,getInitialState:function(){return r||(r=l()),r.getInitialState()}}}var Ot=["name","message","stack","code"],Rt=function(e,t){this.payload=e,this.meta=t},kt=function(e,t){this.payload=e,this.meta=t},Mt=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=Ot;r<n.length;r++){var i=n[r];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};function Tt(e,t,r){var n=Et(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:Ct(_t({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),i=Et(e+"/pending",(function(e,t,r){return{payload:void 0,meta:Ct(_t({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=Et(e+"/rejected",(function(e,t,n,i,a){return{payload:i,error:(r&&r.serializeError||Mt)(e||"Rejected"),meta:Ct(_t({},a||{}),{arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,u,l){var c,h=(null==r?void 0:r.idGenerator)?r.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new o,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),d=!1,m=function(){return o=this,c=null,m=function(){var o,c,m,g,v;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),null===(b=g=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:u,extra:l}))||"object"!=typeof b||"function"!=typeof b.then?[3,2]:[4,g];case 1:g=y.sent(),y.label=2;case 2:if(!1===g)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return d=!0,s(i(h,e,null==(c=null==r?void 0:r.getPendingMeta)?void 0:c.call(r,{requestId:h,arg:e},{getState:u,extra:l}))),[4,Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:u,extra:l,requestId:h,signal:f.signal,rejectWithValue:function(e,t){return new Rt(e,t)},fulfillWithValue:function(e,t){return new kt(e,t)}})).then((function(t){if(t instanceof Rt)throw t;return t instanceof kt?n(t.payload,h,e,t.meta):n(t,h,e)}))])];case 3:return m=y.sent(),[3,5];case 4:return v=y.sent(),m=v instanceof Rt?a(null,h,e,v.payload,v.meta):a(v,h,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&a.match(m)&&m.meta.condition||s(m),[2,m]}var b}))},new Promise((function(e,t){var r=function(e){try{i(m.next(e))}catch(e){t(e)}},n=function(e){try{i(m.throw(e))}catch(e){t(e)}},i=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(r,n)};i((m=m.apply(o,c)).next())}));var o,c,m}();return Object.assign(m,{abort:function(e){d&&(c=e,f.abort())},requestId:h,arg:e,unwrap:function(){return m.then(Nt)}})}}),{pending:i,rejected:a,fulfilled:n,typePrefix:e})}function Nt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Dt="listenerMiddleware";Et(Dt+"/add"),Et(Dt+"/removeAll"),Et(Dt+"/remove"),function(){function e(e,t){var r=i[e];return r?r.enumerable=t:i[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[Xe];return tt.get(t,e)},set:function(t){var r=this[Xe];tt.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Xe];if(!i.P)switch(i.i){case 5:n(i)&&Be(i);break;case 4:r(i)&&Be(i)}}}function r(e){for(var t=e.t,r=e.k,n=Je(r),i=n.length-1;i>=0;i--){var a=n[i];if(a!==Xe){var o=t[a];if(void 0===o&&!de(t,a))return!0;var s=r[a],u=s&&s[Xe];if(u?u.t!==o:!ge(s,o))return!0}}var l=!!t[Xe];return n.length!==Je(t).length+(l?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var i={};!function(e,t){et[e]||(et[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var a=Ze(r);delete a[Xe];for(var o=Je(a),s=0;s<o.length;s++){var u=o[s];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(r),a)}(n,t),a={i:n?5:4,A:r?r.A:Ie(),P:!1,I:!1,D:{},l:r,t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Xe,{value:a,writable:!0}),i},S:function(e,r,i){i?ce(r)&&r[Xe].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[Xe];if(r){var i=r.t,a=r.k,o=r.D,s=r.i;if(4===s)fe(a,(function(t){t!==Xe&&(void 0!==i[t]||de(i,t)?o[t]||e(a[t]):(o[t]=!0,Be(r)))})),fe(i,(function(e){void 0!==a[e]||de(a,e)||(o[e]=!1,Be(r))}));else if(5===s){if(n(r)&&(Be(r),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var l=i.length;l<a.length;l++)o[l]=!0;for(var c=Math.min(a.length,i.length),h=0;h<c;h++)a.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(a[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}();var jt=r(361),Bt=r.n(jt);let Ft={capture_param_error:"Incorrect capture parameter. Please open the web browser console for details",camera_error:"No access to camera",camera_disabled:"The camera is disabled through the settings",camera_low_res:"Preview not available. Resolution is too low.",camera_low_res_ios:"Preview not available. Please update your iOS to version 12.2 or later.",image_high_res:"Image resolution is too high. Choose another image.",camera_alert_closer:"Closer",camera_alert_searching:"Looking for document",camera_alert_sharpness_filter:"Not enough sharp text on the document",app_loading:"Loading capture module",wasm_error:"Capturing error",wasm_license_error:"Error while performing wasm action: CHECK LICENSE",image_processing:"Image processing…",use_autocapture_title:"Use auto capture",use_autocapture_text:"Image is captured and cropped automatically",low_quality_title:"Low image quality",low_quality_text:"Retake image for better quality",crop_boundaries_not_found_title:"Cannot detect document borders",crop_boundaries_not_found_text:"Crop image manually",continue:"Continue",browser_edge_error:"Auto capture isn't supported. Please use Safari or Google Chrome.",ios_non_safari_error:"Auto capture isn't supported. Please use Safari version 12.2 or later",add_page:"Add page",done:"Done",page:"Page",of:"of",delete:"Delete",retake:"Retake",crop:"Crop",rotate:"Rotate",cancel:"Cancel",apply:"Apply",waitingFor:"Waiting for",ID:"ID",A4:"A4 document",letter:"Letter-size document",incorrectAspectRatio:"Document size doesn't match the setting",captureSystemCameraTitle:"Add pages",captureSystemCameraText:"Add pages using camera<br/> or upload from gallery"};const Lt={A4:{width:297,height:210,name:Ft.A4},letter:{width:279.4,height:215.9,name:Ft.letter},"ID-1":{width:85.6,height:53.98,name:Ft.ID},"ID-2":{width:105,height:74,name:Ft.ID},"ID-3":{width:125,height:88,name:Ft.ID}};var Ut=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function $t(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!((n=e[r])===(i=t[r])||Ut(n)&&Ut(i)))return!1;var n,i;return!0}function zt(e,t){void 0===t&&(t=$t);var r=null;function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var a=e.apply(this,n);return r={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){r=null},n}var Gt=r(1249),Vt=r.n(Gt),Wt=r(2238),Yt=r.n(Wt);const Ht=new Wt.UAParser,Kt=zt((()=>"iOS"===Ht.getOS().name)),qt=zt((()=>{try{const e=Vt().coerce(Ht.getOS().version).version;return"iOS"===Ht.getOS().name&&Vt().satisfies(e,">= 16.4")}catch(e){return!1}})),Xt=zt((()=>"mobile"===Ht.getDevice().type)),Qt=zt((()=>"tablet"===Ht.getDevice().type||"Mac OS"===Ht.getOS().name&&5===navigator.maxTouchPoints));var Jt=r(236),Zt=r.n(Jt);let er={general:{frameColor:"",buttonSettingsGeneral:{color:"",hoverColor:"",activeColor:""}},captureScreen:{galleryButton:{visibility:"visible"},manualCaptureButton:{display:"block"},cameraSwitcher:{display:"block"},corners:{display:"block",color:"#FFDC48"},frame:{display:"block",color:"#FFDC48"}},imageEditorScreen:{addPageButton:{display:"block",textColor:"#4173d6",bgColor:"#edf3fc",bgHoverColor:"#edf3fc",bgActiveColor:"#dfe5ed"},doneButton:{textColor:"#ffffff",bgColor:"#4a8ee0",bgHoverColor:"#4a8ee0",bgActiveColor:"#3b72b3"},retakeButton:{display:"block",color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},rotateButton:{display:"block",color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},cropButton:{display:"block",color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},deleteButton:{display:"block",color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},previousImageButton:{display:"block",bgColor:"rgba(0, 0, 0, 0.4)",bgHoverColor:"rgba(0, 0, 0, 0.5)",bgActiveColor:"rgba(0, 0, 0, 0.6)",color:"#FFF",hoverColor:"#FFF",activeColor:"#FFF"},nextImageButton:{display:"block",bgColor:"rgba(0, 0, 0, 0.4)",bgHoverColor:"rgba(0, 0, 0, 0.5)",bgActiveColor:"rgba(0, 0, 0, 0.6)",color:"#FFF",hoverColor:"#FFF",activeColor:"#FFF"}},manualCropScreen:{frameColor:"#FFDC48",cancelButton:{color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},applyButton:{color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},fullCropButton:{color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},autoCropButton:{color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},previousImageButton:{display:"block",bgColor:"#FFF",bgHoverColor:"#FFF",bgActiveColor:"#FFF",color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"},nextImageButton:{display:"block",bgColor:"#FFF",bgHoverColor:"#FFF",bgActiveColor:"#FFF",color:"#4a8ee0",hoverColor:"#3b71b3",activeColor:"#33639d"}},secondaryScreens:{messageColor:"#4a8ee0",loaderColor:"#4a8ee0",iconColor:"#4a8ee0",useAutoCaptureButton:{textColor:"#ffffff",bgColor:"#4a8ee0",bgHoverColor:"#4a8ee0",bgActiveColor:"#3b72b3"}}};const tr=(e,t)=>{e.color=t.color||e.color,e.hoverColor=t.hoverColor||e.hoverColor,e.activeColor=t.activeColor||e.activeColor},rr=(e,t)=>{if(""===t)return e};let nr,ir,ar;!function(e){e.Resolution4K="4K",e.ResolutionFullHD="FullHD",e.ResolutionAuto="Auto"}(nr||(nr={})),function(e){e.BaseCapture="BaseCapture",e.SingleCapture="SingleCapture",e.SingleView="SingleView",e.SingleCrop="SingleCrop"}(ir||(ir={})),function(e){e.A4="A4",e.Letter="letter",e.ID1="ID-1",e.ID2="ID-2",e.ID3="ID-3"}(ar||(ar={}));const or={capture:{videoSource:null,minFramesCount:6,minDimension:400,minCaptureTime:1500},ocrQualityBound:.6,ui:{edgesColor:"#ffdc48"},cameraConstraints:{width:{ideal:3840},height:{ideal:2160},facingMode:"environment"},userOptions:{aspectRatioMin:0,aspectRatioMax:0,jpegQuality:80,startPage:0,maxImagesCount:Number.MAX_SAFE_INTEGER,enableCamera:!0,enableAutoCapture:!0,enableAutoCrop:!0,enableQualityAssessmentForOCR:!1,licenseFilePath:"/libs/js/MWC.ABBYY.License",wasmFilesPath:"libs/js",frameBoundaryPadding:15,minCameraResolution:1e3,preferredCameraResolution:nr.ResolutionAuto,enableSharpnessFilter:!1,mode:ir.BaseCapture,forceFrontCamera:!1,useSystemCamera:!1}},sr=Bt()(or),ur=e=>{const{localizedStrings:t,viewConfiguration:r,...n}=e;var i;e.mode||(n.mode=ir.BaseCapture),e.mode!==ir.SingleView&&e.mode!==ir.SingleCrop||e.startPage||(n.startPage=0),e.useSystemCamera&&(n.useSystemCamera=Boolean(Xt()||Qt())),t&&(i=t,Ft={...Ft,...i}),r&&(e=>{er=Zt()(er,e,rr),er.captureScreen.corners.color=er.general.frameColor||er.captureScreen.corners.color,er.captureScreen.frame.color=er.general.frameColor||er.captureScreen.frame.color,er.manualCropScreen.frameColor=er.general.frameColor||er.manualCropScreen.frameColor,tr(er.imageEditorScreen.previousImageButton,er.general.buttonSettingsGeneral),tr(er.imageEditorScreen.nextImageButton,er.general.buttonSettingsGeneral),tr(er.imageEditorScreen.retakeButton,er.general.buttonSettingsGeneral),tr(er.imageEditorScreen.rotateButton,er.general.buttonSettingsGeneral),tr(er.imageEditorScreen.cropButton,er.general.buttonSettingsGeneral),tr(er.imageEditorScreen.deleteButton,er.general.buttonSettingsGeneral),tr(er.manualCropScreen.previousImageButton,er.general.buttonSettingsGeneral),tr(er.manualCropScreen.nextImageButton,er.general.buttonSettingsGeneral),tr(er.manualCropScreen.fullCropButton,er.general.buttonSettingsGeneral),tr(er.manualCropScreen.autoCropButton,er.general.buttonSettingsGeneral),tr(er.manualCropScreen.cancelButton,er.general.buttonSettingsGeneral),tr(er.manualCropScreen.applyButton,er.general.buttonSettingsGeneral)})(r),hr(n),lr(n),sr.userOptions={...sr.userOptions,...n}},lr=e=>{switch(e.preferredCameraResolution){case nr.ResolutionFullHD:cr(1920,1080);break;case nr.Resolution4K:cr(3840,2160);break;case nr.ResolutionAuto:case void 0:Kt()?cr(3840,2160):cr(1920,1080)}},cr=(e,t)=>{sr.cameraConstraints.width.ideal=e,sr.cameraConstraints.height.ideal=t},hr=e=>{if(e.aspectRatioMin&&!e.aspectRatioMax&&(e.aspectRatioMax=Number.MAX_SAFE_INTEGER),"number"==typeof e.aspectRatioMax&&void 0===e.aspectRatioMin&&e.aspectRatioMax>=1&&(e.aspectRatioMin=1,e.aspectRatioMax=Math.max(1,e.aspectRatioMax)),e.documentSize&&!e.aspectRatioMin&&Lt[e.documentSize]){const t=Lt[e.documentSize].width/Lt[e.documentSize].height;e.aspectRatioMin=t,e.aspectRatioMax=t}else sr.userOptions.documentSize=null};let fr;!function(e){e.Capture="capture",e.Recapture="recapture",e.Preview="preview",e.Crop="crop",e.CaptureNative="captureNative",e.RecaptureNative="recaptureNative"}(fr||(fr={}));var pr=r(9520);class dr extends pr.default{constructor(){super("mwc"),this.version(1).stores({files:"++id, jpegBytes"})}}const mr=new dr,gr=At({name:"mode",initialState:sr.userOptions.useSystemCamera?fr.CaptureNative:fr.Capture,reducers:{changeMode:(e,t)=>t.payload},extraReducers:e=>{e.addCase(br.fulfilled,(()=>fr.Preview)).addCase(_r.fulfilled,(()=>fr.Preview))}}),{actions:vr}=gr,yr=gr.reducer,br=Tt("image/add",(async e=>{let{originalImage:t,capturedImage:r,documentBoundary:n,originalDocumentBoundary:i,ocrQuality:a}=e;const[o,s]=await mr.files.bulkAdd([{jpegBytes:t},{jpegBytes:null!=r?r:t}],void 0,{allKeys:!0});return{originalImageId:o,capturedImageId:s,documentBoundary:n,originalDocumentBoundary:i,ocrQuality:a}})),wr=Tt("image/delete",(async(e,t)=>{const{images:r}=t.getState(),n=r.entries[r.currentImageIndex];return await mr.files.bulkDelete([n.originalImageId,n.capturedImageId]),1===r.entries.length&&t.dispatch(vr.changeMode(sr.userOptions.useSystemCamera?fr.CaptureNative:fr.Capture)),n})),_r=Tt("images/replace",(async(e,t)=>{let{originalImage:r,capturedImage:n,documentBoundary:i,originalDocumentBoundary:a,ocrQuality:o}=e;const{images:s}=t.getState(),{originalImageId:u,capturedImageId:l}=s.entries[s.currentImageIndex];return await Promise.all([mr.files.update(u,{jpegBytes:r}),mr.files.update(l,{jpegBytes:n})]),{originalImageId:u,capturedImageId:l,documentBoundary:i,originalDocumentBoundary:a,ocrQuality:o}})),Cr=Tt("images/replaces",(async(e,t)=>{const{images:r}=t.getState(),n=e.reduce(((e,t)=>{let{index:n,image:{originalImage:i,capturedImage:a}}=t;const{originalImageId:o,capturedImageId:s}=r.entries[n];return e.push(mr.files.update(o,{jpegBytes:i}),mr.files.update(s,{jpegBytes:a})),e}),[]);return await Promise.all(n),e.map((e=>{const{index:t,image:{documentBoundary:n,originalDocumentBoundary:i,ocrQuality:a}}=e,{originalImageId:o,capturedImageId:s}=r.entries[t];return{index:t,image:{originalImageId:o,capturedImageId:s,documentBoundary:n,originalDocumentBoundary:i,ocrQuality:a}}}))})),xr=At({name:"images",initialState:{entries:[],currentImageIndex:0},reducers:{nextImage:e=>{e.currentImageIndex=Math.min(e.currentImageIndex+1,e.entries.length-1)},prevImage:e=>{e.currentImageIndex=Math.max(e.currentImageIndex-1,0)},saveImage:e=>e},extraReducers:e=>{e.addCase(br.fulfilled,((e,t)=>{const r=e.currentImageIndex+1;e.entries.splice(r,0,t.payload),e.currentImageIndex=r})).addCase(wr.fulfilled,(e=>{e.entries.splice(e.currentImageIndex,1),e.currentImageIndex>e.entries.length-1&&(e.currentImageIndex=e.entries.length-1)})).addCase(_r.fulfilled,((e,t)=>{e.entries.splice(e.currentImageIndex,1,t.payload)})).addCase(Cr.fulfilled,((e,t)=>{t.payload.forEach((t=>{let{index:r,image:n}=t;e.entries.splice(r,1,n)}))}))}}),{actions:Sr}=xr,Ir=xr.reducer,Er=e=>t=>r=>n=>{const i=r(n);return br.fulfilled.match(n)&&sr.userOptions.mode===ir.SingleCapture&&e(t.getState().images.entries),i},Pr=e=>t=>r=>n=>{const i=r(n);return n.type===Cr.fulfilled&&sr.userOptions.mode===ir.SingleCrop&&e(t.getState().images.entries),i},Ar=At({name:"camera",initialState:localStorage.getItem("abbyy:mwc:deviceId"),reducers:{changeCamera:(e,t)=>t.payload}}),{actions:Or}=Ar,Rr=Ar.reducer;let kr;!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.PROCESSING=2]="PROCESSING"}(kr||(kr={}));const Mr=At({name:"status",initialState:kr.IDLE,reducers:{changeStatus:(e,t)=>t.payload}}),{actions:Tr}=Mr,Nr=Mr.reducer,Dr={...Sr,...vr,...Or,...Tr},jr=(0,st.combineReducers)({images:Ir,mode:yr,camera:Rr,status:Nr}),Br=se,Fr=function(e,t){void 0===e&&(e=[]);const r=e.length?Math.max(0,Math.min(sr.userOptions.startPage,e.length-1)):-1;let n=fr.Preview;switch(sr.userOptions.mode){case ir.BaseCapture:n=(e=>{let t=fr.Preview;return 0===e.length||sr.userOptions.startPage>=e.length?t=fr.Capture:e.length===sr.userOptions.maxImagesCount&&sr.userOptions.startPage===sr.userOptions.maxImagesCount&&(t=fr.Preview),t})(e);break;case ir.SingleCapture:n=fr.Capture;break;case ir.SingleView:n=fr.Preview;break;case ir.SingleCrop:n=fr.Crop}return sr.userOptions.useSystemCamera&&n===fr.Capture&&(n=fr.CaptureNative),function(e){var t,r=function(e){return function(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,new St);return r&&(function(e){return"boolean"==typeof e}(r)?n.push(ct):n.push(ct.withExtraArgument(r.extraArgument))),n}(e)},n=e||{},i=n.reducer,a=void 0===i?void 0:i,o=n.middleware,s=void 0===o?r():o,u=n.devTools,l=void 0===u||u,c=n.preloadedState,h=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof a)t=a;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,st.combineReducers)(a)}var d=s;"function"==typeof d&&(d=d(r));var m=st.applyMiddleware.apply(void 0,d),g=st.compose;l&&(g=xt(_t({trace:!1},"object"==typeof l&&l)));var v=[m];Array.isArray(p)?v=pt([m],p):"function"==typeof p&&(v=p(v));var y=g.apply(void 0,v);return(0,st.createStore)(t,h,y)}({reducer:jr,preloadedState:{mode:n,images:{entries:e,currentImageIndex:r}},middleware:e=>{return e().concat([(r=t,e=>t=>n=>{if(!Sr.saveImage.match(n))return t(n);const{images:{entries:i}}=e.getState();return r(i),t(n)}),Er(t),Pr(t),()=>e=>t=>(Or.changeCamera.match(t)&&localStorage.setItem("abbyy:mwc:deviceId",`${t.payload}`),e(t))]);var r}})};var Lr="undefined"!=typeof self?self:global;const Ur="undefined"!=typeof navigator,$r=Ur&&"undefined"==typeof HTMLImageElement,zr=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),Gr=Lr.Buffer,Vr=Lr.BigInt,Wr=!!Gr,Yr=e=>e;function Hr(e,t=Yr){if(zr)try{return"function"==typeof require?Promise.resolve(t(require(e))):import(e).then(t)}catch(t){}}let Kr=Lr.fetch;if(!Lr.fetch){const e=Hr("http",(e=>e)),t=Hr("https",(e=>e)),r=(n,{headers:i}={})=>new Promise((async(a,o)=>{let{port:s,hostname:u,pathname:l,protocol:c,search:h}=new URL(n);const f={method:"GET",hostname:u,path:encodeURI(l)+h,headers:i};""!==s&&(f.port=Number(s));const p=("https:"===c?await t:await e).request(f,(e=>{if(301===e.statusCode||302===e.statusCode){let t=new URL(e.headers.location,n).toString();return r(t,{headers:i}).then(a).catch(o)}a({status:e.statusCode,arrayBuffer:()=>new Promise((t=>{let r=[];e.on("data",(e=>r.push(e))),e.on("end",(()=>t(Buffer.concat(r))))}))})}));p.on("error",o),p.end()}));(e=>{Kr=e})(r)}function qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Xr=e=>Jr(e)?void 0:e,Qr=e=>void 0!==e;function Jr(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(Qr).length)}function Zr(e){let t=new Error(e);throw delete t.stack,t}function en(e){return""===(e=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(e).trim())?void 0:e}function tn(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const rn=e=>String.fromCharCode.apply(null,e),nn="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function an(e){return nn?nn.decode(e):Wr?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(rn(e)))}class on{static from(e,t){return e instanceof this&&e.le===t?e:new on(e,void 0,void 0,t)}constructor(e,t=0,r,n){if("boolean"==typeof n&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===r&&(r=e.byteLength-t);let n=new DataView(e,t,r);this._swapDataView(n)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof on){void 0===r&&(r=e.byteLength-t),(t+=e.byteOffset)+r>e.byteOffset+e.byteLength&&Zr("Creating view outside of available memory in ArrayBuffer");let n=new DataView(e.buffer,t,r);this._swapDataView(n)}else if("number"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else Zr("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,r=on){return e instanceof DataView||e instanceof on?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Zr("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new r(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new on(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return an(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let r=this.getUint8Array(e,t);return rn(r)}getUnicodeString(e=0,t=this.byteLength){const r=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)r.push(this.getUint16(e+n));return rn(r)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,r){switch(t){case 1:return this.getUint8(e,r);case 2:return this.getUint16(e,r);case 4:return this.getUint32(e,r);case 8:return this.getUint64&&this.getUint64(e,r)}}getUint(e,t,r){switch(t){case 8:return this.getUint8(e,r);case 16:return this.getUint16(e,r);case 32:return this.getUint32(e,r);case 64:return this.getUint64&&this.getUint64(e,r)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function sn(e,t){Zr(`${e} '${t}' was not loaded, try using full build of exifr.`)}class un extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||sn(this.kind,e),t&&(e in t||function(e,t){Zr(`Unknown ${e} '${t}'.`)}(this.kind,e),t[e].enabled||sn(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var ln=new un("file parser"),cn=new un("segment parser"),hn=new un("file reader");function fn(e,t){return(r=e).startsWith("data:")||r.length>1e4?dn(e,t,"base64"):zr&&e.includes("://")?pn(e,t,"url",mn):zr?dn(e,t,"fs"):Ur?pn(e,t,"url",mn):void Zr("Invalid input argument");var r}async function pn(e,t,r,n){return hn.has(r)?dn(e,t,r):n?async function(e,t){let r=await t(e);return new on(r)}(e,n):void Zr(`Parser ${r} is not loaded`)}async function dn(e,t,r){let n=new(hn.get(r))(e,t);return await n.read(),n}const mn=e=>Kr(e).then((e=>e.arrayBuffer())),gn=e=>new Promise(((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)}));class vn extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function yn(e,t,r){let n=new vn;for(let[e,t]of r)n.set(e,t);if(Array.isArray(t))for(let r of t)e.set(r,n);else e.set(t,n);return n}function bn(e,t,r){let n,i=e.get(t);for(n of r)i.set(n[0],n[1])}const wn=new Map,_n=new Map,Cn=new Map,xn=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Sn=["jfif","xmp","icc","iptc","ihdr"],In=["tiff",...Sn],En=["ifd0","ifd1","exif","gps","interop"],Pn=[...In,...En],An=["makerNote","userComment"],On=["translateKeys","translateValues","reviveValues","multiSegment"],Rn=[...On,"sanitize","mergeOutput","silentErrors"];class kn{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Mn extends kn{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,r,n){if(super(),qr(this,"enabled",!1),qr(this,"skip",new Set),qr(this,"pick",new Set),qr(this,"deps",new Set),qr(this,"translateKeys",!1),qr(this,"translateValues",!1),qr(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=En.includes(e),this.canBeFiltered&&(this.dict=wn.get(e)),void 0!==r)if(Array.isArray(r))this.parse=this.enabled=!0,this.canBeFiltered&&r.length>0&&this.translateTagSet(r,this.pick);else if("object"==typeof r){if(this.enabled=!0,this.parse=!1!==r.parse,this.canBeFiltered){let{pick:e,skip:t}=r;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(r)}else!0===r||!1===r?this.parse=this.enabled=r:Zr(`Invalid options argument: ${r}`)}applyInheritables(e){let t,r;for(t of On)r=e[t],void 0!==r&&(this[t]=r)}translateTagSet(e,t){if(this.dict){let r,n,{tagKeys:i,tagValues:a}=this.dict;for(r of e)"string"==typeof r?(n=a.indexOf(r),-1===n&&(n=i.indexOf(Number(r))),-1!==n&&t.add(Number(i[n]))):t.add(r)}else for(let r of e)t.add(r)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Fn(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Fn(this.pick,this.deps)}}var Tn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Nn=new Map;class Dn extends kn{static useCached(e){let t=Nn.get(e);return void 0!==t||(t=new this(e),Nn.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):"object"==typeof e?this.setupFromObject(e):Zr(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=Ur?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of xn)this[e]=Tn[e];for(e of Rn)this[e]=Tn[e];for(e of An)this[e]=Tn[e];for(e of Pn)this[e]=new Mn(e,Tn[e],void 0,this)}setupFromTrue(){let e;for(e of xn)this[e]=Tn[e];for(e of Rn)this[e]=Tn[e];for(e of An)this[e]=!0;for(e of Pn)this[e]=new Mn(e,!0,void 0,this)}setupFromArray(e){let t;for(t of xn)this[t]=Tn[t];for(t of Rn)this[t]=Tn[t];for(t of An)this[t]=Tn[t];for(t of Pn)this[t]=new Mn(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,En)}setupFromObject(e){let t;for(t of(En.ifd0=En.ifd0||En.image,En.ifd1=En.ifd1||En.thumbnail,Object.assign(this,e),xn))this[t]=Bn(e[t],Tn[t]);for(t of Rn)this[t]=Bn(e[t],Tn[t]);for(t of An)this[t]=Bn(e[t],Tn[t]);for(t of In)this[t]=new Mn(t,Tn[t],e[t],this);for(t of En)this[t]=new Mn(t,Tn[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,En,Pn),!0===e.tiff?this.batchEnableWithBool(En,!0):!1===e.tiff?this.batchEnableWithUserValue(En,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,En):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,En)}batchEnableWithBool(e,t){for(let r of e)this[r].enabled=t}batchEnableWithUserValue(e,t){for(let r of e){let e=t[r];this[r].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,r,n=r){if(e&&e.length){for(let e of n)this[e].enabled=!1;let t=jn(e,r);for(let[e,r]of t)Fn(this[e].pick,r),this[e].enabled=!0}else if(t&&t.length){let e=jn(t,r);for(let[t,r]of e)Fn(this[t].skip,r)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:r,iptc:n,icc:i}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),r.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:r,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),r.needed&&e.deps.add(34853),this.tiff.enabled=En.some((e=>!0===this[e].enabled))||this.makerNote||this.userComment;for(let e of En)this[e].finalizeFilters()}get onlyTiff(){return!Sn.map((e=>this[e].enabled)).some((e=>!0===e))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of In)this[e].enabled&&!cn.has(e)&&sn("segment parser",e)}}function jn(e,t){let r,n,i,a,o=[];for(i of t){for(a of(r=wn.get(i),n=[],r))(e.includes(a[0])||e.includes(a[1]))&&n.push(a[0]);n.length&&o.push([i,n])}return o}function Bn(e,t){return void 0!==e?e:void 0!==t?t:void 0}function Fn(e,t){for(let r of t)e.add(r)}qr(Dn,"default",Tn);class Ln{constructor(e){qr(this,"parsers",{}),qr(this,"output",{}),qr(this,"errors",[]),qr(this,"pushToErrors",(e=>this.errors.push(e))),this.options=Dn.useCached(e)}async read(e){this.file=await function(e,t){return"string"==typeof e?fn(e,t):Ur&&!$r&&e instanceof HTMLImageElement?fn(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new on(e):Ur&&e instanceof Blob?pn(e,t,"blob",gn):void Zr("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[r,n]of ln)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[r]=!0;this.file.close&&this.file.close(),Zr("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Xr(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async t=>{let r=await t.parse();t.assignToOutput(e,r)}));this.options.silentErrors&&(t=t.map((e=>e.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,r=cn.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),void 0===n)return;let i=await this.fileParser.ensureSegmentChunk(n),a=this.parsers.tiff=new r(i,e,t),o=await a.extractThumbnail();return t.close&&t.close(),o}}async function Un(e,t){let r=new Ln(t);return await r.read(e),r.parse()}var $n=Object.freeze({__proto__:null,parse:Un,Exifr:Ln,fileParsers:ln,segmentParsers:cn,fileReaders:hn,tagKeys:wn,tagValues:_n,tagRevivers:Cn,createDictionary:yn,extendDictionary:bn,fetchUrlAsArrayBuffer:mn,readBlobAsArrayBuffer:gn,chunkedProps:xn,otherSegments:Sn,segments:In,tiffBlocks:En,segmentsAndBlocks:Pn,tiffExtractables:An,inheritables:On,allFormatters:Rn,Options:Dn});class zn{constructor(e,t,r){qr(this,"errors",[]),qr(this,"ensureSegmentChunk",(async e=>{let t=e.start,r=e.size||65536;if(this.file.chunked)if(this.file.available(t,r))e.chunk=this.file.subarray(t,r);else try{e.chunk=await this.file.readChunk(t,r)}catch(t){Zr(`Couldn't read segment: ${JSON.stringify(e)}. ${t.message}`)}else this.file.byteLength>t+r?e.chunk=this.file.subarray(t,r):void 0===e.size?e.chunk=this.file.subarray(t):Zr("Segment unreachable: "+JSON.stringify(e));return e.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=r}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let r=new(cn.get(e))(t,this.options,this.file);return this.parsers[e]=r}createParsers(e){for(let t of e){let{type:e,chunk:r}=t,n=this.options[e];if(n&&n.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,r)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class Gn{static findPosition(e,t){let r=e.getUint16(t+2)+2,n="function"==typeof this.headerLength?this.headerLength(e,t,r):this.headerLength,i=t+n,a=r-n;return{offset:t,length:r,headerLength:n,start:i,size:a,end:i+a}}static parse(e,t={}){return new this(e,new Dn({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof on?e:new on(e)}constructor(e,t={},r){qr(this,"errors",[]),qr(this,"raw",new Map),qr(this,"handleError",(e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)})),this.chunk=this.normalizeInput(e),this.file=r,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let r=Cn.get(t),n=_n.get(t),i=wn.get(t),a=this.options[t],o=a.reviveValues&&!!r,s=a.translateValues&&!!n,u=a.translateKeys&&!!i,l={};for(let[t,a]of e)o&&r.has(t)?a=r.get(t)(a):s&&n.has(t)&&(a=this.translateValue(a,n.get(t))),u&&i.has(t)&&(t=i.get(t)||t),l[t]=a;return l}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,r){if(this.globalOptions.mergeOutput)return Object.assign(e,r);e[t]?Object.assign(e[t],r):e[t]=r}}function Vn(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Wn(e){return e>=224&&e<=239}function Yn(e,t,r){for(let[n,i]of cn)if(i.canHandle(e,t,r))return n}qr(Gn,"headerLength",4),qr(Gn,"type",void 0),qr(Gn,"multiSegment",!1),qr(Gn,"canHandle",(()=>!1));class Hn extends zn{constructor(...e){super(...e),qr(this,"appSegments",[]),qr(this,"jpegSegments",[]),qr(this,"unknownSegments",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(cn.keyList())):(e=void 0===e?cn.keyList().filter((e=>this.options[e].enabled)):e.filter((e=>this.options[e].enabled&&cn.has(e))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:r,findAll:n,wanted:i,remaining:a}=this;if(!n&&this.file.chunked&&(n=Array.from(i).some((e=>{let t=cn.get(e),r=this.options[e];return t.multiSegment&&r.multiSegment})),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,r.byteLength),!this.options.onlyTiff&&r.chunked){let t=!1;for(;a.size>0&&!t&&(r.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:n}=r,i=this.appSegments.some((e=>!this.file.available(e.offset||e.start,e.length||e.size)));if(t=e>n&&!i?!await r.readNextChunk(e):!await r.readNextChunk(n),void 0===(e=this.findAppSegmentsInRange(e,r.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let r,n,i,a,o,s,{file:u,findAll:l,wanted:c,remaining:h,options:f}=this;for(;e<t;e++)if(255===u.getUint8(e))if(r=u.getUint8(e+1),Wn(r)){if(n=u.getUint16(e+2),i=Yn(u,e,n),i&&c.has(i)&&(a=cn.get(i),o=a.findPosition(u,e),s=f[i],o.type=i,this.appSegments.push(o),!l&&(a.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),0===h.size)))break;f.recordUnknownSegments&&(o=Gn.findPosition(u,e),o.marker=r,this.unknownSegments.push(o)),e+=n+1}else if(Vn(r)){if(n=u.getUint16(e+2),218===r&&!1!==f.stopAfterSos)return;f.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:r}),e+=n+1}return e}mergeMultiSegments(){if(!this.appSegments.some((e=>e.multiSegment)))return;let e=function(e,t){let r,n,i,a=new Map;for(let t=0;t<e.length;t++)r=e[t],n=r.type,a.has(n)?i=a.get(n):a.set(n,i=[]),i.push(r);return Array.from(a)}(this.appSegments);this.mergedAppSegments=e.map((([e,t])=>{let r=cn.get(e,this.options);return r.handleMultiSegments?{type:e,chunk:r.handleMultiSegments(t)}:t[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}qr(Hn,"type","jpeg"),ln.set("jpeg",Hn);const Kn=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class qn extends Gn{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,r=new Map){let{pick:n,skip:i}=this.options[t];n=new Set(n);let a=n.size>0,o=0===i.size,s=this.chunk.getUint16(e);e+=2;for(let u=0;u<s;u++){let s=this.chunk.getUint16(e);if(a){if(n.has(s)&&(r.set(s,this.parseTag(e,s,t)),n.delete(s),0===n.size))break}else!o&&i.has(s)||r.set(s,this.parseTag(e,s,t));e+=12}return r}parseTag(e,t,r){let{chunk:n}=this,i=n.getUint16(e+2),a=n.getUint32(e+4),o=Kn[i];if(o*a<=4?e+=8:e=n.getUint32(e+8),(i<1||i>13)&&Zr(`Invalid TIFF value type. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${i}, offset ${e}`),e>n.byteLength&&Zr(`Invalid TIFF value offset. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${n.byteLength}`),1===i)return n.getUint8Array(e,a);if(2===i)return en(n.getString(e,a));if(7===i)return n.getUint8Array(e,a);if(1===a)return this.parseTagValue(i,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(i))(a),r=o;for(let n=0;n<a;n++)t[n]=this.parseTagValue(i,e),e+=r;return t}}parseTagValue(e,t){let{chunk:r}=this;switch(e){case 1:return r.getUint8(t);case 3:return r.getUint16(t);case 4:case 13:return r.getUint32(t);case 5:return r.getUint32(t)/r.getUint32(t+4);case 6:return r.getInt8(t);case 8:return r.getInt16(t);case 9:return r.getInt32(t);case 10:return r.getInt32(t)/r.getInt32(t+4);case 11:return r.getFloat(t);case 12:return r.getDouble(t);default:Zr(`Invalid tiff type ${e}`)}}}class Xn extends qn{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let r=new Map;return this[t]=r,this.parseTags(e,t,r),r}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Zr("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Zr(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,tn(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,tn(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let r=e.get(t);r&&1===r.length&&e.set(t,r[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Qn(...e.get(2),e.get(1))),e.set("longitude",Qn(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,r,n={};for(t of En)if(e=this[t],!Jr(e))if(r=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(n,r)}else n[t]=r;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[r,n]of Object.entries(t))this.assignObjectToOutput(e,r,n)}}function Qn(e,t,r,n){var i=e+t/60+r/3600;return"S"!==n&&"W"!==n||(i*=-1),i}qr(Xn,"type","tiff"),qr(Xn,"headerLength",10),cn.set("tiff",Xn);var Jn=Object.freeze({__proto__:null,default:$n,Exifr:Ln,fileParsers:ln,segmentParsers:cn,fileReaders:hn,tagKeys:wn,tagValues:_n,tagRevivers:Cn,createDictionary:yn,extendDictionary:bn,fetchUrlAsArrayBuffer:mn,readBlobAsArrayBuffer:gn,chunkedProps:xn,otherSegments:Sn,segments:In,tiffBlocks:En,segmentsAndBlocks:Pn,tiffExtractables:An,inheritables:On,allFormatters:Rn,Options:Dn,parse:Un});const Zn={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ei=Object.assign({},Zn,{firstChunkSize:4e4,gps:[1,2,3,4]});async function ti(e){let t=new Ln(ei);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:e,longitude:t}=r.gps;return{latitude:e,longitude:t}}}const ri=Object.assign({},Zn,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ni(e){let t=new Ln(ri);await t.read(e);let r=await t.extractThumbnail();return r&&Wr?Gr.from(r):r}async function ii(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}const ai=Object.assign({},Zn,{firstChunkSize:4e4,ifd0:[274]});async function oi(e){let t=new Ln(ai);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const si=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ui=!0,li=!0;if("object"==typeof navigator){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,e,r]=t,n=Number(e)+.1*Number(r);ui=n<13.4,li=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);ui=li=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);ui=li=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);ui=li=Number(t)<77}}async function ci(e){let t=await oi(e);return Object.assign({canvas:ui,css:li},si[t])}class hi extends on{constructor(...e){super(...e),qr(this,"ranges",new fi),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,r){if(0===e&&0===this.byteLength&&r){let e=new DataView(r.buffer||r,r.byteOffset,r.byteLength);this._swapDataView(e)}else{let r=e+t;if(r>this.byteLength){let{dataView:e}=this._extend(r);this._swapDataView(e)}}}_extend(e){let t;t=Wr?Gr.allocUnsafe(e):new Uint8Array(e);let r=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:r}}subarray(e,t,r=!1){return t=t||this._lengthToEnd(e),r&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,r=!1){r&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class fi{constructor(){qr(this,"list",[])}get length(){return this.list.length}add(e,t,r=0){let n=e+t,i=this.list.filter((t=>pi(e,t.offset,n)||pi(e,t.end,n)));if(i.length>0){e=Math.min(e,...i.map((e=>e.offset))),n=Math.max(n,...i.map((e=>e.end))),t=n-e;let r=i.shift();r.offset=e,r.length=t,r.end=n,this.list=this.list.filter((e=>!i.includes(e)))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let r=e+t;return this.list.some((t=>t.offset<=e&&r<=t.end))}}function pi(e,t,r){return e<=t&&t<=r}class di extends hi{constructor(e,t){super(0),qr(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,r=await this.readChunk(e,t);return!!r&&r.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}hn.set("blob",class extends di{async readWhole(){this.chunked=!1;let e=await gn(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),i=await gn(n);return this.set(i,e,!0)}});var mi=Object.freeze({__proto__:null,default:Jn,Exifr:Ln,fileParsers:ln,segmentParsers:cn,fileReaders:hn,tagKeys:wn,tagValues:_n,tagRevivers:Cn,createDictionary:yn,extendDictionary:bn,fetchUrlAsArrayBuffer:mn,readBlobAsArrayBuffer:gn,chunkedProps:xn,otherSegments:Sn,segments:In,tiffBlocks:En,segmentsAndBlocks:Pn,tiffExtractables:An,inheritables:On,allFormatters:Rn,Options:Dn,parse:Un,gpsOnlyOptions:ei,gps:ti,thumbnailOnlyOptions:ri,thumbnail:ni,thumbnailUrl:ii,orientationOnlyOptions:ai,orientation:oi,rotations:si,get rotateCanvas(){return ui},get rotateCss(){return li},rotation:ci});hn.set("url",class extends di{async readWhole(){this.chunked=!1;let e=await mn(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let i=await Kr(this.input,{headers:n}),a=await i.arrayBuffer(),o=a.byteLength;if(416!==i.status)return o!==t&&(this.size=e+o),this.set(a,e,!0)}}),on.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:void 0!==typeof Vr?Vr(t)<<Vr(32)|Vr(r):void Zr("Trying to read 64b value but JS can only handle 53b numbers.")};class gi extends zn{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let r=this.parseBoxHead(e);if(t.push(r),0===r.length)break;e+=r.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return void 0===e.boxes&&this.parseSubBoxes(e),e.boxes.find((e=>e.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),r=this.file.getString(e+4,4),n=e+8;return 1===t&&(t=this.file.getUint64(e+8),n+=8),{offset:e,length:t,kind:r,start:n}}parseBoxFullHead(e){if(void 0!==e.version)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class vi extends gi{static canHandle(e,t){if(0!==t)return!1;let r=e.getUint16(2);if(r>50)return!1;let n=16,i=[];for(;n<r;)i.push(e.getString(n,4)),n+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;"meta"!==t.kind;)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,r){await this.file.ensureChunk(t,r);let n=this.file.subarray(t,r);this.createParser(e,n)}async findIcc(e){let t=this.findBox(e,"iprp");if(void 0===t)return;let r=this.findBox(t,"ipco");if(void 0===r)return;let n=this.findBox(r,"colr");void 0!==n&&await this.registerSegment("icc",n.offset+12,n.length)}async findExif(e){let t=this.findBox(e,"iinf");if(void 0===t)return;let r=this.findBox(e,"iloc");if(void 0===r)return;let n=this.findExifLocIdInIinf(t),i=this.findExtentInIloc(r,n);if(void 0===i)return;let[a,o]=i;await this.file.ensureChunk(a,o);let s=4+this.file.getUint32(a);a+=s,o-=s,await this.registerSegment("tiff",a,o)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,r,n,i,a=e.start,o=this.file.getUint16(a);for(a+=2;o--;){if(t=this.parseBoxHead(a),this.parseBoxFullHead(t),r=t.start,t.version>=2&&(n=3===t.version?4:2,i=this.file.getString(r+n+2,4),"Exif"===i))return this.file.getUintBytes(r,n);a+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let r=e.start,[n,i]=this.get8bits(r++),[a,o]=this.get8bits(r++),s=2===e.version?4:2,u=1===e.version||2===e.version?2:0,l=o+n+i,c=2===e.version?4:2,h=this.file.getUintBytes(r,c);for(r+=c;h--;){let e=this.file.getUintBytes(r,s);r+=s+u+2+a;let c=this.file.getUint16(r);if(r+=2,e===t)return[this.file.getUintBytes(r+o,n),this.file.getUintBytes(r+o+n,i)];r+=c*l}}}class yi extends vi{}qr(yi,"type","heic");class bi extends vi{}qr(bi,"type","avif"),ln.set("heic",yi),ln.set("avif",bi),yn(wn,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),yn(wn,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),yn(wn,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),yn(_n,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let wi=yn(_n,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const _i={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};wi.set(37392,_i),wi.set(41488,_i);const Ci={0:"Normal",1:"Low",2:"High"};function xi(e){return"object"==typeof e&&void 0!==e.length?e[0]:e}function Si(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map((e=>String.fromCharCode(e)))),"0"!==t[2]&&0!==t[2]||t.pop(),t.join(".")}function Ii(e){if("string"==typeof e){var[t,r,n,i,a,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(o)||(s.setHours(i),s.setMinutes(a),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function Ei(e){if("string"==typeof e)return e;let t=[];if(0===e[1]&&0===e[e.length-1])for(let r=0;r<e.length;r+=2)t.push(Pi(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(Pi(e[r],e[r+1]));return en(String.fromCodePoint(...t))}function Pi(e,t){return e<<8|t}wi.set(41992,Ci),wi.set(41993,Ci),wi.set(41994,Ci),yn(Cn,["ifd0","ifd1"],[[50827,function(e){return"string"!=typeof e?an(e):e}],[306,Ii],[40091,Ei],[40092,Ei],[40093,Ei],[40094,Ei],[40095,Ei]]),yn(Cn,"exif",[[40960,Si],[36864,Si],[36867,Ii],[36868,Ii],[40962,xi],[40963,xi]]),yn(Cn,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class Ai extends Gn{static canHandle(e,t){return 225===e.getUint8(t+1)&&1752462448===e.getUint32(t+4)&&"http://ns.adobe.com/"===e.getString(t+4,"http://ns.adobe.com/".length)}static headerLength(e,t){return"http://ns.adobe.com/xmp/extension/"===e.getString(t+4,"http://ns.adobe.com/xmp/extension/".length)?79:4+"http://ns.adobe.com/xap/1.0/".length+1}static findPosition(e,t){let r=super.findPosition(e,t);return r.multiSegment=r.extended=79===r.headerLength,r.multiSegment?(r.chunkCount=e.getUint8(t+72),r.chunkNumber=e.getUint8(t+76),0!==e.getUint8(t+77)&&r.chunkNumber++):(r.chunkCount=1/0,r.chunkNumber=-1),r}static handleMultiSegments(e){return e.map((e=>e.chunk.getString())).join("")}normalizeInput(e){return"string"==typeof e?e:on.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(e){let t={},r={};for(let e of Bi)t[e]=[],r[e]=0;return e.replace(Fi,((e,n,i)=>{if("<"===n){let n=++r[i];return t[i].push(n),`${e}#${n}`}return`${e}#${t[i].pop()}`}))}(e);let t=Ri.findAll(e,"rdf","Description");0===t.length&&t.push(new Ri("rdf","Description",void 0,e));let r,n={};for(let e of t)for(let t of e.properties)r=Ni(t.ns,n),ki(t,r);return function(e){let t;for(let r in e)t=e[r]=Xr(e[r]),void 0===t&&delete e[r];return Xr(e)}(n)}assignToOutput(e,t){if(this.localOptions.parse)for(let[r,n]of Object.entries(t))switch(r){case"tiff":this.assignObjectToOutput(e,"ifd0",n);break;case"exif":this.assignObjectToOutput(e,"exif",n);break;case"xmlns":break;default:this.assignObjectToOutput(e,r,n)}else e.xmp=t}}qr(Ai,"type","xmp"),qr(Ai,"multiSegment",!0),cn.set("xmp",Ai);class Oi{static findAll(e){return Di(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Oi.unpackMatch)}static unpackMatch(e){let t=e[1],r=e[2],n=e[3].slice(1,-1);return n=ji(n),new Oi(t,r,n)}constructor(e,t,r){this.ns=e,this.name=t,this.value=r}serialize(){return this.value}}class Ri{static findAll(e,t,r){if(void 0!==t||void 0!==r){t=t||"[\\w\\d-]+",r=r||"[\\w\\d-]+";var n=new RegExp(`<(${t}):(${r})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else n=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Di(e,n).map(Ri.unpackMatch)}static unpackMatch(e){let t=e[1],r=e[2],n=e[4],i=e[8];return new Ri(t,r,n,i)}constructor(e,t,r,n){this.ns=e,this.name=t,this.attrString=r,this.innerXml=n,this.attrs=Oi.findAll(r),this.children=Ri.findAll(n),this.value=0===this.children.length?ji(n):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return"rdf"===e&&("Seq"===t||"Bag"===t||"Alt"===t)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Ti(this.children.map(Mi));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let e={};for(let t of this.properties)ki(t,e);return void 0!==this.value&&(e.value=this.value),Xr(e)}}function ki(e,t){let r=e.serialize();void 0!==r&&(t[e.name]=r)}var Mi=e=>e.serialize(),Ti=e=>1===e.length?e[0]:e,Ni=(e,t)=>t[e]?t[e]:t[e]={};function Di(e,t){let r,n=[];if(!e)return n;for(;null!==(r=t.exec(e));)n.push(r);return n}function ji(e){if(function(e){return null==e||"null"===e||"undefined"===e||""===e||""===e.trim()}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return"true"===r||"false"!==r&&e.trim()}const Bi=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Fi=new RegExp(`(<|\\/)(${Bi.join("|")})`,"g");var Li=Object.freeze({__proto__:null,default:mi,Exifr:Ln,fileParsers:ln,segmentParsers:cn,fileReaders:hn,tagKeys:wn,tagValues:_n,tagRevivers:Cn,createDictionary:yn,extendDictionary:bn,fetchUrlAsArrayBuffer:mn,readBlobAsArrayBuffer:gn,chunkedProps:xn,otherSegments:Sn,segments:In,tiffBlocks:En,segmentsAndBlocks:Pn,tiffExtractables:An,inheritables:On,allFormatters:Rn,Options:Dn,parse:Un,gpsOnlyOptions:ei,gps:ti,thumbnailOnlyOptions:ri,thumbnail:ni,thumbnailUrl:ii,orientationOnlyOptions:ai,orientation:oi,rotations:si,get rotateCanvas(){return ui},get rotateCss(){return li},rotation:ci});let Ui=Hr("fs",(e=>e.promises));hn.set("fs",class extends di{async readWhole(){this.chunked=!1,this.fs=await Ui;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await Ui,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){void 0===this.fh&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}}),hn.set("base64",class extends di{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,i=this.input;void 0===e?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),void 0===t&&(t=this.size);let a=e+t,o=r+4*Math.ceil(a/3);i=i.slice(r,o);let s=Math.min(t,this.size-e);if(Wr){let t=Gr.from(i,"base64").slice(n,n+s);return this.set(t,e,!0)}{let t=this.subarray(e,s,!0),r=atob(i),a=t.toUint8();for(let e=0;e<s;e++)a[e]=r.charCodeAt(n+e);return t}}});class $i extends zn{static canHandle(e,t){return 18761===t||19789===t}extendOptions(e){let{ifd0:t,xmp:r,iptc:n,icc:i}=e;r.enabled&&t.deps.add(700),n.enabled&&t.deps.add(33723),i.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:r,icc:n}=this.options;if(e.enabled||t.enabled||r.enabled||n.enabled){let e=Math.max(tn(this.options),this.options.chunkSize);await this.file.ensureChunk(0,e),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}qr($i,"type","tiff"),ln.set("tiff",$i);let zi=Hr("zlib");const Gi=["ihdr","iccp","text","itxt","exif"];class Vi extends zn{constructor(...e){super(...e),qr(this,"catchError",(e=>this.errors.push(e))),qr(this,"metaChunks",[]),qr(this,"unknownChunks",[])}static canHandle(e,t){return 35152===t&&2303741511===e.getUint32(0)&&218765834===e.getUint32(4)}async parse(){let{file:e}=this;await this.findPngChunksInRange("PNG\r\n\n".length,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:r}=this;for(;e<t;){let t=r.getUint32(e),n=r.getUint32(e+4),i=r.getString(e+4,4).toLowerCase(),a=t+4+4+4,o={type:i,offset:e,length:a,start:e+4+4,size:t,marker:n};Gi.includes(i)?this.metaChunks.push(o):this.unknownChunks.push(o),e+=a}}parseTextChunks(){let e=this.metaChunks.filter((e=>"text"===e.type));for(let t of e){let[e,r]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(e,r)}}injectKeyValToIhdr(e,t){let r=this.parsers.ihdr;r&&r.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((e=>"ihdr"===e.type));e&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((e=>"exif"===e.type));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((e=>"itxt"===e.type));for(let t of e)"XML:com.adobe.xmp"===t.chunk.getString(0,"XML:com.adobe.xmp".length)&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((e=>"iccp"===e.type));if(!e)return;let{chunk:t}=e,r=t.getUint8Array(0,81),n=0;for(;n<80&&0!==r[n];)n++;let i=n+2,a=t.getString(0,n);if(this.injectKeyValToIhdr("ProfileName",a),zr){let e=await zi,r=t.getUint8Array(i);r=e.inflateSync(r),this.injectSegment("icc",r)}}}qr(Vi,"type","png"),ln.set("png",Vi),yn(wn,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),bn(wn,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Wi=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];bn(wn,"ifd0",Wi),bn(wn,"exif",Wi),yn(_n,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Yi extends Gn{static canHandle(e,t){return 224===e.getUint8(t+1)&&1246120262===e.getUint32(t+4)&&0===e.getUint8(t+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}qr(Yi,"type","jfif"),qr(Yi,"headerLength",9),cn.set("jfif",Yi),yn(wn,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Hi extends Gn{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}qr(Hi,"type","ihdr"),cn.set("ihdr",Hi),yn(wn,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),yn(_n,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Ki extends Gn{static canHandle(e,t){return 226===e.getUint8(t+1)&&1229144927===e.getUint32(t+4)}static findPosition(e,t){let r=super.findPosition(e,t);return r.chunkNumber=e.getUint8(t+16),r.chunkCount=e.getUint8(t+17),r.multiSegment=r.chunkCount>1,r}static handleMultiSegments(e){return function(e){let t=function(e){let t=e[0].constructor,r=0;for(let t of e)r+=t.length;let n=new t(r),i=0;for(let t of e)n.set(t,i),i+=t.length;return n}(e.map((e=>e.chunk.toUint8())));return new on(t)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Zr("ICC header is too short");for(let[t,r]of Object.entries(qi)){t=parseInt(t,10);let n=r(this.chunk,t);"\0\0\0\0"!==n&&e.set(t,n)}}parseTags(){let e,t,r,n,i,{raw:a}=this,o=this.chunk.getUint32(128),s=132,u=this.chunk.byteLength;for(;o--;){if(e=this.chunk.getString(s,4),t=this.chunk.getUint32(s+4),r=this.chunk.getUint32(s+8),n=this.chunk.getString(t,4),t+r>u)return;i=this.parseTag(n,t,r),void 0!==i&&"\0\0\0\0"!==i&&a.set(e,i),s+=12}}parseTag(e,t,r){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,r);case"sig ":return this.parseSig(t)}if(!(t+r>this.chunk.byteLength))return this.chunk.getUint8Array(t,r)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return en(this.chunk.getString(e+12,t))}parseText(e,t){return en(this.chunk.getString(e+8,t-8))}parseSig(e){return en(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,r=t.getUint32(e+8),n=t.getUint32(e+12),i=e+16,a=[];for(let o=0;o<r;o++){let r=t.getString(i+0,2),o=t.getString(i+2,2),s=t.getUint32(i+4),u=t.getUint32(i+8)+e,l=en(t.getUnicodeString(u,s));a.push({lang:r,country:o,text:l}),i+=n}return 1===r?a[0].text:a}translateValue(e,t){return"string"==typeof e?t[e]||t[e.toLowerCase()]||e:t[e]||e}}qr(Ki,"type","icc"),qr(Ki,"multiSegment",!0),qr(Ki,"headerLength",18);const qi={4:Xi,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map((e=>e.toString(10))).join(".")},12:Xi,16:Xi,20:Xi,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,i=e.getUint16(t+4),a=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,i,a,o,s))},36:Xi,40:Xi,48:Xi,52:Xi,64:(e,t)=>e.getUint32(t),80:Xi};function Xi(e,t){return en(e.getString(t,4))}cn.set("icc",Ki),yn(wn,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Qi={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ji={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};yn(_n,"icc",[[4,Qi],[12,Ji],[40,Object.assign({},Qi,Ji)],[48,Qi],[80,Qi],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Zi extends Gn{static canHandle(e,t,r){return 237===e.getUint8(t+1)&&"Photoshop"===e.getString(t+4,9)&&void 0!==this.containsIptc8bim(e,t,r)}static headerLength(e,t,r){let n,i=this.containsIptc8bim(e,t,r);if(void 0!==i)return n=e.getUint8(t+i+7),n%2!=0&&(n+=1),0===n&&(n=4),i+8+n}static containsIptc8bim(e,t,r){for(let n=0;n<r;n++)if(this.isIptcSegmentHead(e,t+n))return n}static isIptcSegmentHead(e,t){return 56===e.getUint8(t)&&943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,r=!1;for(let n=0;n<t;n++)if(28===this.chunk.getUint8(n)&&2===this.chunk.getUint8(n+1)){r=!0;let t=this.chunk.getUint16(n+3),i=this.chunk.getUint8(n+2),a=this.chunk.getLatin1String(n+5,t);e.set(i,this.pluralizeValue(e.get(i),a)),n+=4+t}else if(r)break;return this.translate(),this.output}pluralizeValue(e,t){return void 0!==e?e instanceof Array?(e.push(t),e):[e,t]:t}}qr(Zi,"type","iptc"),qr(Zi,"translateValues",!1),qr(Zi,"reviveValues",!1),cn.set("iptc",Zi),yn(wn,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),yn(_n,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const ea=Li,ta=function(e,t,r){void 0===r&&(r=2);const n=100*(10^r);return Math.trunc(e/t*n)/n},ra=(e,t)=>Math.floor(e*t),na=e=>{const t=[];return e.forEach((e=>{t.push(e.x,e.y)})),t},ia=e=>Boolean(e.transferToImageBitmap),aa=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);const r="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(e,t):document.createElement("canvas");r.width=e,r.height=t;const n=r.getContext("2d",{alpha:!1,willReadFrequently:!0});return n.imageSmoothingEnabled=!1,n},oa=e=>{e.canvas.width=1,e.canvas.height=1,e.clearRect(0,0,1,1)},sa=e=>new Blob([e],{type:"image/jpeg"}),ua=e=>URL.createObjectURL(e),la=async e=>"arrayBuffer"in e?new Uint8ClampedArray(await e.arrayBuffer()):new Promise(((t,r)=>{const n=new FileReader;n.onload=e=>{t(new Uint8ClampedArray(e.target.result))},n.onerror=e=>{r(e)},n.readAsArrayBuffer(e)})),ca=async e=>{const t=ua(e);return ha(t)},ha=e=>new Promise((t=>{const r=new Image;r.onload=()=>{r.onload=null,t(r)},r.src=e})),fa=function(e,t){return void 0===t&&(t=sr.userOptions.jpegQuality/100),ia(e)?e.convertToBlob({type:"image/jpeg",quality:t}):new Promise((t=>{e.toBlob((e=>{t(e)}),"image/jpeg",sr.userOptions.jpegQuality/100)}))},pa=async(e,t)=>{const r=await fa(e,t);return await la(r)},da=(e,t)=>{const r=aa();r.putImageData(e,0,0);const n=pa(r.canvas,t);return oa(r),n},ma=async e=>{var t;const[r,n]=await Promise.all([mr.files.add({jpegBytes:e.originalImage}),mr.files.add({jpegBytes:null!=(t=e.capturedImage)?t:e.originalImage})]);return{documentBoundary:e.documentBoundary,originalDocumentBoundary:e.originalDocumentBoundary,ocrQuality:e.ocrQuality,originalImageId:r,capturedImageId:n}},ga=async e=>{const[t,r]=await mr.files.bulkGet([e.originalImageId,e.capturedImageId]);return{...e,originalImage:t.jpegBytes,capturedImage:r.jpegBytes}};class va{constructor(e){let{aspectRatioMin:t=0,aspectRatioMax:r=0,focalLength:n=-1,documentSize:i={width:0,height:0}}=e;this.aspectRatioMin=t,this.aspectRatioMax=r,this.focalLength=n,this.documentSize=i}}let ya,ba,wa,_a,Ca,xa,Sa,Ia,Ea,Pa;!function(e){e[e.None=0]="None",e[e.Loading=1]="Loading",e[e.Initialized=2]="Initialized"}(ya||(ya={})),function(e){e[e.PF_BGR888=0]="PF_BGR888",e[e.PF_BGRA8888=1]="PF_BGRA8888",e[e.PF_RGBA8888=2]="PF_RGBA8888"}(ba||(ba={})),function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.All=3]="All"}(wa||(wa={})),function(e){e[e.NotFound=0]="NotFound",e[e.HighImageQuality=1]="HighImageQuality",e[e.LowImageQuality=5]="LowImageQuality"}(_a||(_a={})),function(e){e[e.NotFound=0]="NotFound",e[e.Found=1]="Found",e[e.AspectRatioNotMatch=2]="AspectRatioNotMatch",e[e.DocumentIsTooSmall=4]="DocumentIsTooSmall"}(Ca||(Ca={})),function(e){e[e.SetDocumentHints=0]="SetDocumentHints",e[e.SetOffsetFromBoundaries=1]="SetOffsetFromBoundaries",e[e.UseSmoothedEdgeDetection=2]="UseSmoothedEdgeDetection",e[e.SetImageQualityMinValue=3]="SetImageQualityMinValue"}(xa||(xa={})),function(e){e[e.Quality=0]="Quality",e[e.Fast=1]="Fast",e[e.QualityFast=2]="QualityFast"}(Sa||(Sa={})),function(e){e[e.NoError=0]="NoError",e[e.WasmIsAlreadyStarted=1]="WasmIsAlreadyStarted",e[e.WasmNotStarted=2]="WasmNotStarted",e[e.InvalidArgument=3]="InvalidArgument",e[e.ImageNotReady=4]="ImageNotReady",e[e.BufferIsTooSmall=5]="BufferIsTooSmall",e[e.LicenseError=6]="LicenseError",e[e.NotImplemented=7]="NotImplemented",e[e.UnknownError=8]="UnknownError"}(Ia||(Ia={})),function(e){e[e.HEAPU8=0]="HEAPU8",e[e.HEAP32=1]="HEAP32",e[e.HEAPF32=2]="HEAPF32",e[e.HEAPF64=3]="HEAPF64"}(Ea||(Ea={})),Ea.HEAPU8,Ea.HEAP32,Ea.HEAPF32,Ea.HEAPF64,function(e){e[e.Idle=0]="Idle",e[e.Capture=1]="Capture",e[e.ResultReady=2]="ResultReady"}(Pa||(Pa={}));class Aa{constructor(e,t,r){this.width=t,this.height=r,this.canvas=document.getElementById(e),this.canvas.width=t,this.canvas.style.width=t+"px",this.canvas.height=r,this.canvas.style.height=r+"px",this.context=this.canvas.getContext("2d",{alpha:!1}),this.context.imageSmoothingEnabled=!1}getBMPData(){return this.context.getImageData(0,0,this.width,this.height)}toJpegBlob(){return new Promise((e=>{this.canvas.toBlob((t=>{e(t)}),"image/jpeg",sr.userOptions.jpegQuality/100)}))}async getJpegData(){const e=await this.toJpegBlob();return await la(e)}drawFrame(e,t){const r=t||[0,0,this.width,this.height];this.context.clearRect(0,0,this.width,this.height),this.context.drawImage(e,r[0],r[1],r[2],r[3])}static getcImageStruct(e,t){return new Int32Array([e,t,4*e,32,300])}destroy(){this.canvas=null,this.context=null}}const Oa=e=>{const t=[];for(let r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t},Ra=e=>{const t=[];return e.forEach((e=>{t.push(e.x,e.y)})),new Int32Array(t)};let ka=null;const Ma=()=>ka,Ta=new class{constructor(){this.isRunning=!1,this.start=async e=>{let{videoEl:t,areaOfInterest:r,frameBoundaryPadding:n,onBestDocumentGet:i,onNextFrame:a}=e;if(this.isRunning)return;this.isRunning=!0;const{width:o,height:s}=r,{scale:u,scaledWidth:l,scaledHeight:c}=((e,t)=>{const r=sr.capture.minDimension/Math.min(e,t);return{scale:r,scaledWidth:Math.floor(r*e),scaledHeight:Math.floor(r*t)}})(o,s);this.originalCanvas=new Aa("ABBYY_Capture_Module__Container_canvas-original",o,s),this.scaledCanvas=new Aa("ABBYY_Capture_Module__Container_canvas-scaled",l,c),this.bestCanvas=new Aa("ABBYY_Capture_Module__Container_canvas-best",o,s),this.scale=u,this.bmpData=null,this.videoEl=t,this.onBestDocumentGet=i,this.onNextFrame=a,this.originalCanvasClip=[-r.x,-r.y,t.videoWidth,t.videoHeight],this.scaledCanvasClip=this.originalCanvasClip.map((e=>e*this.scale)),await Ma().startImageDetection(l,c,n,sr.userOptions.enableSharpnessFilter),this.captureNextFrame()},this.drawFrameAccordingOs=()=>{Kt()?this.scaledCanvas.drawFrame(this.originalCanvas.canvas):this.scaledCanvas.drawFrame(this.videoEl,this.scaledCanvasClip)},this.captureNextFrame=async()=>{if(!this.isRunning)return;this.originalCanvas.drawFrame(this.videoEl,this.originalCanvasClip),this.drawFrameAccordingOs(),this.bmpData=this.scaledCanvas.getBMPData();const e=await Ma().captureNextFrame(m(this.bmpData.data,[this.bmpData.data.buffer]));delete this.bmpData,e.isNewBest&&(Kt()&&sr.userOptions.preferredCameraResolution===nr.Resolution4K?this.bestFrameJpegData=await this.originalCanvas.getJpegData():this.bestCanvas.drawFrame(this.originalCanvas.canvas),this.bestEdges=e.vertices),e.status===Pa.ResultReady||0!==e.imageQualityFlags&&sr.userOptions.enableSharpnessFilter?0!==e.imageQualityFlags&&sr.userOptions.enableSharpnessFilter?this.onNextFrame(new Int32Array([0,0,0,0,0,0,0,0]),e.frameStatus,e.status,e.quality):(this.onNextFrame(e.vertices,e.frameStatus,e.status,e.quality),await this.returnResult()):this.onNextFrame(e.vertices,e.frameStatus,e.status,e.quality),requestAnimationFrame(this.captureNextFrame)},this.returnResult=async()=>{const e=await this.getFrameData(),t=Oa(this.bestEdges.map((e=>e/this.scale)));this.onBestDocumentGet(e,t)}}async stop(){this.isRunning&&(this.isRunning=!1,this.bestCanvas.destroy(),this.bestCanvas=null,this.originalCanvas.destroy(),this.originalCanvas=null,this.scaledCanvas.destroy(),this.scaledCanvas=null,await Ma().stopImageDetection())}getFrameData(){return Kt()&&sr.userOptions.preferredCameraResolution===nr.Resolution4K?Promise.resolve(this.bestFrameJpegData):this.bestCanvas.getJpegData()}},Na={loadWasmScripts:async()=>Ma().load(sr.userOptions.wasmFilesPath),checkLicense:async e=>Ma().checkLicense(e),setWasmDocumentConfig:async()=>{const{aspectRatioMin:e,aspectRatioMax:t,documentSize:r}=sr.userOptions,n=new va({aspectRatioMin:e,aspectRatioMax:t,documentSize:Lt[r]});return Ma().setDocumentHints(n)},checkQualityAssessmentForOCR:async(e,t)=>sr.userOptions.enableQualityAssessmentForOCR?Ma().checkQualityOCR(e,Ra(t)):null,recropImage:async function(e,t,r){return void 0===r&&(r=sr.userOptions.jpegQuality),Ma().recropImage(e,Ra(t),r)},getResultFromSource:async(e,t,r,n)=>{const i=t||Number(e.width),a=r||Number(e.height),o=n||{x:0,y:0,width:i,height:a},s=((e,t,r,n)=>{const i=aa(t,r),a=n||[0,0,t,r];return i.drawImage(e,a[0],a[1],a[2],a[3]),i})(e,o.width,o.height,[-o.x,-o.y,i,a]),u=aa(t,r);u.drawImage(e,0,0);const[l,c]=await Promise.all([pa(s.canvas),Na.detectEdgesAndCrop(s.getImageData(0,0,s.canvas.width,s.canvas.height),sr.userOptions.jpegQuality)]);oa(u);const h=await Na.checkQualityAssessmentForOCR(l,c.edges);return{originalImage:l,documentBoundary:c.edges,originalDocumentBoundary:[...c.edges],capturedImage:c.data,ocrQuality:h}},detectEdgesAndCrop:async function(e,t){if(void 0===t&&(t=sr.userOptions.jpegQuality),sr.userOptions.enableAutoCrop)return Ma().detectEdgesAndCrop(m(e.data,[]),e.width,e.height,t);{const t=await Ma().detectEdges(m(e.data,[]),e.width,e.height);return{data:await da(e),edges:t}}},startImageDetection:(e,t,r,n)=>Ma().startImageDetection(e,t,r,n),captureNextFrame:async e=>{const t=await Ma().captureNextFrame(m(e,[e.buffer]));return{status:t.status,edges:Oa(t.vertices),frameStatus:t.frameStatus,best:t.isNewBest,quality:t.quality}},captureNextFrameFromBitmap:async(e,t,r)=>{const n=await Ma().captureNextFrameFromBitmap(m(e,[e]),t,r);return{status:n.status,edges:Oa(n.vertices),frameStatus:n.frameStatus,best:n.isNewBest,quality:n.quality}},stopImageDetection:()=>Ma().stopImageDetection(),captureProcess:{startCaptureProcess:async e=>{let{videoEl:t,areaOfInterest:r,onGetImage:n,onNextFrame:i,onStartHandleProcess:a}=e;sr.userOptions.enableAutoCapture&&await Ta.start({videoEl:t,areaOfInterest:r,frameBoundaryPadding:sr.userOptions.frameBoundaryPadding,onNextFrame:i,onBestDocumentGet:async(e,t)=>{a();const r=sr.userOptions.enableAutoCrop?await Na.recropImage(e,t):e,i=await Na.checkQualityAssessmentForOCR(e,t),o={originalImage:e,documentBoundary:t,originalDocumentBoundary:[...t],capturedImage:r,ocrQuality:i};await ma(o),n({...o,originalImage:sa(o.originalImage),capturedImage:o.capturedImage?sa(o.capturedImage):void 0})}})},stopCaptureProcess:async()=>{await Ta.stop()}}},Da=Na,ja=e=>e.some((e=>e>0)),Ba=async function(e,t){void 0===t&&(t=90);const r=(e=>{const t=e%360;return t<0?360+t:t})(t),n=await ca(e.originalImage),{width:i,height:a}=$a(n.naturalWidth,n.naturalHeight,t),o={...e,originalImage:await La(n,r),capturedImage:e.capturedImage?await Fa(e.capturedImage,r):void 0};return ja(Ra(e.documentBoundary))&&(o.documentBoundary=0===t?e.documentBoundary:Ua(e.documentBoundary,i,a,r)),ja(Ra(e.originalDocumentBoundary))&&(o.originalDocumentBoundary=0===t?e.originalDocumentBoundary:Ua(e.originalDocumentBoundary,i,a,t)),o},Fa=async function(e,t){void 0===t&&(t=90);const r=await ca(e);return await La(r,t)},La=async function(e,t){void 0===t&&(t=90);const{width:r,height:n}=$a(e.naturalWidth,e.naturalHeight,t),i=aa(r,n),a=(e=>e*Math.PI/180)(t);i.translate(r/2,n/2),i.rotate(a),i.drawImage(e,-e.naturalWidth/2,-e.naturalHeight/2,e.naturalWidth,e.naturalHeight),i.rotate(-a),i.translate(-r/2,-n/2);const o=await fa(i.canvas,sr.userOptions.jpegQuality);return oa(i),o},Ua=(e,t,r,n)=>e.map((e=>{let i=e.x-r/2,a=e.y-t/2;switch(n){case 180:i=r/2-e.y,a=e.x-t/2;break;case 270:i=r/2-e.x,a=t/2-e.y}return{x:t/2-a,y:i+r/2}})),$a=(e,t,r)=>({width:r%180==0?e:t,height:r%180==0?t:e}),za=()=>{const e=Br();return{addImage:(0,_.useCallback)((t=>e(br(t))),[e]),replaceImage:(0,_.useCallback)((t=>e(_r(t))),[e]),saveData:(0,_.useCallback)((()=>e(Dr.saveImage())),[e]),switchToPreview:(0,_.useCallback)((()=>e(Dr.changeMode(fr.Preview))),[e]),changeStatus:(0,_.useCallback)((t=>e(Dr.changeStatus(t))),[e])}};var Ga="NOT_FOUND",Va=function(e,t){return e===t};function Wa(e,t){var r,n,i="object"==typeof t?t:{equalityCheck:t},a=i.equalityCheck,o=void 0===a?Va:a,s=i.maxSize,u=void 0===s?1:s,l=i.resultEqualityCheck,c=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,i=0;i<n;i++)if(!e(t[i],r[i]))return!1;return!0}}(o),h=1===u?(r=c,{get:function(e){return n&&r(n.key,e)?n.value:Ga},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}):function(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var i=r[n];return n>0&&(r.splice(n,1),r.unshift(i)),i.value}return Ga}return{get:n,put:function(t,i){n(t)===Ga&&(r.unshift({key:t,value:i}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(u,c);function f(){var t=h.get(arguments);if(t===Ga){if(t=e.apply(null,arguments),l){var r=h.getEntries(),n=r.find((function(e){return l(e.value,t)}));n&&(t=n.value)}h.put(arguments,t)}return t}return f.clearCache=function(){return h.clear()},f}function Ya(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function Ha(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a,o=0,s={memoizeOptions:void 0},u=n.pop();if("object"==typeof u&&(s=u,u=n.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var l=s,c=l.memoizeOptions,h=void 0===c?r:c,f=Array.isArray(h)?h:[h],p=Ya(n),d=e.apply(void 0,[function(){return o++,u.apply(null,arguments)}].concat(f)),m=e((function(){for(var e=[],t=p.length,r=0;r<t;r++)e.push(p[r].apply(null,arguments));return a=d.apply(null,e)}));return Object.assign(m,{resultFunc:u,memoizedResultFunc:d,dependencies:p,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),m};return i}const Ka=Ha(Wa)([e=>e.mode,e=>e.images],((e,t)=>({currentMode:e,imagesLength:t.entries.length}))),qa=(0,_.memo)((e=>{let{openCamera:t,openGallery:r,closeCapture:n}=e;return C().createElement("div",{className:"ABBYY_Capture_Module_Camera_Native_Button"},C().createElement("div",{className:"content"},C().createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0yOC42ODggMTU3LjVoMi4yNXYxMS4yNWgxMS4yNVYxNzFoLTExLjI1YTIuMjUgMi4yNSAwIDAgMS0yLjI1LTIuMjVWMTU3LjV6bTEyMy43NSAwdjExLjI1YTIuMjUgMi4yNSAwIDAgMS0yLjI1IDIuMjVoLTExLjI1di0yLjI1aDExLjI1VjE1Ny41aDIuMjV6bTAtMTQ2LjI1VjIyLjVoLTIuMjVWMTEuMjVoLTExLjI1VjloMTEuMjVhMi4yNSAyLjI1IDAgMCAxIDIuMjUgMi4yNXpNNDIuMTg4IDl2Mi4yNWgtMTEuMjVWMjIuNWgtMi4yNVYxMS4yNUEyLjI1IDIuMjUgMCAwIDEgMzAuOTM4IDloMTEuMjV6IiBmaWxsPSIjRjlDQTA0Ii8+CiAgICA8cGF0aCBkPSJNMTQyLjg3NSAxOEgzOC4yNWEuNTYyLjU2MiAwIDAgMC0uNTYzLjU2M3YxNDIuODc1YzAgLjMxLjI1Mi41NjIuNTYzLjU2MmgxMDQuNjI1YS41NjMuNTYzIDAgMCAwIC41NjMtLjU2MlYxOC41NjNhLjU2My41NjMgMCAwIDAtLjU2My0uNTYzeiIgZmlsbD0iI0VERjRGQyIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01NC45NzYgMTI5LjM3NWgzMS43OThhMS42MiAxLjYyIDAgMCAxIDEuNTM4IDEuNjg3IDEuNjE4IDEuNjE4IDAgMCAxLTEuNTM4IDEuNjg4SDU0Ljk3NmExLjYyIDEuNjIgMCAwIDEtMS41MzgtMS42ODggMS42MTggMS42MTggMCAwIDEgMS41MzgtMS42ODd6IiBmaWxsPSIjRkY2NTc1Ii8+CiAgICA8cGF0aCBkPSJNNTUuMDA2IDY4LjA2M2g3MS4xMTNhMS42MzIgMS42MzIgMCAwIDEgMS41NjkgMS42ODcgMS42MzMgMS42MzMgMCAwIDEtMS41NjkgMS42ODhINTUuMDA2YTEuNjMxIDEuNjMxIDAgMCAxLTEuNTY5LTEuNjg4IDEuNjMxIDEuNjMxIDAgMCAxIDEuNTctMS42ODh6TTU1LjAwNiA4NC45MzhoNzEuMTEzYTEuNjMyIDEuNjMyIDAgMCAxIDEuNTY5IDEuNjg3IDEuNjMzIDEuNjMzIDAgMCAxLTEuNTY5IDEuNjg4SDU1LjAwNmExLjYzMSAxLjYzMSAwIDAgMS0xLjU2OS0xLjY4OCAxLjYzMSAxLjYzMSAwIDAgMSAxLjU3LTEuNjg4ek01NS4wMDYgMTAxLjgxMmg3MS4xMTNhMS42MzcgMS42MzcgMCAwIDEgMS41NjkgMS42ODggMS42MzIgMS42MzIgMCAwIDEtMS41NjkgMS42ODhINTUuMDA2YTEuNjM2IDEuNjM2IDAgMCAxLTEuNTY5LTEuNjg4IDEuNjMgMS42MyAwIDAgMSAxLjU3LTEuNjg4eiIgZmlsbD0iIzAwMCIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01NC45NDcgNDEuNjI1aDE2LjEwNmExLjYwNSAxLjYwNSAwIDAgMSAxLjUxIDEuNjg4QTEuNjA2IDEuNjA2IDAgMCAxIDcxLjA1MiA0NUg1NC45NDdhMS42MDYgMS42MDYgMCAwIDEtMS41MS0xLjY4OCAxLjYwNiAxLjYwNiAwIDAgMSAxLjUxLTEuNjg3eiIgZmlsbD0iI0ZGNjU3NSIvPgogICAgPHBhdGggZD0iTTEyMC42NTYgNTAuMDYzYzMuODg0IDAgNy4wMzItMy4wMjMgNy4wMzItNi43NSAwLTMuNzI4LTMuMTQ4LTYuNzUtNy4wMzItNi43NS0zLjg4MyAwLTcuMDMxIDMuMDIyLTcuMDMxIDYuNzUgMCAzLjcyNyAzLjE0OCA2Ljc1IDcuMDMxIDYuNzV6IiBmaWxsPSIjRkY2NTc1Ii8+Cjwvc3ZnPgo="}),C().createElement("p",{className:"title"},Ft.captureSystemCameraTitle),C().createElement("p",{className:"text",dangerouslySetInnerHTML:{__html:Ft.captureSystemCameraText}})),C().createElement("div",{className:"buttons"},C().createElement("div",{className:"close-icon",onClick:n}),C().createElement("div",{className:"camera-icon",onClick:t}),C().createElement("div",{style:{visibility:er.captureScreen.galleryButton.visibility},className:"gallery-icon",onClick:r})))})),Xa=(0,_.memo)((()=>{const e=(0,_.useRef)(null),t=(0,_.useRef)(null),{addImage:r,replaceImage:n,saveData:i,switchToPreview:a,changeStatus:o}=za(),{currentMode:s,imagesLength:u}=T(Ka),[l,c]=(0,_.useState)(!1),h=(0,_.useCallback)((()=>{u?a():i()}),[a,i,u]),f=(0,_.useCallback)((()=>{window.setTimeout((()=>{"visible"!==document.visibilityState||e.current.files.length||t.current.files.length||(u?h():c(!1))}),500)}),[e,t,u,c,h]);(0,_.useEffect)((()=>(document.addEventListener("visibilitychange",f),()=>document.removeEventListener("visibilitychange",f))),[f]);const p=(0,_.useCallback)((()=>{c(!0),e.current.focus(),window.setTimeout((()=>{e.current.click()}),100)}),[]),d=(0,_.useCallback)((()=>{t.current.focus(),window.setTimeout((()=>{t.current.click()}),100)}),[]);(0,_.useEffect)((()=>()=>{e.current=null,t.current=null}),[]);const m=(0,_.useCallback)((async e=>{o(kr.PROCESSING),c(!0);try{var t;const i=e.target.files[0],a=null==(t=await ea.rotation(i))?void 0:t.deg,u=await(async(e,t)=>{let r=await ca(e);const n=Ht.getOS();return t&&Kt()&&"iOS"===n.name&&Number(n.version)<13.4&&(r=await ca(await La(r,t))),await Da.getResultFromSource(r)})(i,a);u.capturedImage.length<1e4&&(u.capturedImage=u.originalImage),"captureNative"===s?await r(u):await n(u)}catch(e){window.console.log(e)}finally{o(kr.IDLE)}}),[r,s,n,o]);return C().createElement(C().Fragment,null,!l&&C().createElement(qa,{openCamera:p,openGallery:d,closeCapture:h}),C().createElement("div",{style:{overflow:"hidden",width:0}},C().createElement("input",{ref:e,style:{position:"relative",top:-1e3},onChange:m,type:"file",capture:sr.userOptions.forceFrontCamera?"user":"environment",accept:"image/*"}),C().createElement("input",{ref:t,style:{position:"relative",top:-1e3},onChange:m,type:"file",accept:"image/*"})))}));Xa.displayName="CaptureNative";var Qa=r(6486);function Ja(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia||!navigator.mediaDevices.enumerateDevices)throw new Error("no_media_devices_support")}const Za=e=>{e.getTracks().forEach((t=>{t.stop(),e.removeTrack(t)}))},eo=async(e,t)=>{try{const r=await navigator.mediaDevices.getUserMedia({audio:!1,video:{...t,deviceId:{exact:e.deviceId}}});return Za(r),!0}catch(e){return!1}};var to=r(2492),ro=r.n(to);const no=()=>{const e=(e=>{switch(!0){case e<=600:return[600,800,1280,480,600,720];case e<=720:return[800,1280,1920,600,720,1080];case e<=1080:return[1280,1920,2560,720,1080,1440];case e<=1440:return[1920,2560,3840,1080,1440,2160];case e<=2160:return[2560,3840,5120,1440,2160,2880];default:return[3840,5120,7680,2160,2880,4320]}})(sr.userOptions.minCameraResolution),t=ro()({width:{min:e[0]},height:{min:e[3]}},sr.cameraConstraints);return(Xt()||Qt())&&(t.facingMode={exact:sr.userOptions.forceFrontCamera?"user":"environment"}),t};let io;!function(e){e.Unknown="Unknown",e.Allowed="Allowed",e.SystemPermissionDenied="SystemPermissionDenied",e.UserPermissionDenied="UserPermissionDenied",e.CouldNotStartVideoSource="CouldNotStartVideoSource",e.Generic="Generic"}(io||(io={}));const ao=e=>{const[t,r]=(0,_.useState)([]),n=(0,_.useMemo)(no,[]),i=(e=>{const[t,r]=(0,_.useState)(io.Unknown);return(0,_.useEffect)((()=>{navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((e=>{Za(e),r(io.Allowed)})).catch((t=>{if(t instanceof DOMException){const r=(new(Yt())).getBrowser().name.toLowerCase(),n=t.name,i=t.message;let a=io.Generic;r.includes("chrome")?"NotAllowedError"===n?"Permission denied by system"===i?a=io.SystemPermissionDenied:"Permission denied"===i&&(a=io.UserPermissionDenied):"NotReadableError"===n&&(a=io.CouldNotStartVideoSource):r.includes("safari")?"NotAllowedError"===n&&(a=io.UserPermissionDenied):r.includes("firefox")&&("NotFoundError"===n||"NotReadableError"===n?a=io.SystemPermissionDenied:"NotAllowedError"===n?a=io.UserPermissionDenied:"AbortError"===n&&(a=io.CouldNotStartVideoSource)),e(new Error(a))}}))}),[]),t})(e);return(0,_.useEffect)((()=>{if(i!==io.Allowed)return;let t=!0;const a=()=>{(async e=>(Ja(),(async(e,t)=>{const r=[];for(const n of e)await eo(n,t)&&r.push(n);return r})((await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),e)))(n).then((n=>{t&&(r(n),0===n.length&&e(new Error("no_cameras_available")))})).catch(e)};return navigator.mediaDevices.addEventListener("devicechange",a),a(),()=>{t=!1,navigator.mediaDevices.removeEventListener("devicechange",a)}}),[e,n,i]),t};var oo=r(308),so=r.n(oo);class uo{constructor(){Ja()}async getStream(e){return await navigator.mediaDevices.getUserMedia({video:{...no(),deviceId:e}})}async start(e,t){const r=await this.getStream(t.deviceId);this.currentStream=r,e.srcObject=this.currentStream,await e.play()}stop(){this.currentStream&&this.currentStream.getTracks().forEach((e=>{e.stop()})),this.currentStream=null}}let lo;!function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Stopped=2]="Stopped"}(lo||(lo={}));var co=r(3493),ho=r.n(co);class fo{constructor(){this.frameCount=0,this.startFrameTime=0,this.stopped=!1,this.init=e=>{const t=document.createElement("div");t.style.fontSize="24px",t.style.zIndex="10000",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.backgroundColor="black",t.style.color="white",t.innerHTML='\n<table>\n    <tr>\n        <td>FPS</td><td class="fps"></td>\n    </tr>\n    <tr>\n        <td>Worker RPS</td><td class="rps"></td>\n    </tr>\n    <tr>\n        <td>Video frame rate</td><td class="video-frame-rate"></td>\n    </tr>\n</table>\n',document.body.append(t),this.container=t,this.fpsElement=this.container.querySelector(".fps"),this.rpsElement=this.container.querySelector(".rps"),e.addEventListener("play",(()=>{const t=e.srcObject.getVideoTracks().pop().getSettings();this.videoFrameRateElement=this.container.querySelector(".video-frame-rate"),this.videoFrameRateElement.textContent=t.frameRate?String(t.frameRate):"unknown"})),this.measure()},this.measure=()=>{let e=performance.now(),t=0;const r=()=>{requestAnimationFrame((()=>{this.stopped||(t++,r())}))};setTimeout((function r(n){if(this.stopped)return;const i=(1e3/((performance.now()-e)/t)).toFixed();n.fpsElement.textContent=String(i),t=0,e=performance.now(),setTimeout(r,1e3,n)}),1e3,this),r()},this.tick=()=>{this.stopped=!1,0===this.frameCount&&(this.startFrameTime=performance.now()),this.frameCount++,this.drawRPS()},this.stop=()=>{this.stopped=!0,this.container&&(this.container.remove(),this.container=null),this.frameCount=0,this.startFrameTime=0},this.drawRPS=ho()((()=>{if(this.stopped)return;const e=(1e3/((performance.now()-this.startFrameTime)/this.frameCount)).toFixed();this.rpsElement.textContent=String(e),this.frameCount=0}),1e3,{leading:!1})}}let po=()=>({events:{},emit(e,...t){let r=this.events[e]||[];for(let e=0,n=r.length;e<n;e++)r[e](...t)},on(e,t){return this.events[e]?.push(t)||(this.events[e]=[t]),()=>{this.events[e]=this.events[e]?.filter((e=>t!==e))}}});const mo=(e,t)=>{const r=t.width/t.height,n=e.width/e.height,i={width:t.width,height:t.height,x:0,y:0};return n<r?(i.width=Math.floor(e.width*t.height/e.height),i.x=Math.floor((t.width-i.width)/2)):(i.height=Math.floor(e.height*t.width/e.width),i.y=Math.floor((t.height-i.height)/2)),i};var go,vo;!function(e){e[e.IDLE=0]="IDLE",e[e.PROCESSING=1]="PROCESSING",e[e.FINISHED=2]="FINISHED"}(go||(go={})),function(e){e[e.RUNNING=0]="RUNNING",e[e.STOPPED=1]="STOPPED"}(vo||(vo={}));class yo{constructor(e,t){this.lastFrameCtx=aa(),this.scaledFrameCtx=aa(),this.bestFrameCanvasCtx=aa(),this.bestEdges=[],this.frameStatus=go.IDLE,this.status=vo.STOPPED,this.calcCanvasCrop=zt(((e,t,r,n)=>mo({width:e,height:t},{width:r,height:n}))),this.initPanes=zt(((e,t)=>{const r=((e,t,r)=>Math.floor(e/Math.min(t,r)*100)/100)(this.minDimension,e,t);this.lastFrameCtx.canvas.width=e,this.lastFrameCtx.canvas.height=t,this.bestFrameCanvasCtx.canvas.width=e,this.bestFrameCanvasCtx.canvas.height=t,this.scaledFrameCtx.canvas.width=Math.floor(e*r),this.scaledFrameCtx.canvas.height=Math.floor(t*r)})),this.initEngine=zt((async(e,t)=>{this.status!==vo.STOPPED&&await this.stopImageDetection(),await Da.startImageDetection(e,t,this.frameBoundaryPadding,this.enableSharpnessFilter),this.status=vo.RUNNING})),this.onGetNewFrame=()=>{if(this.frameStatus!==go.IDLE)return;this.frameStatus=go.PROCESSING;const e=this.calcCanvasCrop(this.videoEl.offsetWidth,this.videoEl.offsetHeight,this.videoEl.videoWidth,this.videoEl.videoHeight);this.initPanes(e.width,e.height),this.saveLastFrame(e),requestAnimationFrame(this.processNextFrame)},this.saveLastFrame=e=>{this.lastFrameCtx.imageSmoothingEnabled=!1,this.lastFrameCtx.drawImage(this.videoEl,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},this.processNextFrame=async()=>{let e;await this.initEngine(this.scaledFrameCtx.canvas.width,this.scaledFrameCtx.canvas.height);const t=this.lastFrameCtx.canvas;if(ia(t)){const r=new OffscreenCanvas(t.width,t.height);r.getContext("2d",{alpha:!1}).drawImage(t,0,0),e=await Da.captureNextFrameFromBitmap(r.transferToImageBitmap(),this.scaledFrameCtx.canvas.width,this.scaledFrameCtx.canvas.height)}else{this.scaledFrameCtx.imageSmoothingEnabled=!1,this.scaledFrameCtx.drawImage(t,0,0,this.scaledFrameCtx.canvas.width,this.scaledFrameCtx.canvas.height);const r=this.scaledFrameCtx.getImageData(0,0,this.scaledFrameCtx.canvas.width,this.scaledFrameCtx.canvas.height);e=await Da.captureNextFrame(r.data)}const r=(o=e.edges,s=this.scaledFrameCtx.canvas,u=this.lastFrameCtx.canvas,n=((e,t,r)=>e.map((e=>((e,t,r)=>({x:ta(e.x,t),y:ta(e.y,r)}))(e,t,r))))(o,s.width,s.height),i=u.width,a=u.height,n.map((e=>((e,t,r)=>({x:ra(e.x,t),y:ra(e.y,r)}))(e,i,a))));var n,i,a,o,s,u;if(e.best&&(this.bestFrameCanvasCtx.imageSmoothingEnabled=!1,this.bestFrameCanvasCtx.drawImage(t,0,0,t.width,t.height),this.bestEdges=r),e.status!==Pa.ResultReady)this.emitter.emit("update",{width:t.width,height:t.height,edges:r,frameStatus:e.frameStatus}),this.frameStatus=go.IDLE;else{this.frameStatus=go.FINISHED;const e=await pa(this.bestFrameCanvasCtx.canvas);this.emitter.emit("finished",{edges:this.bestEdges,data:e})}},this.destroy=async()=>{this.frameStatus=go.FINISHED,this.status!==vo.STOPPED&&(await this.stopImageDetection(),this.status=vo.STOPPED),oa(this.scaledFrameCtx),oa(this.lastFrameCtx),oa(this.bestFrameCanvasCtx),this.scaledFrameCtx=null,this.lastFrameCtx=null,this.bestFrameCanvasCtx=null},this.emitter=po(),this.videoEl=e,this.minDimension=t.minDimension,this.enableSharpnessFilter=t.enableSharpnessFilter,this.frameBoundaryPadding=t.frameBoundaryPadding}async stopImageDetection(){await Da.stopImageDetection(),this.status=vo.STOPPED}on(e,t){return this.emitter.on(e,t)}}class bo{constructor(e){this.frameRate=30,this.frameDuration=0,this.prevFrameTime=0,this.handleVisiabilityChange=()=>{"visible"===document.visibilityState?this.videoEl.play():this.videoEl.pause()},this.startFrameDetection=()=>{"requestVideoFrameCallback"in this.videoEl?this.videoEl.requestVideoFrameCallback(this.videoCallback):this.rafId=requestAnimationFrame(this.onFrameUpdate)},this.stopFrameDetection=()=>{this.rafId&&cancelAnimationFrame(this.rafId)},this.handlePlay=()=>{this.startFrameDetection(),this.onPlay&&this.onPlay()},this.handleStop=()=>{this.stopFrameDetection(),this.onStop&&this.onStop()},this.handlePause=()=>{this.stopFrameDetection(),this.onPause&&this.onPause()},this.onFrameUpdate=()=>{Date.now()-this.prevFrameTime>=this.frameDuration&&(this.prevFrameTime=Date.now(),this.onUpdate()),this.rafId=requestAnimationFrame(this.onFrameUpdate)},this.videoCallback=()=>{this.videoEl&&(this.onUpdate(),this.videoEl.requestVideoFrameCallback(this.videoCallback))},this.destroy=()=>{document.removeEventListener("visibilitychange",this.handleVisiabilityChange),this.stopFrameDetection(),this.videoEl.removeEventListener("playing",this.handlePlay),this.videoEl.removeEventListener("ended",this.handleStop),this.videoEl.removeEventListener("pause",this.handlePause),this.videoEl.removeEventListener("abort",this.handleStop),this.videoEl=null},this.videoEl=e.videoEl,this.onUpdate=e.onUpdate,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onPause=e.onPause,this.frameDuration=1e3/this.frameRate,this.videoEl.addEventListener("playing",this.handlePlay),this.videoEl.addEventListener("ended",this.handleStop),this.videoEl.addEventListener("pause",this.handlePause),this.videoEl.addEventListener("abort",this.handleStop),document.addEventListener("visibilitychange",this.handleVisiabilityChange),this.videoEl.paused||this.handlePlay()}}const wo=C().memo((e=>{let{count:t,onClick:r,activePosition:n=0}=e;return t<1?null:C().createElement("div",{className:"CameraSwitcher",role:"button",onClick:r},C().createElement("div",{className:`CameraSwitcher-Container CameraSwitcher-pos${n}`},(e=>{const t=[];for(let r=0;r<e;r++)t.push(C().createElement("div",{key:r,className:"CameraSwitcher-Point"}));return t})(t),C().createElement("div",{className:"CameraSwitcher-Camera",style:{transform:`translateX(${35*n}px)`}},C().createElement("div",{className:"CameraSwitcher-CameraIcon"}))))}));function _o(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=_o(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const Co=C().memo((e=>{const t=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=_o(e))&&(n&&(n+=" "),n+=t);return n}("CaptureButton",{CaptureButtonLoader:e.loading});return C().createElement("button",{"data-testid":"capture-button-manual",className:t,disabled:e.disabled,onClick:e.onClick})})),xo=C().memo((e=>{let{onClick:t}=e;return C().createElement("button",{"data-testid":"capture-button-close",className:"CloseButton",onClick:t})}));function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},So.apply(this,arguments)}const Io=C().memo((e=>{let{onChange:t}=e;const[r,n]=(e=>{const[t,r]=(0,_.useState)(null),n=(0,_.useCallback)((t=>{const n=t.currentTarget.files;if(null===n||null===n[0])return;const i=n[0];e.some((e=>i.type===e))&&r(i)}),[e]);return[t,{type:"file",onChange:n,accept:e.join(",")}]})(["image/jpg","image/jpeg","image/png"]);return(0,_.useEffect)((()=>{null!==r&&t(r)}),[t,r]),C().createElement("div",{"data-testid":"capture-button-gallery",className:"UploadButton",style:{visibility:er.captureScreen.galleryButton.visibility}},C().createElement("input",So({className:"UploadButton-Input"},n)))})),Eo=C().memo((e=>{const{processImageData:t,capture:r,stopCapture:n,disableCapture:i,cameraCount:a,currentCameraIndex:o,changeCamera:s,processing:u,onError:l}=e,[c,h]=(0,_.useState)({manualCaptureDisabled:!1}),f=(0,_.useCallback)((async e=>{try{const r=await ca(e);await t(r)}catch(e){l(e)}}),[t,l]),p=(0,_.useCallback)((async()=>{h({manualCaptureDisabled:!0}),r()}),[r]);return C().createElement("div",{className:"CaptureBottomPanel"},C().createElement(xo,{onClick:n}),C().createElement("div",{"data-testid":"capture-button-camera",className:"CaptureBottomPanel-CentralContainer"},a>1&&C().createElement(wo,{count:a,activePosition:o,onClick:s}),C().createElement(Co,{loading:u,disabled:i||c.manualCaptureDisabled,onClick:p})),C().createElement(Io,{onChange:f}))})),Po=C().memo((e=>{const t="ABBYY_Capture_Module__MessagePage "+e.className,r="ABBYY_Capture_Module__MessagePage-Icon "+e.iconClassName;return C().createElement("div",{className:t,"data-testid":"message-page-message"},e.stylesUI&&e.svgPathD?C().createElement("div",{className:"ABBYY_Capture_Module__MessagePage-container"},C().createElement("svg",{className:"ABBYY_Capture_Module__MessagePage-loader",xmlns:"http://www.w3.org/2000/svg",width:"56",height:"56",viewBox:"0 0 56 56"},C().createElement("g",{fill:"none",fillRule:"evenodd"},C().createElement("circle",{cx:"28",cy:"28",r:"28",fill:e.stylesUI.loaderColor,fillOpacity:".01"}),C().createElement("path",{fill:e.stylesUI.loaderColor,fillRule:"nonzero",d:"M28 0v.05c1.14.231 2 1.24 2 2.45 0 1.21-.859 2.218-2 2.45v.164C15.09 6.296 5 16.539 5 29c0 13.255 11.417 24 25.5 24 10.703 0 19.866-6.206 23.648-15.004l.14-.334-.006.017C50.342 48.373 40.062 56 28 56 12.536 56 0 43.464 0 28 0 12.77 12.159.38 27.299.009l.1-.007L28 0z"}))),C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"56",height:"56",viewBox:"0 0 56 56",className:"ABBYY_Capture_Module__MessagePage-icon"},C().createElement("g",{fill:"none",fillRule:"evenodd"},C().createElement("path",{fill:e.stylesUI.iconColor,d:e.svgPathD,transform:"translate(16 16)"})))):C().createElement("div",{className:r}),C().createElement("span",{className:"ABBYY_Capture_Module__MessagePage-Text",style:e.stylesUI?{color:e.stylesUI.messageColor}:null},e.message))}));Po.displayName="MessagePage";const Ao=Po,Oo=_.memo((()=>_.createElement(_.Fragment,null,_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34",className:"CaptureFrame-Corner CaptureFrame-Corner_rec-0","data-testid":"capture-overlay-corner1",style:{display:er.captureScreen.corners.display}},_.createElement("path",{fill:er.captureScreen.corners.color,fillRule:"evenodd",stroke:"#000",strokeOpacity:".12",d:"M5 .5h28.5V1a4.34 4.34 0 0 1-4.34 4.34H6.84a1.5 1.5 0 0 0-1.5 1.5v22.32A4.34 4.34 0 0 1 1 33.5H.5V5A4.5 4.5 0 0 1 5 .5z"})),_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34",className:"CaptureFrame-Corner CaptureFrame-Corner_rec-90","data-testid":"capture-overlay-corner2",style:{display:er.captureScreen.corners.display}},_.createElement("path",{fill:er.captureScreen.corners.color,fillRule:"evenodd",stroke:"#000",strokeOpacity:".12",d:"M5 .5h28.5V1a4.34 4.34 0 0 1-4.34 4.34H6.84a1.5 1.5 0 0 0-1.5 1.5v22.32A4.34 4.34 0 0 1 1 33.5H.5V5A4.5 4.5 0 0 1 5 .5z"})),_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34",className:"CaptureFrame-Corner CaptureFrame-Corner_rec-180","data-testid":"capture-overlay-corner3",style:{display:er.captureScreen.corners.display}},_.createElement("path",{fill:er.captureScreen.corners.color,fillRule:"evenodd",stroke:"#000",strokeOpacity:".12",d:"M5 .5h28.5V1a4.34 4.34 0 0 1-4.34 4.34H6.84a1.5 1.5 0 0 0-1.5 1.5v22.32A4.34 4.34 0 0 1 1 33.5H.5V5A4.5 4.5 0 0 1 5 .5z"})),_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34",className:"CaptureFrame-Corner CaptureFrame-Corner_rec-270","data-testid":"capture-overlay-corner4",style:{display:er.captureScreen.corners.display}},_.createElement("path",{fill:er.captureScreen.corners.color,fillRule:"evenodd",stroke:"#000",strokeOpacity:".12",d:"M5 .5h28.5V1a4.34 4.34 0 0 1-4.34 4.34H6.84a1.5 1.5 0 0 0-1.5 1.5v22.32A4.34 4.34 0 0 1 1 33.5H.5V5A4.5 4.5 0 0 1 5 .5z"}))))),Ro=()=>_.createElement("div",{className:"DotsLoader"}),ko={camera_alert_closer:()=>C().createElement(C().Fragment,null,C().createElement("div",{className:"Closer-Animation"},C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"66",viewBox:"0 0 6 66",className:"online_capture-closer rec-0"},C().createElement("path",{fill:er.captureScreen.corners.color,fillRule:"evenodd",stroke:"#000",strokeOpacity:".165",d:"M.499.527L.7 65.49c1.402.09 2.677-.46 3.56-1.389C5.029 63.294 5.5 62.202 5.5 61V5c0-1.243-.504-2.368-1.318-3.182C3.259.895 1.938.372.499.528z"})),C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"66",viewBox:"0 0 6 66",className:"online_capture-closer rec-180"},C().createElement("path",{fill:er.captureScreen.corners.color,fillRule:"evenodd",stroke:"#000",strokeOpacity:".165",d:"M.499.527L.7 65.49c1.402.09 2.677-.46 3.56-1.389C5.029 63.294 5.5 62.202 5.5 61V5c0-1.243-.504-2.368-1.318-3.182C3.259.895 1.938.372.499.528z"})),C().createElement("div",{className:"online_capture-document_closer-animation_landscape_top"}),C().createElement("div",{className:"online_capture-document_closer-animation_landscape_bottom"})),C().createElement("div",{className:"CaptureOverlay-Title","data-testid":"capture-overlay-message"},C().createElement("div",{className:"CaptureOverlay-Text CaptureOverlay-Title_yellow"},Ft.camera_alert_closer),C().createElement(Ro,null))),camera_alert_searching:()=>_.createElement("div",{className:"CaptureOverlay-Title","data-testid":"capture-overlay-message"},_.createElement("div",{className:"CaptureOverlay-Text"},Ft.camera_alert_searching),_.createElement(Ro,null)),camera_alert_sharpness_filter:()=>_.createElement("div",{className:"CaptureOverlay-Title","data-testid":"capture-overlay-message"},_.createElement("div",{className:"CaptureOverlay-Text"},Ft.camera_alert_sharpness_filter))},Mo=C().memo((e=>{const{text:t}=e,r=ko[t];return C().createElement("div",{className:"CaptureOverlay"},C().createElement(Oo,null),r?C().createElement(r,null):C().createElement("div",{className:"CaptureOverlay-Title","data-testid":"capture-overlay-message"},Ft[t]))}));var To;!function(e){e[e.INITED=0]="INITED",e[e.NOT_VIDEO=1]="NOT_VIDEO"}(To||(To={}));const No=re((e=>({mode:e.mode,imagesLength:e.images.entries.length,deviceId:e.camera})),{addImage:br,changeStatus:Dr.changeStatus,saveImage:Dr.saveImage,replaceImage:_r,switchToPreview:()=>Dr.changeMode(fr.Preview),switchCamera:Dr.changeCamera})((e=>{var t;const{addImage:r,replaceImage:n,saveImage:i,switchCamera:a,switchToPreview:o,changeStatus:s,mode:u,deviceId:l,imagesLength:c}=e,h=(0,_.useRef)(null),[f,p]=(0,_.useState)({status:To.INITED,errorMessage:null}),[d,m]=(0,_.useState)(null),g=(0,_.useCallback)((e=>{p({status:To.NOT_VIDEO,errorMessage:e.message})}),[p]),v=ao(g),[y,b]=(0,_.useState)(null),w=(0,_.useCallback)((async e=>{u!==fr.Capture?await n(e):await r(e)}),[u,n,r]),x=(0,_.useCallback)((async(e,t,r,n)=>{s(kr.PROCESSING);const i=await Da.getResultFromSource(e,t,r,n);i&&(i.capturedImage.length<1e4&&(i.capturedImage=i.originalImage),await w(i)),s(kr.IDLE)}),[w,s]),S=(0,_.useCallback)((async()=>{if(null===h.current)return;const e=h.current;await x(e,e.videoWidth,e.videoHeight,mo({width:e.offsetWidth,height:e.offsetHeight},{width:e.videoWidth,height:e.videoHeight}))}),[x]),I=(0,_.useCallback)((()=>{c>0&&"SingleCapture"!==sr.userOptions.mode?o():i()}),[c,o,i]),E=(0,_.useMemo)((()=>{const e=v.findIndex((e=>e.deviceId===l));return-1!==e?e:0}),[v,l]),P=(0,_.useCallback)((()=>{const e=(E+1)%v.length;a(v[e].deviceId)}),[v,a,E]),A=(0,_.useCallback)((0,Qa.throttle)((e=>{b(e.frameStatus)}),300),[b]),O=(0,_.useCallback)((e=>{m({width:e.width,height:e.height,points:na(e.edges).join(",")})}),[m]),R=(0,_.useCallback)((e=>{O(e),A(e)}),[O,A]),k=(0,_.useCallback)((async e=>{s(kr.PROCESSING);const{data:t,edges:r}=e,n=sr.userOptions.enableAutoCrop?await Da.recropImage(t,r):t,i=await Da.checkQualityAssessmentForOCR(t,r);await w({originalImage:t,documentBoundary:r,originalDocumentBoundary:[...r],capturedImage:n,ocrQuality:i}),s(kr.IDLE)}),[w,s]),M=((e,t)=>{const[r,n]=(0,_.useState)(lo.Init);return(0,_.useEffect)((()=>{let r=!1;if(!e.current||!t)return so();r=!0;const i=new uo;return i.start(e.current,t).then((()=>{r?n(lo.Started):(n(lo.Stopped),i.stop())})),()=>{r&&(n(lo.Stopped),i.stop()),r=!1}}),[e,t,n]),r})(h,null!=(t=v.find((e=>e.deviceId===l)))?t:v[0]);return((e,t)=>{const{disable:r,debug:n,minDimension:i,enableSharpnessFilter:a,frameBoundaryPadding:o,onUpdate:s,onFinished:u}=t;(0,_.useEffect)((()=>{if(r||null===e.current)return so();const t=[],l=e.current,c=new yo(l,{minDimension:i,enableSharpnessFilter:a,frameBoundaryPadding:o});if(n){const e=new fo;e.init(l),t.push(c.on("update",e.tick)),t.push(c.on("finished",e.stop)),t.push(e.stop)}t.push(c.on("update",s)),t.push(c.on("finished",u)),t.push(c.destroy);const h=new bo({videoEl:l,onUpdate:c.onGetNewFrame});return t.push(h.destroy),()=>t.forEach((e=>e()))}),[e,s,u,r,i,a,o,n])})(h,{onUpdate:R,onFinished:k,disable:!sr.userOptions.enableAutoCapture,minDimension:sr.capture.minDimension,debug:sr.userOptions.debug,enableSharpnessFilter:sr.userOptions.enableSharpnessFilter,frameBoundaryPadding:sr.userOptions.frameBoundaryPadding}),C().createElement("div",{className:"CaptureView"},C().createElement("video",{className:"CaptureView-Video",ref:h,muted:!0,playsInline:!0,controls:!1}),sr.userOptions.enableAutoCapture&&C().createElement(C().Fragment,null,y&&C().createElement(Mo,{text:y}),(null==d?void 0:d.points)&&C().createElement("svg",{className:"CaptureView-FramePane",viewBox:`0 0 ${d.width} ${d.height}`},C().createElement("polygon",{points:d.points,strokeLinecap:"round",strokeWidth:".25%",stroke:er.captureScreen.frame.color}))),f.status===To.NOT_VIDEO&&C().createElement(Ao,{message:Ft.camera_error}),C().createElement(Eo,{capture:S,stopCapture:I,processImageData:x,disableCapture:f.status===To.NOT_VIDEO||M!==lo.Started,onError:g,currentCameraIndex:E,cameraCount:v.length,changeCamera:P,processing:Boolean(y)}))}));var Do=r(7361),jo=r.n(Do);const Bo=e=>window.TouchEvent&&e instanceof TouchEvent?{x:e.touches[0].clientX,y:e.touches[0].clientY}:e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:void 0,Fo="ontouchstart"in window,Lo=Fo?{move:"touchmove",end:"touchend"}:{move:"mousemove",end:"mouseup"};class Uo extends C().Component{constructor(e){super(e),this.svgRef=(0,_.createRef)(),this.canvasRef=(0,_.createRef)(),this.magnifierRef=(0,_.createRef)(),this.lineRefs=[(0,_.createRef)(),(0,_.createRef)(),(0,_.createRef)(),(0,_.createRef)()],this.pointRefs=[(0,_.createRef)(),(0,_.createRef)(),(0,_.createRef)(),(0,_.createRef)()],this.dragEl=null,this.edgeColor=er.manualCropScreen.frameColor,this._dragStart=e=>{if(Fo&&e.nativeEvent instanceof MouseEvent)return;const t=Bo(e.nativeEvent),r=((e,t,r)=>{const n=r.x-e.left,i=r.y-e.top;return n<0||i<0||n>e.width||i>e.height?null:t.reduce(((e,t,r)=>{let[a,o]=e;const s=(t.x-n)*(t.x-n)+(t.y-i)*(t.y-i);return s<o?[r,s]:[a,o]}),[-1,Number.MAX_SAFE_INTEGER])[0]})(this.svgRef.current.getBoundingClientRect(),this.props.cropPoints,t);null!==r&&(this.dragEl={index:r,node:this.pointRefs[r].current,startEventPos:t,currentPos:{...this.props.cropPoints[r]}},this.state.showMagnifier&&(this.magnifierRef.current.style.display="block",this._updateMagnifier()),this.forceUpdate())},this._movePoint=ho()((e=>{if(!this.dragEl)return;this.dragEl.currentPos=this._getElementPos(this.dragEl.index,e);const{x:t,y:r}=this.dragEl.currentPos,n=this.dragEl.index===this.props.cropPoints.length-1?0:this.dragEl.index+1;this.dragEl.node.setAttribute("transform",this._getTranslate({x:t,y:r})),this.lineRefs[this.dragEl.index].current.setAttribute("x1",String(t)),this.lineRefs[this.dragEl.index].current.setAttribute("y1",String(r)),this.lineRefs[n].current.setAttribute("x2",String(t)),this.lineRefs[n].current.setAttribute("y2",String(r))}),100),this._dragMove=e=>{this.dragEl&&(e.preventDefault(),e.stopPropagation(),this._movePoint(e),this.state.showMagnifier&&this._updateMagnifier())},this._dragEnd=()=>{this.dragEl&&(this.props.updatePoint(this.dragEl.index,this.dragEl.currentPos),this.dragEl=null,this.state.showMagnifier&&(this.magnifierRef.current.style.display="none"),this.forceUpdate())},this._getElementPos=(e,t)=>{const{x:r,y:n}=Bo(t);return{x:Math.max(0,Math.min(this.props.cropPoints[e].x+r-this.dragEl.startEventPos.x,this.props.imgWidth)),y:Math.max(0,Math.min(this.props.cropPoints[e].y+n-this.dragEl.startEventPos.y,this.props.imgHeight))}},this._getTranslate=e=>{let{x:t,y:r}=e;return"translate("+t+", "+r+")"},this._renderPoints=()=>{const e=jo()(this.dragEl,"index",-1);return C().createElement(C().Fragment,null,this.props.cropPoints.map(((t,r)=>C().createElement("g",{key:r,transform:this._getTranslate(t),"data-id":r,ref:this.pointRefs[r],"data-testid":`crop-point-${r}`},C().createElement("circle",{r:e!==r||this.state.showMagnifier?e===r&&this.state.showMagnifier?0:9:15,fill:"transparent",stroke:this.edgeColor,strokeWidth:1}),C().createElement("circle",{fill:"transparent",r:this.props.svgExtraSpace,style:{cursor:"pointer"}})))))},this._renderLines=()=>C().createElement(C().Fragment,null,this.props.cropPoints.map(((e,t)=>{const r=0===t?this.props.cropPoints.length-1:t-1,n=this.props.cropPoints[r];return C().createElement("line",{ref:this.lineRefs[t],key:t,x1:e.x,x2:n.x,y1:e.y,y2:n.y,stroke:this.edgeColor,strokeWidth:1})}))),this._updateMagnifier=()=>{const e=this.magnifierRef.current,t=this.dragEl.currentPos;e.style.left=t.x-32+"px",e.style.top=t.y-100+"px",e.style.backgroundPosition=`${32-t.x}px ${32-t.y}px`,this._updateMagnifierCanvas()},this._updateMagnifierCanvas=()=>{const e=this.canvasRef.current.getContext("2d"),t=this.props.cropPoints.map((e=>({x:e.x-this.dragEl.currentPos.x+32,y:e.y-this.dragEl.currentPos.y+32})));t[this.dragEl.index]={x:32,y:32},e.clearRect(0,0,64,64),e.beginPath(),e.lineWidth=1,e.strokeStyle=this.edgeColor,e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()},this._updateMagnifierProps=()=>{this.magnifierRef.current.style.backgroundSize=`${this.props.imgWidth}px ${this.props.imgHeight}px`,this.magnifierRef.current.style.backgroundImage=`url("${this.props.img}")`},this.state={showMagnifier:Fo}}componentDidUpdate(){this.state.showMagnifier&&this._updateMagnifierProps()}componentDidMount(){document.addEventListener(Lo.move,this._dragMove,{passive:!1}),document.addEventListener(Lo.end,this._dragEnd,!0),this.state.showMagnifier&&this._updateMagnifierProps()}componentWillUnmount(){document.removeEventListener(Lo.move,this._dragMove),document.removeEventListener(Lo.end,this._dragEnd),this.svgRef=null,this.canvasRef=null,this.magnifierRef=null,this.lineRefs=null,this.pointRefs=null}render(){const e=`${-this.props.svgExtraSpace} ${-this.props.svgExtraSpace} ${this.props.imgWidth+2*this.props.svgExtraSpace} ${this.props.imgHeight+2*this.props.svgExtraSpace}`;return C().createElement("div",null,C().createElement("svg",{className:"ABBYY_Capture_Module__CropView_CropLayer",ref:this.svgRef,onMouseDown:this._dragStart,onTouchStart:this._dragStart,viewBox:e},this._renderLines(),this._renderPoints()),this.state.showMagnifier&&C().createElement("div",{className:"ABBYY_Capture_Module__CropView_Magnifier",ref:this.magnifierRef,style:{borderColor:this.edgeColor}},C().createElement("canvas",{ref:this.canvasRef,width:64,height:64})))}}const $o=Uo,zo=e=>{const[t,r]=(0,_.useState)(!1),[n,i]=(0,_.useState)(!1),a=()=>r(!0),o=()=>{r(!1),i(!1)},s=()=>i(!0),u=()=>{Xt()?r(!1):r(!0),i(!1)};return(0,_.useEffect)((()=>{const t=e.current;if(t)return t.addEventListener("mouseenter",a),t.addEventListener("mouseleave",o),t.addEventListener("mousedown",s),t.addEventListener("mouseup",u),()=>{t.removeEventListener("mouseenter",a),t.removeEventListener("mouseleave",o),t.removeEventListener("mousedown",s),t.removeEventListener("mouseup",u)}}),[e.current]),[t,n]},Go=e=>{const t=(0,_.useRef)(null),[r,n]=zo(t),i=n?e.stylesUI.bgActiveColor:r?e.stylesUI.bgHoverColor:e.stylesUI.bgColor;return C().createElement("div",{className:e.className,onClick:e.onClick,"data-testid":e.dataTestId,ref:t,style:{display:e.stylesUI.display,backgroundColor:i}},C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},C().createElement("g",{fill:"none",fillRule:"evenodd"},C().createElement("path",{d:"M0 0h24v24H0z"}),C().createElement("path",{fill:n?e.stylesUI.activeColor:r?e.stylesUI.hoverColor:e.stylesUI.color,d:e.svgPathD}))))},Vo=re((e=>({current:e.images.currentImageIndex,max:e.images.entries.length})))((e=>{let{current:t,max:r}=e;return C().createElement(C().Fragment,null,Ft.page," ",t+1,r>1?` ${Ft.of} `+r:"")})),Wo=re((e=>({current:e.images.currentImageIndex,max:e.images.entries.length})),{goToNextImage:Dr.nextImage,goToPrevImage:Dr.prevImage})((e=>{const t="ABBYY_Capture_Module__Navbar_prev"+(e.current<1?" ABBYY_Capture_Module__Navbar_prev--disabled":""),r="ABBYY_Capture_Module__Navbar_next"+(e.current>=e.max-1?" ABBYY_Capture_Module__Navbar_next--disabled":"");return C().createElement(C().Fragment,null,e.max>1&&C().createElement(Go,{className:t,onClick:()=>e.goToPrevImage(),dataTestId:"navbar-prev",svgPathD:"M14.99 4l1.51 1.52-6.462 6.49L16.5 18.5 15.01 20 7 11.99z",stylesUI:e.stylesUIPrevImg}),C().createElement("div",{className:"ABBYY_Capture_Module__Navbar_pager","data-testid":"navbar-pager"},C().createElement(Vo,null)),e.max>1&&C().createElement(Go,{className:r,onClick:()=>e.goToNextImage(),dataTestId:"navbar-next",svgPathD:"M9.01 4L7.5 5.52l6.462 6.49L7.5 18.5 8.99 20 17 11.99z",stylesUI:e.stylesUINextImg}))})),Yo=e=>{let{children:t}=e;return C().createElement("div",{className:"ABBYY_Capture_Module__TopPanel"},t)},Ho=e=>{const t=(0,_.useRef)(null),[r,n]=zo(t),i=n?e.stylesUI.activeColor:r?e.stylesUI.hoverColor:e.stylesUI.color;return C().createElement("div",{className:e.className,onClick:e.onClick,"data-testid":e.dataTestId,ref:t},C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},C().createElement("path",{fill:i,d:e.svgPathDFrame}),C().createElement("circle",{cx:"15.5",cy:"15.5",r:"6.5",fill:"#fff"}),C().createElement("path",{fill:i,d:e.svgPathDIcon})))},Ko=e=>{const t=(0,_.useRef)(null),[r,n]=zo(t);return C().createElement("span",{className:e.className,onClick:e.onClick,"data-testid":e.dataTestId,ref:t,style:{color:n?e.stylesUI.activeColor:r?e.stylesUI.hoverColor:e.stylesUI.color}},e.title)},qo="M1.992 13.004H5V4.996h8.008V2.008H15v2.988h3.008v2.012H15v7.988H6.992v3.008H5v-3.008H1.992v-1.992zm11.016 0V7.008H6.992v5.996h6.016z";class Xo extends C().Component{constructor(e){super(e),this.imgRef=(0,_.createRef)(),this.imageContainerRef=(0,_.createRef)(),this.cropWorkingPaneRef=(0,_.createRef)(),this._updatePoint=(e,t)=>{const r=[...this.state.cropInfos];r[this.props.imageIndex].cropPoints[e]=t,this.setState({cropInfos:r})},this._setMaxHeight=ho()((()=>{const e=this.cropWorkingPaneRef.current.offsetHeight-54;e?(this.imageContainerRef.current.style.maxHeight=e-50+"px",this.imageContainerRef.current.style.visibility="visible",this._detectScale()):requestAnimationFrame(this._setMaxHeight)}),100),this._detectScale=()=>{if(this.imgRef.current.width){const e=this.imgRef.current,t=this.props.image.originalDocumentBoundary.some((e=>0!==e.x||0!==e.y));let r=sr.userOptions.mode===ir.SingleCrop&&t?this.props.image.originalDocumentBoundary:this.props.image.documentBoundary;const n=e.width/e.naturalWidth;r[0].x===r[1].x&&r[0].y===r[1].y&&(r=[{x:0,y:e.naturalHeight},{x:0,y:0},{x:e.naturalWidth,y:0},{x:e.naturalWidth,y:e.naturalHeight}]);const i=[...this.state.cropInfos];i[this.props.imageIndex]={scale:n,cropPoints:r.map((e=>({x:e.x*n,y:e.y*n}))),imgWidth:e.naturalWidth,imgHeight:e.naturalHeight},this.setState({cropInfos:i})}else requestAnimationFrame(this._detectScale)},this._reCrop=async()=>{this.props.changeStatus(kr.PROCESSING);try{const e=[];for await(const[t,r]of this.state.cropInfos.entries())try{if(0===r.cropPoints.length);else{const r=this.props.images[t].originalImageId,{jpegBytes:n}=await mr.files.get(r),i=this.state.cropInfos[t].cropPoints.map((e=>({x:e.x/this.state.cropInfos[t].scale,y:e.y/this.state.cropInfos[t].scale}))),a=await Da.recropImage(n,i);if(!a)throw Error("No croppedJpegData");{const r=await Da.checkQualityAssessmentForOCR(n,i);e.push({index:t,image:{originalImage:n,capturedImage:a,documentBoundary:i,originalDocumentBoundary:this.props.images[t].originalDocumentBoundary,ocrQuality:r}})}}}catch(e){}this.props.replaceImages(e)}finally{this.props.changeStatus(kr.IDLE),this.props.switchToPreview()}},this._cropFull=()=>{const e=[...this.state.cropInfos],t=e[this.props.imageIndex].scale*e[this.props.imageIndex].imgWidth,r=e[this.props.imageIndex].scale*e[this.props.imageIndex].imgHeight;e[this.props.imageIndex]={...this.state.cropInfos[this.props.imageIndex],cropPoints:[{x:0,y:r},{x:0,y:0},{x:t,y:0},{x:t,y:r}]},this.setState({cropInfos:e})},this._cropOriginal=async()=>{const e=[...this.state.cropInfos],t=this.props.image,r=e[this.props.imageIndex];if(sr.userOptions.mode===ir.SingleCrop&&t.originalDocumentBoundary.some((e=>0===e.x&&0===e.y))){const e=this.props.images[this.props.imageIndex],{jpegBytes:r}=await mr.files.get(e.originalImageId),n=await sa(r),i=await(async e=>{const t=ua(e),r=await(async e=>{const t=await ha(e),r=aa(t.naturalWidth,t.naturalHeight);return r.drawImage(t,0,0),r})(t);return r.getImageData(0,0,r.canvas.width,r.canvas.height)})(n),{edges:a}=await Da.detectEdgesAndCrop(i,sr.userOptions.jpegQuality);t.originalDocumentBoundary=a}var n,i,a;r.cropPoints=(n=t.originalDocumentBoundary.map((e=>({x:e.x*r.scale,y:e.y*r.scale}))),i=r.imgWidth*r.scale,a=r.imgHeight*r.scale,ja(Ra(n))?n:[{x:0,y:a},{x:0,y:0},{x:i,y:0},{x:i,y:a}]),this.setState({cropInfos:e})},this.state={imageUrl:null,cropInfos:[...new Array(e.images.length)].fill({scale:1,cropPoints:[],imgWidth:0,imgHeight:0})}}componentDidMount(){this._setMaxHeight(),this._getOriginalImageUrl(),window.addEventListener("resize",this._setMaxHeight)}componentWillUnmount(){window.removeEventListener("resize",this._setMaxHeight),this.imgRef=null,this.imageContainerRef=null,this.cropWorkingPaneRef=null}componentDidUpdate(e,t){e.image.originalImageId!==this.props.image.originalImageId&&(this._getOriginalImageUrl(),0===this.state.cropInfos[this.props.imageIndex].cropPoints.length&&(this.detectScaleTimeout&&clearTimeout(this.detectScaleTimeout),this.detectScaleTimeout=window.setTimeout(this._detectScale,100)))}_getOriginalImageUrl(){return mr.files.get(this.props.image.originalImageId).then((e=>{const t=URL.createObjectURL(new Blob([e.jpegBytes],{type:"image/jpeg"}));this.setState({imageUrl:t})}))}render(){const e=this.state.cropInfos[this.props.imageIndex];return C().createElement("div",{className:"ABBYY_Capture_Module__CropView"},C().createElement(Yo,null,C().createElement(Ko,{className:"button normal",onClick:sr.userOptions.mode===ir.SingleCrop?this.props.saveImage:this.props.switchToPreview,dataTestId:"crop-cancel",title:Ft.cancel,stylesUI:er.manualCropScreen.cancelButton}),C().createElement("span",null,Ft.crop),C().createElement(Ko,{className:"button",onClick:this._reCrop,dataTestId:"crop-apply",title:Ft.apply,stylesUI:er.manualCropScreen.applyButton})),C().createElement("div",{className:"ABBYY_Capture_Module__CropView_WorkingPane",ref:this.cropWorkingPaneRef},C().createElement("div",{ref:this.imageContainerRef},C().createElement("img",{ref:this.imgRef,src:this.state.imageUrl}),C().createElement($o,{img:this.state.imageUrl,imgWidth:e.scale*e.imgWidth,imgHeight:e.scale*e.imgHeight,cropPoints:e.cropPoints,updatePoint:this._updatePoint,svgExtraSpace:25}))),C().createElement("div",{className:"ABBYY_Capture_Module__CropView_BottomPane"},C().createElement(Ho,{className:"ABBYY_Capture_Module__CropView_FullCrop",onClick:this._cropFull,dataTestId:"crop-full",stylesUI:er.manualCropScreen.fullCropButton,svgPathDFrame:qo,svgPathDIcon:"M19.96 18.512l-2.538-2.54 2.539-2.538-1.445-1.426-2.54 2.539-2.539-2.442-1.445 1.329 2.559 2.539-2.442 2.539 1.329 1.445 2.539-2.539 2.539 2.539 1.445-1.445z"}),C().createElement(Wo,{stylesUIPrevImg:er.manualCropScreen.previousImageButton,stylesUINextImg:er.manualCropScreen.nextImageButton}),C().createElement(Ho,{className:"ABBYY_Capture_Module__CropView_OriginalCrop",onClick:this._cropOriginal,dataTestId:"crop-original",stylesUI:er.manualCropScreen.autoCropButton,svgPathDFrame:qo,svgPathDIcon:"M20.066 18.637c.313-.443.554-.925.723-1.446.17-.533.254-1.093.254-1.68 0-.754-.143-1.47-.43-2.148-.286-.664-.683-1.243-1.191-1.738-.495-.508-1.074-.905-1.738-1.191-.678-.287-1.394-.43-2.149-.43-.768 0-1.484.143-2.148.43-.664.286-1.25.683-1.758 1.191-.495.495-.886 1.074-1.172 1.738-.286.677-.43 1.394-.43 2.149 0 .755.144 1.471.43 2.148.286.664.677 1.25 1.172 1.758.508.495 1.094.885 1.758 1.172.664.286 1.38.43 2.148.43.586 0 1.14-.085 1.66-.254.534-.17 1.029-.41 1.485-.723l1.875 1.914 1.406-1.426-1.895-1.894zm-4.53.722c-.522 0-1.016-.104-1.485-.312-.469-.195-.88-.462-1.23-.8-.34-.352-.606-.763-.801-1.231-.209-.47-.313-.97-.313-1.504 0-.521.104-1.016.313-1.485.195-.468.462-.872.8-1.21.352-.352.762-.626 1.23-.82.47-.21.964-.313 1.485-.313.534 0 1.035.104 1.504.312.456.195.86.469 1.211.82.352.339.625.743.82 1.211.209.47.313.964.313 1.485 0 .534-.104 1.035-.313 1.504-.195.468-.468.879-.82 1.23-.352.339-.755.606-1.21.8-.47.21-.971.313-1.505.313zm.859-6.27c-.144-.025-.3-.045-.47-.058-.155-.013-.318-.02-.488-.02-.143 0-.286.007-.43.02-.13 0-.26.013-.39.04l-1.62 4.003c.103.17.227.326.37.469.143.13.293.247.45.352l.312-.899h2.812l.274.82c.156-.104.3-.227.43-.37.13-.144.24-.3.332-.47l-1.582-3.886zM14.52 16l.996-2.617L16.55 16H14.52z"})))}}const Qo=re((e=>({imageIndex:e.images.currentImageIndex,images:e.images.entries,image:e.images.entries[e.images.currentImageIndex]})),{switchToPreview:()=>Dr.changeMode(fr.Preview),changeStatus:Dr.changeStatus,replaceImages:Cr,saveImage:Dr.saveImage})(Xo),Jo=e=>{var t,r,n,i;const a=(0,_.useRef)(null),[o,s]=zo(a),u="ABBYY_Capture_Module__Message-Icon ABBYY_Capture_Module__Message-Icon--"+e.icon,l=e.messages.map(((e,t)=>C().createElement("div",{className:"ABBYY_Capture_Module__Message",key:t,"data-testid":"message-popup-messages"},C().createElement("span",{className:"ABBYY_Capture_Module__Message-Title"},e.title),C().createElement("span",{className:"ABBYY_Capture_Module__Message-Text"},e.text)))),c=s?null==(t=e.stylesUI)?void 0:t.bgActiveColor:o?null==(r=e.stylesUI)?void 0:r.bgHoverColor:null==(n=e.stylesUI)?void 0:n.bgColor;return C().createElement("div",{className:"ABBYY_Capture_Module__Message_Popup"},C().createElement("div",{className:"ABBYY_Capture_Module__Message_Popup_Container"},C().createElement("div",{className:u}),l,C().createElement("button",{onClick:e.onButtonClick,"data-testid":"message-popup-button",ref:a,style:{color:null==(i=e.stylesUI)?void 0:i.textColor,backgroundColor:c}},e.buttonText)))};var Zo=r(1039);const es=e=>{const t=(0,_.useRef)(null),[r,n]=zo(t),i=n?e.stylesUI.bgActiveColor:r?e.stylesUI.bgHoverColor:e.stylesUI.bgColor;return C().createElement("button",{className:e.className,onClick:e.onClick,disabled:e.disabled,"data-testid":e.dataTestId,ref:t,style:{display:"Done"===e.title?"block":e.stylesUI.display,color:e.stylesUI.textColor,backgroundColor:i}},e.title)},ts=re((e=>({canAddNewImage:sr.userOptions.maxImagesCount<=e.images.entries.length})),{changeMode:Dr.changeMode,saveImage:()=>Dr.saveImage()})((e=>C().createElement("div",{className:"ABBYY_Capture_Module_BottomPanel"},C().createElement(es,{className:"ABBYY_Capture_Module_BottomPanel_button",onClick:()=>{e.changeMode(sr.userOptions.useSystemCamera?fr.CaptureNative:fr.Capture)},disabled:e.canAddNewImage,dataTestId:"preview-add",title:Ft.add_page,stylesUI:er.imageEditorScreen.addPageButton}),C().createElement(es,{className:"ABBYY_Capture_Module_BottomPanel_button ABBYY_Capture_Module_BottomPanel_button--save",onClick:e.saveImage,dataTestId:"preview-save",title:Ft.done,stylesUI:er.imageEditorScreen.doneButton})))),rs=e=>{const t=(0,_.useRef)(null),[r,n]=zo(t),i=`ABBYY_Capture_Module__ToolBar_button ABBYY_Capture_Module__ToolBar_button_img--${e.imageName}`,a=r?e.stylesUI.hoverColor:e.stylesUI.color,o=n?e.stylesUI.activeColor:a;return C().createElement("div",{className:i,onClick:e.onClick,style:{display:e.stylesUI.display,color:e.stylesUI.color},ref:t},C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},C().createElement("g",{fill:"none",fillRule:"evenodd"},C().createElement("path",{d:"M0 0h24v24H0z"}),C().createElement("path",{fill:o,fillRule:"nonzero",d:e.svgPathD}))),C().createElement("p",{style:{color:o}},e.title))},ns=re((e=>({image:e.images.entries[e.images.currentImageIndex]})),{replaceImage:_r,deleteImage:wr,changeMode:Dr.changeMode})((e=>{let{image:t,deleteImage:r,changeMode:n,replaceImage:i,onRotateChange:a}=e;const o=(0,_.useCallback)((()=>{n(sr.userOptions.useSystemCamera?fr.RecaptureNative:fr.Recapture)}),[n]),s=(0,_.useCallback)((()=>n(fr.Crop)),[n]),u=(0,_.useCallback)((async()=>{a(!0);const e=await async function(e,t){void 0===t&&(t=90);const r=await ga(e),n=await Ba({...e,originalImage:sa(r.originalImage),capturedImage:r.capturedImage?sa(r.capturedImage):void 0});return{...n,originalImage:await la(n.originalImage),capturedImage:n.capturedImage?await la(n.capturedImage):void 0}}(t);await i(e),setTimeout((()=>{a(!1)}),100)}),[t,a,i]);return C().createElement(Yo,null,C().createElement(rs,{title:Ft.retake,onClick:o,imageName:"retake","data-testid":"preview-retake",stylesUI:er.imageEditorScreen.retakeButton,svgPathD:"M7.996 9.633c.52-.73 1.178-1.309 1.973-1.738.807-.43 1.68-.645 2.617-.645h.176c.56 0 1.1.085 1.62.254.509.156.977.384 1.407.684.43.286.814.638 1.152 1.054.326.404.593.853.801 1.348l2.383-.84c-.3-.742-.703-1.42-1.21-2.031-.496-.612-1.069-1.14-1.72-1.582-.638-.443-1.334-.782-2.09-1.016-.768-.247-1.569-.371-2.402-.371h-.078-.02c-.716 0-1.406.091-2.07.273-.677.17-1.308.417-1.894.743-.573.325-1.107.716-1.602 1.171-.482.456-.905.964-1.27 1.524L3.25 7.25 4.5 13.5l6.25-2.5-2.754-1.367zM22 18.5l-1.25-6.25-6.25 2.5 2.754 1.367c-.508.73-1.159 1.309-1.953 1.738-.781.43-1.64.645-2.578.645H12.43c-.547 0-1.075-.078-1.582-.234-.495-.157-.957-.378-1.387-.664-.43-.287-.807-.625-1.133-1.016-.338-.39-.612-.827-.82-1.309L5.125 16c.3.742.703 1.42 1.21 2.031.496.612 1.062 1.14 1.7 1.582.651.443 1.354.782 2.11 1.016.768.247 1.569.371 2.402.371h.098c.716 0 1.406-.091 2.07-.273.677-.17 1.302-.417 1.875-.743.586-.325 1.126-.716 1.62-1.172.483-.455.906-.963 1.27-1.523L22 18.5z"}),C().createElement(rs,{title:Ft.rotate,onClick:u,imageName:"rotate","data-testid":"preview-rotate",stylesUI:er.imageEditorScreen.rotateButton,svgPathD:"M16.316 15.258l2.247 1.113c-.313.638-.684 1.218-1.114 1.738-.443.521-.937.977-1.484 1.368l-1.524-1.973c.404-.287.762-.619 1.075-.996.312-.378.572-.788.78-1.23l.02-.02zm-5-10.508h.02c.716 0 1.406.091 2.07.273.677.17 1.309.417 1.895.743.573.325 1.107.716 1.601 1.171.482.456.905.964 1.27 1.524l2.52-1.211-1.25 6.25-6.25-2.5 2.753-1.367c-.52-.742-1.185-1.328-1.992-1.758-.807-.443-1.686-.664-2.637-.664-.78 0-1.51.143-2.187.43-.69.3-1.29.703-1.797 1.21-.508.508-.905 1.1-1.191 1.778-.3.69-.45 1.426-.45 2.207v.039c.013.338.052.67.118.996.065.313.156.619.273.918l-2.383.703c-.143-.39-.254-.807-.332-1.25-.078-.443-.117-.898-.117-1.367 0-1.12.215-2.168.645-3.145.416-.99.99-1.848 1.718-2.578.73-.729 1.582-1.308 2.559-1.738.976-.43 2.025-.651 3.144-.664zm-2.5 13.125l-1.132 2.246c-.638-.325-1.218-.716-1.739-1.172-.52-.456-.976-.97-1.367-1.543L6.688 16c.273.39.585.749.937 1.074.352.313.736.573 1.152.781l.04.02zm2.5.625l1.758-.254.742 2.383c-.364.117-.748.208-1.152.273-.417.065-.84.098-1.27.098H9.814l.507-2.5h.996z"}),C().createElement(rs,{title:Ft.crop,onClick:s,imageName:"crop","data-testid":"preview-crop",stylesUI:er.imageEditorScreen.cropButton,svgPathD:"M20.008 15.004H17V6.996H8.992V4.008H7v2.988H3.992v2.012H7v7.988h8.008v3.008H17v-3.008h3.008v-1.992zm-11.016 0V9.008h6.016v5.996H8.992z"}),C().createElement(rs,{title:Ft.delete,onClick:r,imageName:"delete","data-testid":"preview-delete",stylesUI:er.imageEditorScreen.deleteButton,svgPathD:"M7.996 9.008h8.008v10H7.996v-10zM13.992 6v-.996h-3.984V6H7v1.992h10V6h-3.008z"}))})),is=re((e=>{const t=e.images.entries[e.images.currentImageIndex],r=t.ocrQuality&&t.ocrQuality.confidence||null,n=[],i="BaseCapture"===sr.userOptions.mode||"SingleView"===sr.userOptions.mode&&sr.userOptions.enableQualityAssessmentForOCR;r&&r<sr.ocrQualityBound&&i&&n.push({title:Ft.low_quality_title,text:Ft.low_quality_text});const a=ja(Ra(t.documentBoundary))?t.documentBoundary:t.originalDocumentBoundary;return ja(Ra(a))||n.push({title:Ft.crop_boundaries_not_found_title,text:Ft.crop_boundaries_not_found_text}),{warnings:n,imageId:t.capturedImageId}}),{changeStatus:Dr.changeStatus})((e=>{const{imageId:t,warnings:r,changeStatus:n}=e,i=(0,_.useRef)(),a=(0,_.useRef)(),[o,s]=(0,_.useState)(!1),[u,l]=(0,_.useState)(!1),c=(e=>{const[t,r]=(0,_.useState)(null),n=(0,Zo.useLiveQuery)((()=>mr.files.get(e)),[e]);return(0,_.useEffect)((()=>{if(!n)return;const e=(e=>{const t=new Blob([e],{type:"image/jpeg"});return ua(t)})(n.jpegBytes);return r(e),()=>{URL.revokeObjectURL(e),r(null)}}),[n]),t})(t),h=(0,_.useCallback)((e=>{n(e?kr.PROCESSING:kr.IDLE)}),[n]),f=(0,_.useCallback)((()=>{l((e=>!e))}),[]),p=(0,_.useCallback)((()=>{if(null===a.current)return;const e=a.current.offsetHeight;e?(i.current.style.maxHeight=e+"px",s(!0)):requestAnimationFrame(p)}),[]);return(0,_.useEffect)(p,[p]),C().createElement("div",{className:"ABBYY_Capture_Module_ImagePreview"},C().createElement(ns,{onRotateChange:h}),C().createElement("div",{ref:a,className:"ABBYY_Capture_Module_ImageParentContainer"},C().createElement("div",{ref:i,className:"ABBYY_Capture_Module_ImageContainer"},o&&c&&C().createElement("img",{src:c}),r.length>0&&!u&&C().createElement("div",{className:"ABBYY_Capture_Module-Show_Warnings_Button",onClick:f}))),C().createElement(Wo,{stylesUIPrevImg:er.imageEditorScreen.previousImageButton,stylesUINextImg:er.imageEditorScreen.nextImageButton}),u&&C().createElement(Jo,{messages:e.warnings,icon:"warning",buttonText:Ft.continue,onButtonClick:f}),C().createElement(ts,null))})),as=e=>{let{status:t}=e;const r={[kr.PROCESSING]:Ft.image_processing,[kr.LOADING]:Ft.app_loading,[kr.IDLE]:""};return r[t]?C().createElement(Ao,{message:r[t],className:"ABBYY_Capture_Module_Process_Page",iconClassName:"ABBYY_Capture_Module_Process_Page_loader",stylesUI:er.secondaryScreens,svgPathD:"M10 8.5c0 .421-.148.776-.444 1.066-.296.29-.648.434-1.056.434-.408 0-.76-.145-1.056-.434A1.433 1.433 0 0 1 7 8.5c0-.408.148-.76.444-1.056A1.442 1.442 0 0 1 8.5 7c.408 0 .76.148 1.056.444.296.296.444.648.444 1.056zM6 17l3.001-5.022 2 3.025L14.004 10 18 17H6zM19 5H5v14h14V5zm.997-2c.273 0 .504.105.7.3A.942.942 0 0 1 21 4v16.004c0 .273-.109.5-.304.696a.958.958 0 0 1-.7.3H4.004a.958.958 0 0 1-.7-.3.954.954 0 0 1-.303-.696V4c0-.286.109-.505.304-.7a.958.958 0 0 1 .7-.3h15.993z"}):null},os={preview:is,recapture:No,capture:No,crop:Qo,captureNative:Xa,recaptureNative:Xa};class ss extends C().Component{constructor(e){super(e),this.onOrientationChange=()=>{const e=async()=>{this.setState({orientation:await this.getOrientation()}),window.removeEventListener("resize",e)};window.addEventListener("resize",e)},this.getOrientation=async()=>(await new Promise((e=>setTimeout(e,500))),window.innerWidth>window.innerHeight?"landscape":"portrait"),this.state={deviceType:Xt()?Qt()?"tablet":"mobile":"desktop",orientation:"portrait"}}async componentDidMount(){window.addEventListener("orientationchange",this.onOrientationChange),this.setState({orientation:await this.getOrientation()})}componentWillUnmount(){window.removeEventListener("orientationchange",this.onOrientationChange),sessionStorage.removeItem("abbyy:mwc:cameraActivated")}render(){const{mode:e,status:t}=this.props,r=os[e];return C().createElement("div",{className:`ABBYY_Capture_Module__Container ${this.state.deviceType} ${this.state.orientation}`},C().createElement(r,null),C().createElement(as,{status:t}))}}const us=re((e=>({mode:e.mode,status:e.status})))(ss),ls=e=>{let{message:t}=e;return C().createElement(Ao,{message:t,className:"ABBYY_Capture_Module_Wasm_Loading_Page",iconClassName:"ABBYY_Capture_Module_Wasm_Loading_Page_loader",stylesUI:er.secondaryScreens,svgPathD:"M13.71 4L18 8.695v10.366a.95.95 0 0 1-.251.663.788.788 0 0 1-.604.276H6.855a.788.788 0 0 1-.604-.276A.95.95 0 0 1 6 19.06V4.957c0-.27.084-.497.251-.68A.788.788 0 0 1 6.855 4h6.854zm2.58 14.122V9.634h-2.58a.788.788 0 0 1-.604-.276.95.95 0 0 1-.251-.663V5.86H7.709v12.262h8.582zM2 0h6a2 2 0 0 1-2 2H2v4a2 2 0 0 1-2 2V2a2 2 0 0 1 2-2zm20 0a2 2 0 0 1 2 2v6a2 2 0 0 1-2-2V2h-4a2 2 0 0 1-2-2h6zm0 24h-6a2 2 0 0 1 2-2h4v-4a2 2 0 0 1 2-2v6a2 2 0 0 1-2 2zM2 24a2 2 0 0 1-2-2v-6a2 2 0 0 1 2 2v4h4a2 2 0 0 1 2 2H2z"})};ls.displayName="WasmLoadingPage";const cs=ls,hs=(e,t)=>{const r=Xt()?Qt()?"tablet":"mobile":"desktop";w().render(C().createElement("div",{className:`ABBYY_Capture_Module__Container ${r} ABBYY_Capture_Module__Error`},C().createElement("div",{className:"ABBYY_Capture_Module_CaptureView"},C().createElement(Ao,{message:e}),C().createElement("div",{className:"ABBYY_Capture_Module_CaptureView_ButtonContainer "},C().createElement("div",{"data-testid":"capture-button-close",className:"ABBYY_Capture_Module_CaptureView_Button ABBYY_Capture_Module_CaptureView_Button__Close_Button",onClick:t})))),document.getElementById("ABBYY_Capture_Module"))},fs=e=>e instanceof Blob&&"image/jpeg"===e.type,ps=e=>!!fs(e)||(window.console.error("Invalid value of parameter originalImage. The value of originalImage must be jpeg blob."),!1),ds=()=>{if(Ss!==ya.Initialized)throw Error(Ft.wasm_license_error)},ms=e=>{var t,r;const n=null!=(t=e.documentBoundary)?t:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],i=null!=(r=e.originalDocumentBoundary)?r:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}];return{...e,documentBoundary:n,originalDocumentBoundary:i}},gs={aspectRatioMin:{should_be_number:"Invalid value of parameter aspectRatioMin ($aspectRatioMin). Parameter type should be number.",smaller_value:"The value of parameter aspectRatioMin ($aspectRatioMin) exceeds maximum safe integer. Please, choose smaller value.",more_than_one:"Invalid value of parameter aspectRatioMin ($aspectRatioMin). The value should be >= 1.",smaller_than_aspectRatioMax:"Invalid parameter values aspectRatioMin ($aspectRatioMin) and aspectRatioMax($aspectRatioMax). The value aspectRatioMin should be <= the value aspectRatioMax.",not_NaN:"Invalid value of parameter aspectRatioMin ($aspectRatioMin). The value should be !== NaN."},aspectRatioMax:{should_be_number:"Invalid value of parameter aspectRatioMax ($aspectRatioMax). Parameter type should be number.",smaller_value:"The value of parameter aspectRatioMax ($aspectRatioMax) exceeds maximum safe integer. Please, choose smaller value.",more_than_one:"Invalid value of parameter aspectRatioMax ($aspectRatioMax). The value should be >= 1.",not_NaN:"Invalid value of parameter aspectRatioMax ($aspectRatioMax). The value should be !== NaN."},jpegQualityRange:"Invalid value of jpegQuality ($jpegQuality). The value should be in the range from 1 to 100.",startPage_should_be_number:"Invalid value of parameter startPage ($startPage). Parameter type should be number.",maxImagesCount:{should_be_number:"Invalid value of parameter maxImagesCount ($maxImagesCount). Parameter type should be number.",more_than_one:"Invalid value of parameter maxImagesCount ($maxImagesCount). The value should be >= 1.",smaller_value:"The value of parameter maxImagesCount ($maxImagesCount) exceeds maximum safe integer. Please, choose smaller value.",smaller_than_maxImagesCount:"Invalid parameter values maxImagesCount ($maxImagesCount) and startPage($startPage). The value maxImagesCount should be >= the value startPage."},should_be_boolean:"Invalid value of parameter $parameter ($value). Parameter type should be boolean.",should_be_string:"Invalid value of parameter $parameter ($value). Parameter type should be string.",frameBoundaryPaddingRange:"Invalid value of parameter frameBoundaryPadding ($frameBoundaryPadding). The value should be in the range from 1 to 50.",minCameraResolution_more_than_zero:"Invalid value of parameter minCameraResolution ($minCameraResolution). The value should be >= 0.",documentSizeRange:"Invalid value of parameter documentSize ($documentSize). The value must be one of the following: A4, letter, ID-1, ID-2, ID-3.",preferredCameraResolutionRange:"Invalid value of parameter preferredCameraResolution ($preferredCameraResolution). The value must be one of the following: 4K, FullHD, Auto.",modeRange:"Invalid value of parameter mode ($mode). The value must be one of the following: BaseCapture, SingleCapture, SingleView, SingleCrop.",images:{should_be_array:"Invalid value of parameter images ($images). Parameter should be array of images.",should_be_blob:"Invalid value of parameter name. The value of name must be image encoded in Blob.",documentBoundary_incorrect:"Invalid value of parameter documentBoundary ($documentBoundary). The parameter is incorrect, see documentation."}},vs={aspectRatioMin:e=>"number"!=typeof e.aspectRatioMin?gs.aspectRatioMin.should_be_number.replace("$aspectRatioMin",`${e.aspectRatioMin}`):e.aspectRatioMin>Number.MAX_SAFE_INTEGER?gs.aspectRatioMin.smaller_value.replace("$aspectRatioMin",`${e.aspectRatioMin}`):bs(e)?gs.aspectRatioMin.more_than_one.replace("$aspectRatioMin",`${e.aspectRatioMin}`):e.aspectRatioMax<e.aspectRatioMin&&0!==e.aspectRatioMin?gs.aspectRatioMin.smaller_than_aspectRatioMax.replace("$aspectRatioMin",`${e.aspectRatioMin}`).replace("$aspectRatioMax",`${e.aspectRatioMax}`):isNaN(e.aspectRatioMin)?gs.aspectRatioMin.not_NaN.replace("$aspectRatioMin",`${e.aspectRatioMin}`):"",aspectRatioMax:e=>"number"!=typeof e.aspectRatioMax?gs.aspectRatioMax.should_be_number.replace("$aspectRatioMax",`${e.aspectRatioMax}`):e.aspectRatioMax>Number.MAX_SAFE_INTEGER?gs.aspectRatioMax.smaller_value.replace("$aspectRatioMax",`${e.aspectRatioMax}`):0!==e.aspectRatioMax&&e.aspectRatioMax<1?gs.aspectRatioMax.more_than_one.replace("$aspectRatioMax",`${e.aspectRatioMax}`):isNaN(e.aspectRatioMax)?gs.aspectRatioMax.not_NaN.replace("$aspectRatioMax",`${e.aspectRatioMax}`):"",jpegQuality:e=>"number"!=typeof e.jpegQuality||isNaN(e.jpegQuality)||e.jpegQuality<1||e.jpegQuality>100?gs.jpegQualityRange.replace("$jpegQuality",`${e.jpegQuality}`):"",startPage:e=>"number"!=typeof e.startPage||isNaN(e.startPage)?gs.startPage_should_be_number.replace("$startPage",`${e.startPage}`):"",maxImagesCount:e=>"number"!=typeof e.maxImagesCount||isNaN(e.maxImagesCount)?gs.maxImagesCount.should_be_number.replace("$maxImagesCount",`${e.maxImagesCount}`):e.maxImagesCount<1?gs.maxImagesCount.more_than_one.replace("$maxImagesCount",`${e.maxImagesCount}`):e.maxImagesCount>Number.MAX_SAFE_INTEGER?gs.maxImagesCount.smaller_value.replace("$maxImagesCount",`${e.maxImagesCount}`):e.maxImagesCount<e.startPage?gs.maxImagesCount.smaller_than_maxImagesCount.replace("$maxImagesCount",`${e.maxImagesCount}`).replace("$startPage",`${e.startPage}`):"",enableCamera:e=>"boolean"!=typeof e.enableCamera?gs.should_be_boolean.replace("$parameter","enableCamera").replace("$value",`${e.enableCamera}`):"",enableAutoCapture:e=>"boolean"!=typeof e.enableAutoCapture?gs.should_be_boolean.replace("$parameter","enableAutoCapture").replace("$value",`${e.enableAutoCapture}`):"",enableAutoCrop:e=>"boolean"!=typeof e.enableAutoCrop?gs.should_be_boolean.replace("$parameter","enableAutoCrop").replace("$value",`${e.enableAutoCrop}`):"",enableQualityAssessmentForOCR:e=>"boolean"!=typeof e.enableQualityAssessmentForOCR?gs.should_be_boolean.replace("$parameter","enableQualityAssessmentForOCR").replace("$value",`${e.enableQualityAssessmentForOCR}`):"",licenseFilePath:e=>"string"!=typeof e.licenseFilePath?gs.should_be_string.replace("$parameter","licenseFilePath").replace("$value",`${e.licenseFilePath}`):"",wasmFilesPath:e=>"string"!=typeof e.wasmFilesPath?gs.should_be_string.replace("$parameter","wasmFilesPath").replace("$value",`${e.wasmFilesPath}`):"",frameBoundaryPadding:e=>"number"!=typeof e.frameBoundaryPadding||isNaN(e.frameBoundaryPadding)||e.frameBoundaryPadding<1||e.frameBoundaryPadding>50?gs.frameBoundaryPaddingRange.replace("$frameBoundaryPadding",`${e.frameBoundaryPadding}`):"",minCameraResolution:e=>"number"!=typeof e.minCameraResolution||isNaN(e.minCameraResolution)||e.minCameraResolution<0?gs.minCameraResolution_more_than_zero.replace("$minCameraResolution",`${e.minCameraResolution}`):"",documentSize:e=>null===e.documentSize||Object.values(ar).includes(e.documentSize)?"string"!=typeof e.documentSize&&null!==e.documentSize?gs.should_be_string.replace("$parameter","documentSize").replace("$value",`${e.documentSize}`):"":gs.documentSizeRange.replace("$documentSize",`${e.documentSize}`),preferredCameraResolution:e=>Object.values(nr).includes(e.preferredCameraResolution)?"string"!=typeof e.preferredCameraResolution?gs.should_be_string.replace("$parameter","preferredCameraResolution").replace("$value",`${e.preferredCameraResolution}`):"":gs.preferredCameraResolutionRange.replace("$preferredCameraResolution",`${e.preferredCameraResolution}`),enableSharpnessFilter:e=>"boolean"!=typeof e.enableSharpnessFilter?gs.should_be_boolean.replace("$parameter","enableSharpnessFilter").replace("$value",`${e.enableSharpnessFilter}`):"",mode:e=>ir[e.mode]?"":gs.modeRange.replace("$mode",`${e.mode}`),forceFrontCamera:e=>"boolean"!=typeof e.forceFrontCamera?gs.should_be_boolean.replace("$parameter","forceFrontCamera").replace("$value",`${e.forceFrontCamera}`):"",useSystemCamera:e=>"boolean"!=typeof e.useSystemCamera?gs.should_be_boolean.replace("$parameter","useSystemCamera").replace("$value",`${e.useSystemCamera}`):"",images:(e,t)=>null!==t&&Array.isArray(t)&&(e.mode!==ir.SingleView&&e.mode!==ir.SingleCrop||0!==t.length)?ys(t):gs.images.should_be_array.replace("$images",`${e.images}`)},ys=e=>{let t="";for(const r of e){if(!r.originalImage||!fs(r.originalImage)){t=gs.images.should_be_blob.replace(/name/g,"originalImage");break}if(r.documentBoundary&&("object"!=typeof r.documentBoundary||4!==r.documentBoundary.length||r.documentBoundary.some((e=>"number"!=typeof e.x||"number"!=typeof e.y)))){t=gs.images.documentBoundary_incorrect.replace("$documentBoundary",`${r.documentBoundary}`);break}if(void 0!==r.capturedImage&&!fs(r.capturedImage)){t=gs.images.should_be_blob.replace(/name/g,"capturedImage");break}}return t},bs=e=>e.aspectRatioMax>0&&e.aspectRatioMin<1||e.aspectRatioMin<0,ws=(e,t)=>{let r=!0;return Object.entries(vs).forEach((n=>{""!==n[1](e,t)&&(window.console.error(n[1](e,t)),r=!1)})),r},_s="Incorrect input parameters",Cs={rotateImage:async(e,t)=>{if(ds(),!ps(e.originalImage)||!(e=>"number"!=typeof e||isNaN(e)?(window.console.error(`Invalid value of parameter angle (${e}). Parameter type should be number.`),!1):e<-360||e>360?(window.console.error(`Invalid value of parameter angle (${e}). The value should be in the range from -360 to 360.`),!1):e%90==0||(window.console.error(`Invalid value of parameter angle (${e}). Parameter must be a multiple of 90.`),!1))(t))throw Error(_s);try{const r=await Ba(ms(e),t);return e.ocrQuality&&(r.ocrQuality=e.ocrQuality),r}catch(e){throw new Error(e)}},detectDocumentBoundary:async e=>{if(ds(),!ps(e))throw Error(_s);const t=await ca(e),r=await Da.getResultFromSource(t,t.naturalWidth,t.naturalHeight);return{...r,originalImage:sa(r.originalImage),capturedImage:r.capturedImage?sa(r.capturedImage):void 0}},cropImage:async function(e,t,r){if(void 0===r&&(r=null),ds(),ur({documentSize:r}),!ps(e)||!(e=>"object"==typeof e&&null!==e&&4===e.length&&!e.some((e=>"number"!=typeof e.x||"number"!=typeof e.y||isNaN(e.x)||isNaN(e.y)))||(window.console.error(`Invalid value of parameter coordinates (${e}). The parameter is incorrect, see documentation.`),!1))(t)||!ws(sr.userOptions,[]))throw Error("Incorrect input parameters");await Da.setWasmDocumentConfig();const n=await ca(e),i=[{x:0,y:n.naturalHeight},{x:0,y:0},{x:n.naturalWidth,y:0},{x:n.naturalWidth,y:n.naturalHeight}],a=Zt()(i,t,((e,t)=>{if(0===t)return e})),o=await Da.recropImage(await la(e),a);return{originalImage:e,capturedImage:sa(o),documentBoundary:t}},startCaptureProcess:async(e,t)=>{var r;if(ds(),t&&(t.documentSize=null!=(r=t.documentSize)?r:null,ur(t)),!ws(sr.userOptions,[]))throw Error(_s);await Da.setWasmDocumentConfig();const n=e.videoEl;await Da.captureProcess.startCaptureProcess({...e,areaOfInterest:mo({width:n.offsetWidth,height:n.offsetHeight},{width:n.videoWidth,height:n.videoHeight})})},stopCaptureProcess:()=>Da.captureProcess.stopCaptureProcess()};window.ABBYY=window.ABBYY||{};let xs,Ss=ya.None;const Is=()=>{if(!document.getElementById(window.ABBYY.WebCapture.containerId)){const e=document.createElement("div");e.style.display="none",e.setAttribute("id",window.ABBYY.WebCapture.containerId),e.setAttribute("class","ABBYY_Capture_Module"),e.setAttribute("display","none"),document.body.appendChild(e)}},Es=document.body.style.overflow;window.ABBYY.WebCapture={containerId:"ABBYY_Capture_Module",version:"1.13.4",init:async function(e){return void 0===e&&(e={}),ur(e),xs||(xs=new Promise((async(e,t)=>{if(Ss!==ya.None&&e(),!window.WebAssembly)return t("WebAssembly is not supported"),void(xs=null);Is(),Ss=ya.Loading;try{const e=new Worker(`${sr.userOptions.wasmFilesPath}/wasm-worker.js?version=1.13.4&q=${Date.now()}`);e.onerror=()=>{t("Error loading wasm scripts")},(e=>{ka=e})(c(e)),await Da.loadWasmScripts(),await Da.checkLicense(sr.userOptions.licenseFilePath)}catch(e){return Ss=ya.None,t("Error loading wasm scripts: "+e),void(xs=null)}Ss=ya.Initialized,await mr.files.clear(),e()}))),xs},capture:async function(e){let{images:t=[],...r}=void 0===e?{}:e;if(document.body.style.overflow="hidden",qt()&&(r.enableAutoCapture=!1),Is(),document.getElementById(window.ABBYY.WebCapture.containerId).style.display="",ur(r),ws(sr.userOptions,t)){if(Ss!==ya.Initialized)try{const e=r.licenseFilePath||sr.userOptions.licenseFilePath,t=r.wasmFilesPath||sr.userOptions.wasmFilesPath;await window.ABBYY.WebCapture.init({licenseFilePath:e,wasmFilesPath:t,localizedStrings:r.localizedStrings})}catch(e){throw hs(Ft.wasm_license_error,window.ABBYY.WebCapture.stopCapture),e}try{t=(e=>e.map(ms))(t)}catch(e){throw hs(Ft.capture_param_error,window.ABBYY.WebCapture.stopCapture),e}Da.setWasmDocumentConfig().catch((()=>{}));try{const e=await(async(e,t)=>{(e=>{w().render(C().createElement(_.StrictMode,null,C().createElement("div",{id:"ABBYY_Capture_Module__Loader_Container"},C().createElement(cs,{message:Ft.app_loading}))),document.getElementById(e))})(t);const r=await(async e=>{const t=[];for(const r of e){const[e,n]=await Promise.all([la(r.originalImage),...r.capturedImage?[la(r.capturedImage)]:[]]),i=await ma({...r,originalImage:e,capturedImage:n});t.push(i)}return t})(e);return new Promise(((e,n)=>{try{const n=Fr(r,e);w().render(C().createElement(_.StrictMode,null,C().createElement(ne,{store:n},C().createElement(us,null))),document.getElementById(t))}catch(e){window.console.error("Error Capturing Images: ",e),n(e)}}))})(t,window.ABBYY.WebCapture.containerId),r=await(async e=>{const t=[];for await(const r of e){const e=await ga(r);t.push(e)}return t})(e);return r.map((e=>({documentBoundary:e.documentBoundary,originalDocumentBoundary:e.originalDocumentBoundary,ocrQuality:e.ocrQuality,capturedImage:sa(e.capturedImage),originalImage:sa(e.originalImage)})))}finally{window.ABBYY.WebCapture.stopCapture()}}else hs(Ft.capture_param_error,window.ABBYY.WebCapture.stopCapture)},stopCapture:()=>{document.body.style.overflow=Es,document.getElementById(window.ABBYY.WebCapture.containerId).style.display="none",w().unmountComponentAtNode(document.getElementById(window.ABBYY.WebCapture.containerId))},imagingCoreApi:Cs}})()})();